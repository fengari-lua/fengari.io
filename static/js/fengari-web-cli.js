var _Mathmax=Math.max,_NumberparseInt=Number.parseInt,_MathPI=Math.PI,_Mathlog=Math.log,_Mathceil=Math.ceil,_NumberisNaN=Number.isNaN,_Mathabs=Math.abs,_Mathpow=Math.pow,_Mathfloor=Math.floor,_StringfromCharCode=String.fromCharCode,_Mathmin=Math.min,fengari_web_cli=function(T){function O(E){if(U[E])return U[E].exports;var N=U[E]={i:E,l:!1,exports:{}};return T[E].call(N.exports,N,N.exports,O),N.l=!0,N.exports}var U={};return O.m=T,O.c=U,O.i=function(E){return E},O.d=function(E,N,I){O.o(E,N)||Object.defineProperty(E,N,{configurable:!1,enumerable:!0,get:I})},O.n=function(E){var N=E&&E.__esModule?function(){return E['default']}:function(){return E};return O.d(N,'a',N),N},O.o=function(E,N){return Object.prototype.hasOwnProperty.call(E,N)},O.p='',O(O.s=38)}([function(T,O,U){'use strict';(function(E){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function N(de,Le){if(de===Le)return 0;for(var ge=de.length,Ae=Le.length,Te=0,he=_Mathmin(ge,Ae);Te<he;++Te)if(de[Te]!==Le[Te]){ge=de[Te],Ae=Le[Te];break}return ge<Ae?-1:Ae<ge?1:0}function I(de){return E.Buffer&&'function'==typeof E.Buffer.isBuffer?E.Buffer.isBuffer(de):!!(null!=de&&de._isBuffer)}function P(de){return Object.prototype.toString.call(de)}function M(de){return!I(de)&&'function'==typeof E.ArrayBuffer&&('function'==typeof ArrayBuffer.isView?ArrayBuffer.isView(de):!!de&&(!!(de instanceof DataView)||de.buffer&&de.buffer instanceof ArrayBuffer))}function K(de){if(ue.isFunction(de)){if(oe)return de.name;var Le=de.toString(),ge=Le.match(pe);return ge&&ge[1]}}function V(de,Le){return'string'==typeof de?de.length<Le?de:de.slice(0,Le):de}function F(de){if(oe||!ue.isFunction(de))return ue.inspect(de);var Le=K(de),ge=Le?': '+Le:'';return'[Function'+ge+']'}function H(de){return V(F(de.actual),128)+' '+de.operator+' '+V(F(de.expected),128)}function Y(de,Le,ge,Ae,Te){throw new _e.AssertionError({message:ge,actual:de,expected:Le,operator:Ae,stackStartFunction:Te})}function J(de,Le){de||Y(de,!0,Le,'==',_e.ok)}function q(de,Le,ge,Ae){if(de===Le)return!0;if(I(de)&&I(Le))return 0===N(de,Le);if(ue.isDate(de)&&ue.isDate(Le))return de.getTime()===Le.getTime();if(ue.isRegExp(de)&&ue.isRegExp(Le))return de.source===Le.source&&de.global===Le.global&&de.multiline===Le.multiline&&de.lastIndex===Le.lastIndex&&de.ignoreCase===Le.ignoreCase;if((null===de||'object'!=typeof de)&&(null===Le||'object'!=typeof Le))return ge?de==Le:de==Le;if(M(de)&&M(Le)&&P(de)===P(Le)&&!(de instanceof Float32Array||de instanceof Float64Array))return 0===N(new Uint8Array(de.buffer),new Uint8Array(Le.buffer));if(I(de)!==I(Le))return!1;Ae=Ae||{actual:[],expected:[]};var Te=Ae.actual.indexOf(de);return-1!==Te&&Te===Ae.expected.indexOf(Le)||(Ae.actual.push(de),Ae.expected.push(Le),Q(de,Le,ge,Ae))}function W(de){return'[object Arguments]'==Object.prototype.toString.call(de)}function Q(de,Le,ge,Ae){if(null===de||void 0===de||null===Le||void 0===Le)return!1;if(ue.isPrimitive(de)||ue.isPrimitive(Le))return de===Le;if(ge&&Object.getPrototypeOf(de)!==Object.getPrototypeOf(Le))return!1;var Te=W(de),he=W(Le);if(Te&&!he||!Te&&he)return!1;if(Te)return de=ne.call(de),Le=ne.call(Le),q(de,Le,ge);var xe=ce(de),Oe=ce(Le),Ue,Ee;if(xe.length!==Oe.length)return!1;for(xe.sort(),Oe.sort(),Ee=xe.length-1;0<=Ee;Ee--)if(xe[Ee]!==Oe[Ee])return!1;for(Ee=xe.length-1;0<=Ee;Ee--)if(Ue=xe[Ee],!q(de[Ue],Le[Ue],ge,Ae))return!1;return!0}function $(de,Le,ge){q(de,Le,!0)&&Y(de,Le,ge,'notDeepStrictEqual',$)}function ee(de,Le){if(!de||!Le)return!1;if('[object RegExp]'==Object.prototype.toString.call(Le))return Le.test(de);try{if(de instanceof Le)return!0}catch(ge){}return!Error.isPrototypeOf(Le)&&!0===Le.call({},de)}function te(de){var Le;try{de()}catch(ge){Le=ge}return Le}function ae(de,Le,ge,Ae){var Te;if('function'!=typeof Le)throw new TypeError('"block" argument must be a function');'string'==typeof ge&&(Ae=ge,ge=null),Te=te(Le),Ae=(ge&&ge.name?' ('+ge.name+').':'.')+(Ae?' '+Ae:'.'),de&&!Te&&Y(Te,ge,'Missing expected exception'+Ae);var he='string'==typeof Ae,xe=!de&&ue.isError(Te),Oe=!de&&Te&&!ge;if((xe&&he&&ee(Te,ge)||Oe)&&Y(Te,ge,'Got unwanted exception'+Ae),de&&Te&&ge&&!ee(Te,ge)||!de&&Te)throw Te}var ue=U(36),se=Object.prototype.hasOwnProperty,ne=Array.prototype.slice,oe=function(){return'foo'===function(){}.name}(),_e=T.exports=J,pe=/\s*function\s+([^\(\s]*)\s*/;_e.AssertionError=function(Le){this.name='AssertionError',this.actual=Le.actual,this.expected=Le.expected,this.operator=Le.operator,Le.message?(this.message=Le.message,this.generatedMessage=!1):(this.message=H(this),this.generatedMessage=!0);var ge=Le.stackStartFunction||Y;if(Error.captureStackTrace)Error.captureStackTrace(this,ge);else{var Ae=new Error;if(Ae.stack){var Te=Ae.stack,he=K(ge),xe=Te.indexOf('\n'+he);if(0<=xe){var Oe=Te.indexOf('\n',xe+1);Te=Te.substring(Oe+1)}this.stack=Te}}},ue.inherits(_e.AssertionError,Error),_e.fail=Y,_e.ok=J,_e.equal=function(Le,ge,Ae){Le!=ge&&Y(Le,ge,Ae,'==',_e.equal)},_e.notEqual=function(Le,ge,Ae){Le==ge&&Y(Le,ge,Ae,'!=',_e.notEqual)},_e.deepEqual=function(Le,ge,Ae){q(Le,ge,!1)||Y(Le,ge,Ae,'deepEqual',_e.deepEqual)},_e.deepStrictEqual=function(Le,ge,Ae){q(Le,ge,!0)||Y(Le,ge,Ae,'deepStrictEqual',_e.deepStrictEqual)},_e.notDeepEqual=function(Le,ge,Ae){q(Le,ge,!1)&&Y(Le,ge,Ae,'notDeepEqual',_e.notDeepEqual)},_e.notDeepStrictEqual=$,_e.strictEqual=function(Le,ge,Ae){Le!==ge&&Y(Le,ge,Ae,'===',_e.strictEqual)},_e.notStrictEqual=function(Le,ge,Ae){Le===ge&&Y(Le,ge,Ae,'!==',_e.notStrictEqual)},_e.throws=function(de,Le,ge){ae(!0,de,Le,ge)},_e.doesNotThrow=function(de,Le,ge){ae(!1,de,Le,ge)},_e.ifError=function(de){if(de)throw de};var ce=Object.keys||function(de){var Le=[];for(var ge in de)se.call(de,ge)&&Le.push(ge);return Le}}).call(O,U(22))},function(T,O,U){'use strict';const E=U(0),N=U(13),I=U(3),P=[];for(let rt=0;127>rt;rt++)P[_StringfromCharCode(rt)]=rt;T.exports.char=P;const K='5',V='3',H='4',Y='Lua '+K+'.'+V,J=Y+'.'+H,q=J+'  Copyright (C) 1994-2017 Lua.org, PUC-Rio',Q='0',$='0',te='1',ae='Fengari '+Q+'.'+$,ue=ae+'.'+te,oe='_'+K+'_'+V,_e='LUA_INIT',de={LUA_TNONE:-1,LUA_TNIL:0,LUA_TBOOLEAN:1,LUA_TLIGHTUSERDATA:2,LUA_TNUMBER:3,LUA_TSTRING:4,LUA_TTABLE:5,LUA_TFUNCTION:6,LUA_TUSERDATA:7,LUA_TTHREAD:8,LUA_NUMTAGS:9};de.LUA_TSHRSTR=0|de.LUA_TSTRING,de.LUA_TLNGSTR=16|de.LUA_TSTRING,de.LUA_TNUMFLT=0|de.LUA_TNUMBER,de.LUA_TNUMINT=16|de.LUA_TNUMBER,de.LUA_TLCL=0|de.LUA_TFUNCTION,de.LUA_TLCF=16|de.LUA_TFUNCTION,de.LUA_TCCL=32|de.LUA_TFUNCTION;const De=-N.LUAI_MAXSTACK-1e3,Ve=2,He={},je=0,ze=1,Ye=2,Je=3;T.exports.LUA_PATH_SEP=';',T.exports.LUA_PATH_MARK='?',T.exports.LUA_EXEC_DIR='!';const ut=K+'.'+V;T.exports.LUA_VDIR=ut;{T.exports.LUA_DIRSEP='/';const st='/usr/local/';T.exports.LUA_ROOT=st;const nt=st+'share/lua/'+ut+'/';T.exports.LUA_LDIR=nt;const ot=st+'lib/lua/'+ut+'/';T.exports.LUA_CDIR=ot,T.exports.LUA_PATH_DEFAULT=nt+'?.lua;'+nt+'?/init.lua;'+ot+'?.lua;'+ot+'?/init.lua;./?.lua;./?/init.lua',T.exports.LUA_CPATH_DEFAULT=ot+'?.so;'+ot+'loadall.so;./?.so'}T.exports.CT=de,T.exports.FENGARI_AUTHORS='B. Giannangeli, Daurnimator',T.exports.FENGARI_COPYRIGHT=ue+'  Copyright (C) 2017 Beno\xEEt Giannangeli\nBased on: '+q,T.exports.FENGARI_RELEASE=ue,T.exports.FENGARI_VERSION=ae,T.exports.FENGARI_VERSION_MAJOR=Q,T.exports.FENGARI_VERSION_MINOR=$,T.exports.FENGARI_VERSION_NUM=1,T.exports.FENGARI_VERSION_RELEASE=te,T.exports.LUA_AUTHORS='R. Ierusalimschy, L. H. de Figueiredo, W. Celes',T.exports.LUA_COPYRIGHT=q,T.exports.LUA_HOOKCALL=je,T.exports.LUA_HOOKCOUNT=Je,T.exports.LUA_HOOKLINE=Ye,T.exports.LUA_HOOKRET=ze,T.exports.LUA_HOOKTAILCALL=4,T.exports.LUA_INITVARVERSION=_e+oe,T.exports.LUA_INIT_VAR=_e,T.exports.LUA_MASKCALL=1<<je,T.exports.LUA_MASKCOUNT=1<<Je,T.exports.LUA_MASKLINE=1<<Ye,T.exports.LUA_MASKRET=1<<ze,T.exports.LUA_MINSTACK=20,T.exports.LUA_MULTRET=-1,T.exports.LUA_NUMTAGS=9,T.exports.LUA_OPADD=0,T.exports.LUA_OPBAND=7,T.exports.LUA_OPBNOT=13,T.exports.LUA_OPBOR=8,T.exports.LUA_OPBXOR=9,T.exports.LUA_OPDIV=5,T.exports.LUA_OPEQ=0,T.exports.LUA_OPIDIV=6,T.exports.LUA_OPLE=2,T.exports.LUA_OPLT=1,T.exports.LUA_OPMOD=3,T.exports.LUA_OPMUL=2,T.exports.LUA_OPPOW=4,T.exports.LUA_OPSHL=10,T.exports.LUA_OPSHR=11,T.exports.LUA_OPSUB=1,T.exports.LUA_OPUNM=12,T.exports.LUA_REGISTRYINDEX=De,T.exports.LUA_RELEASE=J,T.exports.LUA_RIDX_GLOBALS=Ve,T.exports.LUA_RIDX_LAST=Ve,T.exports.LUA_RIDX_MAINTHREAD=1,T.exports.LUA_SIGNATURE='\x1BLua',T.exports.LUA_VERSION=Y,T.exports.LUA_VERSION_MAJOR=K,T.exports.LUA_VERSION_MINOR=V,T.exports.LUA_VERSION_NUM=503,T.exports.LUA_VERSION_RELEASE=H,T.exports.LUA_VERSUFFIX=oe,T.exports.constant_types=de,T.exports.lua_Debug=class{constructor(){this.event=NaN,this.name=null,this.namewhat=null,this.what=null,this.source=null,this.currentline=NaN,this.linedefined=NaN,this.lastlinedefined=NaN,this.nups=NaN,this.nparams=NaN,this.isvararg=NaN,this.istailcall=NaN,this.short_src=null,this.i_ci=null}},T.exports.lua_upvalueindex=function(rt){return De-rt},T.exports.thread_status={LUA_OK:0,LUA_YIELD:1,LUA_ERRRUN:2,LUA_ERRSYNTAX:3,LUA_ERRMEM:4,LUA_ERRGCMM:5,LUA_ERRERR:6},T.exports.to_jsstring=function(rt,st,nt){E(Array.isArray(rt),'jsstring expect a array of bytes');let Lt=0,ot,_t,it,pt,ct,dt;rt=rt.slice(st?st:0,nt);for(var ft='';;){if(ot=rt[Lt++],0===ot){ft+='\0';continue}if(!ot)return ft;if(!(128&ot)){ft+=_StringfromCharCode(ot);continue}if(_t=63&rt[Lt++],192==(224&ot)){ft+=_StringfromCharCode((31&ot)<<6|_t);continue}if(it=63&rt[Lt++],224==(240&ot)?ot=(15&ot)<<12|_t<<6|it:(pt=63&rt[Lt++],240==(248&ot)?ot=(7&ot)<<18|_t<<12|it<<6|pt:(ct=63&rt[Lt++],248==(252&ot)?ot=(3&ot)<<24|_t<<18|it<<12|pt<<6|ct:(dt=63&rt[Lt++],ot=(1&ot)<<30|_t<<24|it<<18|pt<<12|ct<<6|dt))),65536>ot)ft+=_StringfromCharCode(ot);else{var At=ot-65536;ft+=_StringfromCharCode(55296|At>>10,56320|1023&At)}}return ft},T.exports.to_luastring=function(rt,st,nt){if(E('string'==typeof rt,'to_luastring expect a js string'),st){let ct=He[rt];if(Array.isArray(ct))return ct}nt=void 0===nt?I.MAX_INT:nt;let ot=[];if(!(0<nt))return 0;let _t=0,pt=nt-1;for(let ct=0,dt;ct<rt.length;++ct)if(dt=rt.charCodeAt(ct),55296<=dt&&57343>=dt&&(dt=65536+((1023&dt)<<10)|1023&rt.charCodeAt(++ct)),127>=dt){if(_t>=pt)break;ot[_t++]=dt}else if(2047>=dt){if(_t+1>=pt)break;ot[_t++]=192|dt>>6,ot[_t++]=128|63&dt}else if(65535>=dt){if(_t+2>=pt)break;ot[_t++]=224|dt>>12,ot[_t++]=128|63&dt>>6,ot[_t++]=128|63&dt}else if(2097151>=dt){if(_t+3>=pt)break;ot[_t++]=240|dt>>18,ot[_t++]=128|63&dt>>12,ot[_t++]=128|63&dt>>6,ot[_t++]=128|63&dt}else if(67108863>=dt){if(_t+4>=pt)break;ot[_t++]=248|dt>>24,ot[_t++]=128|63&dt>>18,ot[_t++]=128|63&dt>>12,ot[_t++]=128|63&dt>>6,ot[_t++]=128|63&dt}else{if(_t+5>=pt)break;ot[_t++]=252|dt>>30,ot[_t++]=128|63&dt>>24,ot[_t++]=128|63&dt>>18,ot[_t++]=128|63&dt>>12,ot[_t++]=128|63&dt>>6,ot[_t++]=128|63&dt}return st&&(He[rt]=ot),ot}},function(T,O,U){'use strict';const E=U(1),N=U(21),I=U(8),P=U(9),M=U(14);T.exports.FENGARI_AUTHORS=E.FENGARI_AUTHORS,T.exports.FENGARI_COPYRIGHT=E.FENGARI_COPYRIGHT,T.exports.FENGARI_RELEASE=E.FENGARI_RELEASE,T.exports.FENGARI_VERSION=E.FENGARI_VERSION,T.exports.FENGARI_VERSION_MAJOR=E.FENGARI_VERSION_MAJOR,T.exports.FENGARI_VERSION_MINOR=E.FENGARI_VERSION_MINOR,T.exports.FENGARI_VERSION_NUM=E.FENGARI_VERSION_NUM,T.exports.FENGARI_VERSION_RELEASE=E.FENGARI_VERSION_RELEASE,T.exports.LUA_AUTHORS=E.LUA_AUTHORS,T.exports.LUA_COPYRIGHT=E.LUA_COPYRIGHT,T.exports.LUA_ERRERR=E.thread_status.LUA_ERRERR,T.exports.LUA_ERRGCMM=E.thread_status.LUA_ERRGCMM,T.exports.LUA_ERRMEM=E.thread_status.LUA_ERRMEM,T.exports.LUA_ERRRUN=E.thread_status.LUA_ERRRUN,T.exports.LUA_ERRSYNTAX=E.thread_status.LUA_ERRSYNTAX,T.exports.LUA_HOOKCALL=E.LUA_HOOKCALL,T.exports.LUA_HOOKCOUNT=E.LUA_HOOKCOUNT,T.exports.LUA_HOOKLINE=E.LUA_HOOKLINE,T.exports.LUA_HOOKRET=E.LUA_HOOKRET,T.exports.LUA_HOOKTAILCALL=E.LUA_HOOKTAILCALL,T.exports.LUA_INITVARVERSION=E.LUA_INITVARVERSION,T.exports.LUA_INIT_VAR=E.LUA_INIT_VAR,T.exports.LUA_MASKCALL=E.LUA_MASKCALL,T.exports.LUA_MASKCOUNT=E.LUA_MASKCOUNT,T.exports.LUA_MASKLINE=E.LUA_MASKLINE,T.exports.LUA_MASKRET=E.LUA_MASKRET,T.exports.LUA_MINSTACK=E.LUA_MINSTACK,T.exports.LUA_MULTRET=E.LUA_MULTRET,T.exports.LUA_NUMTAGS=E.LUA_NUMTAGS,T.exports.LUA_OK=E.thread_status.LUA_OK,T.exports.LUA_OPADD=E.LUA_OPADD,T.exports.LUA_OPBAND=E.LUA_OPBAND,T.exports.LUA_OPBNOT=E.LUA_OPBNOT,T.exports.LUA_OPBOR=E.LUA_OPBOR,T.exports.LUA_OPBXOR=E.LUA_OPBXOR,T.exports.LUA_OPDIV=E.LUA_OPDIV,T.exports.LUA_OPEQ=E.LUA_OPEQ,T.exports.LUA_OPIDIV=E.LUA_OPIDIV,T.exports.LUA_OPLE=E.LUA_OPLE,T.exports.LUA_OPLT=E.LUA_OPLT,T.exports.LUA_OPMOD=E.LUA_OPMOD,T.exports.LUA_OPMUL=E.LUA_OPMUL,T.exports.LUA_OPPOW=E.LUA_OPPOW,T.exports.LUA_OPSHL=E.LUA_OPSHL,T.exports.LUA_OPSHR=E.LUA_OPSHR,T.exports.LUA_OPSUB=E.LUA_OPSUB,T.exports.LUA_OPUNM=E.LUA_OPUNM,T.exports.LUA_REGISTRYINDEX=E.LUA_REGISTRYINDEX,T.exports.LUA_RELEASE=E.LUA_RELEASE,T.exports.LUA_RIDX_GLOBALS=E.LUA_RIDX_GLOBALS,T.exports.LUA_RIDX_LAST=E.LUA_RIDX_LAST,T.exports.LUA_RIDX_MAINTHREAD=E.LUA_RIDX_MAINTHREAD,T.exports.LUA_SIGNATURE=E.LUA_SIGNATURE,T.exports.LUA_TNONE=E.CT.LUA_TNONE,T.exports.LUA_TNIL=E.CT.LUA_TNIL,T.exports.LUA_TBOOLEAN=E.CT.LUA_TBOOLEAN,T.exports.LUA_TLIGHTUSERDATA=E.CT.LUA_TLIGHTUSERDATA,T.exports.LUA_TNUMBER=E.CT.LUA_TNUMBER,T.exports.LUA_TSTRING=E.CT.LUA_TSTRING,T.exports.LUA_TTABLE=E.CT.LUA_TTABLE,T.exports.LUA_TFUNCTION=E.CT.LUA_TFUNCTION,T.exports.LUA_TUSERDATA=E.CT.LUA_TUSERDATA,T.exports.LUA_TTHREAD=E.CT.LUA_TTHREAD,T.exports.LUA_VERSION=E.LUA_VERSION,T.exports.LUA_VERSION_MAJOR=E.LUA_VERSION_MAJOR,T.exports.LUA_VERSION_MINOR=E.LUA_VERSION_MINOR,T.exports.LUA_VERSION_NUM=E.LUA_VERSION_NUM,T.exports.LUA_VERSION_RELEASE=E.LUA_VERSION_RELEASE,T.exports.LUA_VERSUFFIX=E.LUA_VERSUFFIX,T.exports.LUA_YIELD=E.thread_status.LUA_YIELD,T.exports.lua_Debug=E.lua_Debug,T.exports.lua_upvalueindex=E.lua_upvalueindex,T.exports.to_jsstring=E.to_jsstring,T.exports.to_luastring=E.to_luastring,T.exports.LUA_CDIR=E.LUA_CDIR,T.exports.LUA_CPATH_DEFAULT=E.LUA_CPATH_DEFAULT,T.exports.LUA_EXEC_DIR=E.LUA_EXEC_DIR,T.exports.LUA_LDIR=E.LUA_LDIR,T.exports.LUA_PATH_DEFAULT=E.LUA_PATH_DEFAULT,T.exports.LUA_PATH_MARK=E.LUA_PATH_MARK,T.exports.LUA_PATH_SEP=E.LUA_PATH_SEP,T.exports.LUA_ROOT=E.LUA_ROOT,T.exports.LUA_SHRDIR=E.LUA_SHRDIR,T.exports.LUA_VDIR=E.LUA_VDIR,T.exports.LUA_DIRSEP=E.LUA_DIRSEP,T.exports.lua_absindex=N.lua_absindex,T.exports.lua_arith=N.lua_arith,T.exports.lua_atpanic=N.lua_atpanic,T.exports.lua_atnativeerror=N.lua_atnativeerror,T.exports.lua_call=N.lua_call,T.exports.lua_callk=N.lua_callk,T.exports.lua_checkstack=N.lua_checkstack,T.exports.lua_close=M.lua_close,T.exports.lua_compare=N.lua_compare,T.exports.lua_concat=N.lua_concat,T.exports.lua_copy=N.lua_copy,T.exports.lua_createtable=N.lua_createtable,T.exports.lua_dump=N.lua_dump,T.exports.lua_error=N.lua_error,T.exports.lua_gc=N.lua_gc,T.exports.lua_getallocf=N.lua_getallocf,T.exports.lua_getextraspace=N.lua_getextraspace,T.exports.lua_getfield=N.lua_getfield,T.exports.lua_getglobal=N.lua_getglobal,T.exports.lua_gethook=I.lua_gethook,T.exports.lua_gethookcount=I.lua_gethookcount,T.exports.lua_gethookmask=I.lua_gethookmask,T.exports.lua_geti=N.lua_geti,T.exports.lua_getinfo=I.lua_getinfo,T.exports.lua_getlocal=I.lua_getlocal,T.exports.lua_getmetatable=N.lua_getmetatable,T.exports.lua_getstack=I.lua_getstack,T.exports.lua_gettable=N.lua_gettable,T.exports.lua_gettop=N.lua_gettop,T.exports.lua_getupvalue=N.lua_getupvalue,T.exports.lua_getuservalue=N.lua_getuservalue,T.exports.lua_insert=N.lua_insert,T.exports.lua_isboolean=N.lua_isboolean,T.exports.lua_iscfunction=N.lua_iscfunction,T.exports.lua_isfunction=N.lua_isfunction,T.exports.lua_isinteger=N.lua_isinteger,T.exports.lua_islightuserdata=N.lua_islightuserdata,T.exports.lua_isnil=N.lua_isnil,T.exports.lua_isnone=N.lua_isnone,T.exports.lua_isnoneornil=N.lua_isnoneornil,T.exports.lua_isnumber=N.lua_isnumber,T.exports.lua_isproxy=N.lua_isproxy,T.exports.lua_isstring=N.lua_isstring,T.exports.lua_istable=N.lua_istable,T.exports.lua_isthread=N.lua_isthread,T.exports.lua_isuserdata=N.lua_isuserdata,T.exports.lua_isyieldable=P.lua_isyieldable,T.exports.lua_len=N.lua_len,T.exports.lua_load=N.lua_load,T.exports.lua_newstate=M.lua_newstate,T.exports.lua_newtable=N.lua_newtable,T.exports.lua_newthread=M.lua_newthread,T.exports.lua_newuserdata=N.lua_newuserdata,T.exports.lua_next=N.lua_next,T.exports.lua_pcall=N.lua_pcall,T.exports.lua_pcallk=N.lua_pcallk,T.exports.lua_pop=N.lua_pop,T.exports.lua_pushboolean=N.lua_pushboolean,T.exports.lua_pushcclosure=N.lua_pushcclosure,T.exports.lua_pushcfunction=N.lua_pushcfunction,T.exports.lua_pushfstring=N.lua_pushfstring,T.exports.lua_pushglobaltable=N.lua_pushglobaltable,T.exports.lua_pushinteger=N.lua_pushinteger,T.exports.lua_pushjsclosure=N.lua_pushjsclosure,T.exports.lua_pushjsfunction=N.lua_pushjsfunction,T.exports.lua_pushlightuserdata=N.lua_pushlightuserdata,T.exports.lua_pushliteral=N.lua_pushliteral,T.exports.lua_pushlstring=N.lua_pushlstring,T.exports.lua_pushnil=N.lua_pushnil,T.exports.lua_pushnumber=N.lua_pushnumber,T.exports.lua_pushstring=N.lua_pushstring,T.exports.lua_pushthread=N.lua_pushthread,T.exports.lua_pushvalue=N.lua_pushvalue,T.exports.lua_pushvfstring=N.lua_pushvfstring,T.exports.lua_rawequal=N.lua_rawequal,T.exports.lua_rawget=N.lua_rawget,T.exports.lua_rawgeti=N.lua_rawgeti,T.exports.lua_rawgetp=N.lua_rawgetp,T.exports.lua_rawlen=N.lua_rawlen,T.exports.lua_rawset=N.lua_rawset,T.exports.lua_rawseti=N.lua_rawseti,T.exports.lua_rawsetp=N.lua_rawsetp,T.exports.lua_register=N.lua_register,T.exports.lua_remove=N.lua_remove,T.exports.lua_replace=N.lua_replace,T.exports.lua_resume=P.lua_resume,T.exports.lua_rotate=N.lua_rotate,T.exports.lua_setallof=P.lua_setallof,T.exports.lua_setfield=N.lua_setfield,T.exports.lua_setglobal=N.lua_setglobal,T.exports.lua_sethook=I.lua_sethook,T.exports.lua_seti=N.lua_seti,T.exports.lua_setlocal=I.lua_setlocal,T.exports.lua_setmetatable=N.lua_setmetatable,T.exports.lua_settable=N.lua_settable,T.exports.lua_settop=N.lua_settop,T.exports.lua_setupvalue=N.lua_setupvalue,T.exports.lua_setuservalue=N.lua_setuservalue,T.exports.lua_status=N.lua_status,T.exports.lua_stringtonumber=N.lua_stringtonumber,T.exports.lua_toboolean=N.lua_toboolean,T.exports.lua_todataview=N.lua_todataview,T.exports.lua_tointeger=N.lua_tointeger,T.exports.lua_tointegerx=N.lua_tointegerx,T.exports.lua_tojsstring=N.lua_tojsstring,T.exports.lua_toljsstring=N.lua_toljsstring,T.exports.lua_tolstring=N.lua_tolstring,T.exports.lua_tonumber=N.lua_tonumber,T.exports.lua_topointer=N.lua_topointer,T.exports.lua_toproxy=N.lua_toproxy,T.exports.lua_tostring=N.lua_tostring,T.exports.lua_tothread=N.lua_tothread,T.exports.lua_touserdata=N.lua_touserdata,T.exports.lua_type=N.lua_type,T.exports.lua_typename=N.lua_typename,T.exports.lua_upvalueid=N.lua_upvalueid,T.exports.lua_upvaluejoin=N.lua_upvaluejoin,T.exports.lua_version=N.lua_version,T.exports.lua_xmove=N.lua_xmove,T.exports.lua_yield=P.lua_yield,T.exports.lua_yieldk=P.lua_yieldk,T.exports.lua_tocfunctoin=P.lua_tocfunctoin},function(T){'use strict';T.exports.LUAI_MAXCCALLS=200,T.exports.LUA_MAXINTEGER=2147483647,T.exports.LUA_MININTEGER=-2147483648,T.exports.MAX_INT=2147483647,T.exports.MIN_INT=-2147483648},function(T,O,U){'use strict';const E=U(0),N=U(1),I=U(26),P=U(8),M=U(7),K=U(13),V=U(15),F=U(3),H=U(12),Y=N.constant_types,J=N.char,q=Y.LUA_NUMTAGS,W=Y.LUA_NUMTAGS+1;class Q{constructor(Ie,Ce){this.type=Ie,this.value=Ce}ttype(){return 63&this.type}ttnov(){return 15&this.type}checktag(Ie){return this.type===Ie}checktype(Ie){return this.ttnov()===Ie}ttisnumber(){return this.checktype(Y.LUA_TNUMBER)}ttisfloat(){return this.checktag(Y.LUA_TNUMFLT)}ttisinteger(){return this.checktag(Y.LUA_TNUMINT)}ttisnil(){return this.checktag(Y.LUA_TNIL)}ttisboolean(){return this.checktag(Y.LUA_TBOOLEAN)}ttislightuserdata(){return this.checktag(Y.LUA_TLIGHTUSERDATA)}ttisstring(){return this.checktype(Y.LUA_TSTRING)}ttisshrstring(){return this.checktag(Y.LUA_TSHRSTR)}ttislngstring(){return this.checktag(Y.LUA_TLNGSTR)}ttistable(){return this.checktag(Y.LUA_TTABLE)}ttisfunction(){return this.checktype(Y.LUA_TFUNCTION)}ttisclosure(){return(31&this.type)===Y.LUA_TFUNCTION}ttisCclosure(){return this.checktag(Y.LUA_TCCL)}ttisLclosure(){return this.checktag(Y.LUA_TLCL)}ttislcf(){return this.checktag(Y.LUA_TLCF)}ttisfulluserdata(){return this.checktag(Y.LUA_TUSERDATA)}ttisthread(){return this.checktag(Y.LUA_TTHREAD)}ttisdeadkey(){return this.checktag(W)}l_isfalse(){return this.ttisnil()||this.ttisboolean()&&!1===this.value}setfltvalue(Ie){this.type=Y.LUA_TNUMFLT,this.value=Ie}setivalue(Ie){this.type=Y.LUA_TNUMINT,this.value=Ie}setnilvalue(){this.type=Y.LUA_TNIL,this.value=void 0}setfvalue(Ie){this.type=Y.LUA_TLCF,this.value=Ie}setpvalue(Ie){this.type=Y.LUA_TLIGHTUSERDATA,this.value=Ie}setbvalue(Ie){this.type=Y.LUA_TBOOLEAN,this.value=Ie}sethvalue(Ie){this.type=Y.LUA_TTABLE,this.value=Ie}setdeadvalue(){this.type=W,this.value=null}setfrom(Ie){this.type=Ie.type,this.value=Ie.value}tsvalue(){return E(this.ttisstring()),this.value}svalue(){return this.tsvalue().getstr()}vslen(){return this.tsvalue().tsslen()}jsstring(Ie,Ce){return N.to_jsstring(this.svalue(),Ie,Ce)}}const $=new Q(Y.LUA_TNIL,null);Object.freeze($),T.exports.luaO_nilobject=$;const ue=N.to_luastring('...',!0),se=N.to_luastring('[string "'),ne=N.to_luastring('"]'),_e=function(Ie){return I.lisdigit(Ie)?Ie-J[0]:_StringfromCharCode(Ie).toLowerCase().charCodeAt(0)-J.a+10},pe=8,Le=function(Ie){let Ce=J[K.lua_getlocaledecpoint()],Pe=0,Me=0,ye=0,De=0,Be=!1,Ke;for(;I.lisspace(Ie[0]);)Ie=Ie.slice(1);if(Ke=Ie[0]===J['-'],Ie=Ke||Ie[0]===J['+']?Ie.slice(1):Ie,Ie[0]!==J[0]||Ie[1]!==J.x&&Ie[1]!==J.X)return 0;for(Ie=Ie.slice(2);;Ie=Ie.slice(1))if(Ie[0]===Ce){if(Be)break;else Be=!0;}else if(I.lisxdigit(Ie[0]))0==Me&&Ie[0]===J[0]?ye++:30>=++Me?Pe=16*Pe+_e(Ie[0]):De++,Be&&De--;else break;if(0==ye+Me)return 0;if(De*=4,Ie[0]===J.p||Ie[0]===J.P){let Ve=0,Ge;if(Ie=Ie.slice(1),Ge=Ie[0]===J['-'],Ie=Ge||Ie[0]===J['+']?Ie.slice(1):Ie,!I.lisdigit(Ie[0]))return 0;for(;I.lisdigit(Ie[0]);)Ve=10*Ve+Ie[0]-J[0],Ie=Ie.slice(1);Ge&&(Ve=-Ve),De+=Ve}return Ke&&(Pe=-Pe),0>N.to_jsstring(Ie).trim().search(/s/)?K.ldexp(Pe,De):null},ge=function(Ie,Ce){let Pe='x'===Ce?Le(Ie):parseFloat(N.to_jsstring(Ie));return isNaN(Pe)?null:Pe},Ae=function(Ie){let Ce=/[.xXnN]/g.exec(_StringfromCharCode(...Ie));Ce=Ce?Ce.index:null;let Pe=Ce?Ie[Ce]:null,Me=Pe?_StringfromCharCode(Pe).toLowerCase():0;if('n'===Me)return null;let ye=ge(Ie,Me);return null===ye,ye},Te=F.MAX_INT/10,he=F.MAX_INT%10,xe=function(Ie){let Ce=0,Pe=!0,Me;for(;I.lisspace(Ie[0]);)Ie=Ie.slice(1);if(Me=Ie[0]===J['-'],(Me||Ie[0]===J['+'])&&(Ie=Ie.slice(1)),Ie[0]===J[0]&&(Ie[1]===J.x||Ie[1]===J.X))for(Ie=Ie.slice(2);I.lisxdigit(Ie[0]);Ie=Ie.slice(1))Ce=16*Ce+_e(Ie[0]),Pe=!1;else for(;I.lisdigit(Ie[0]);Ie=Ie.slice(1)){let ye=Ie[0]-J[0];if(Ce>=Te&&(Ce>Te||ye>he+Me))return null;Ce=10*Ce+ye,Pe=!1}for(;I.lisspace(Ie[0]);)Ie=Ie.slice(1);return Pe||0<Ie.length&&0!==Ie[0]?null:0|(Me?-Ce:Ce)},Ee=function(Ie,Ce){Ie.stack[Ie.top++]=new Q(Y.LUA_TLNGSTR,M.luaS_new(Ie,Ce))},ke=function(Ie,Ce,Pe){let Me=0,ye=0,De=0,Ke;for(;Ke=Ce.indexOf(J['%'],ye),-1!=Ke;){switch(Ee(Ie,Ce.slice(ye,Ke)),Ce[Ke+1]){case J.s:let Be=Pe[De++];null===Be&&(Be=N.to_luastring('(null)',!0)),Ee(Ie,Be);break;case J.c:let Ve=Pe[De++];I.lisprint(Ve)?Ee(Ie,[Ve]):ve(Ie,N.to_luastring('<\\%d>',!0),Ve);break;case J.d:case J.I:case J.f:Ee(Ie,N.to_luastring(''+Pe[De++]));break;case J.U:Ee(Ie,N.to_luastring(String.fromCodePoint(Pe[De++])));break;case J['%']:Ee(Ie,[J['%']]);break;default:P.luaG_runerror(Ie,N.to_luastring('invalid option \'%%%c\' to \'lua_pushfstring\''),Ce[Ke+1]);}Me+=2,ye=Ke+2}return Ee(Ie,Ce.slice(ye)),0<Me&&V.luaV_concat(Ie,Me+1),Ie.stack[Ie.top-1].svalue()},ve=function(Ie,Ce,...Pe){return ke(Ie,Ce,Pe)},be=function(Ie,Ce,Pe,Me){return Ce===N.LUA_OPADD?0|Pe+Me:Ce===N.LUA_OPSUB?0|Pe-Me:Ce===N.LUA_OPMUL?0|Pe*Me:Ce===N.LUA_OPMOD?0|Pe-_Mathfloor(Pe/Me)*Me:Ce===N.LUA_OPIDIV?0|Pe/Me:Ce===N.LUA_OPBAND?Pe&Me:Ce===N.LUA_OPBOR?Pe|Me:Ce===N.LUA_OPBXOR?Pe^Me:Ce===N.LUA_OPSHL?Pe<<Me:Ce===N.LUA_OPSHR?Pe>>Me:Ce===N.LUA_OPUNM?0|0-Pe:Ce===N.LUA_OPBNOT?-1^Pe:void 0},Se=function(Ie,Ce,Pe,Me){return Ce===N.LUA_OPADD?Pe+Me:Ce===N.LUA_OPSUB?Pe-Me:Ce===N.LUA_OPMUL?Pe*Me:Ce===N.LUA_OPDIV?Pe/Me:Ce===N.LUA_OPPOW?_Mathpow(Pe,Me):Ce===N.LUA_OPIDIV?Pe/Me:Ce===N.LUA_OPUNM?-Pe:Ce===N.LUA_OPMOD?Pe%Me:void 0};T.exports.CClosure=class{constructor(Ie,Ce,Pe){for(this.id=Ie.l_G.id_counter++,this.f=Ce,this.nupvalues=Pe,this.upvalue=Array(Pe);Pe--;)this.upvalue[Pe]=new Q(Y.LUA_TNIL,null)}},T.exports.LClosure=class{constructor(Ie,Ce){this.id=Ie.l_G.id_counter++,this.p=null,this.nupvalues=Ce,this.upvals=Array(Ce)}},T.exports.LUA_TDEADKEY=W,T.exports.LUA_TPROTO=q,T.exports.LocVar=class{constructor(){this.varname=null,this.startpc=NaN,this.endpc=NaN}},T.exports.TValue=Q,T.exports.UTF8BUFFSZ=pe,T.exports.luaO_arith=function(Ie,Ce,Pe,Me,ye){switch(Ce){case N.LUA_OPBAND:case N.LUA_OPBOR:case N.LUA_OPBXOR:case N.LUA_OPSHL:case N.LUA_OPSHR:case N.LUA_OPBNOT:{let De=V.tointeger(Pe),Ke=V.tointeger(Me);if(!1!==De&&!1!==Ke)return ye.type=Y.LUA_TNUMINT,void(ye.value=be(Ie,Ce,De,Ke));break}case N.LUA_OPDIV:case N.LUA_OPPOW:{let De=V.tonumber(Pe),Ke=V.tonumber(Me);if(!1!==De&&!1!==Ke)return ye.type=Y.LUA_TNUMFLT,void(ye.value=Se(Ie,Ce,De,Ke));break}default:{let De=V.tonumber(Pe),Ke=V.tonumber(Me);if(Pe.ttisinteger()&&Me.ttisinteger())return ye.type=Y.LUA_TNUMINT,void(ye.value=be(Ie,Ce,Pe.value,Me.value));if(!1!==De&&!1!==Ke)return ye.type=Y.LUA_TNUMFLT,void(ye.value=Se(Ie,Ce,De,Ke));break}}E(null!==Ie),H.luaT_trybinTM(Ie,Pe,Me,ye,Ce-N.LUA_OPADD+H.TMS.TM_ADD)},T.exports.luaO_chunkid=function(Ie,Ce){Ie=Ie instanceof Q?Ie.value:Ie,Ce=Ce instanceof Q?Ce.value:Ce;let Pe=Ie.length,Me=[];if(Ie[0]===J['='])Me=Pe<Ce?Ie.slice(1):Me.concat(Ie.slice(1,Ce));else if(Ie[0]===J['@'])Pe<=Ce?Me=Ie.slice(1):(Ce-=ue.length,Me=ue.concat(Ie.slice(1,Pe-Ce)));else{let ye=Ie.indexOf(J['\n']),De=-1<ye?Ie.slice(ye):null;Me=se,Ce-=se.length+ue.length+ne.length+1,Pe<Ce&&null===De?Me=Me.concat(Ie):(null!==De&&(Pe=De.length-Ie.length),Pe>Ce&&(Pe=Ce),Me=Me.concat(Ie).concat(ue)),Me=Me.concat(ne)}return Me},T.exports.luaO_hexavalue=_e,T.exports.luaO_int2fb=function(Ie){let Ce=0;if(8>Ie)return Ie;for(;128<=Ie;)Ie=Ie+15>>4,Ce+=4;for(;16<=Ie;)Ie=Ie+1>>1,Ce++;return Ce+1<<3|Ie-8},T.exports.luaO_pushfstring=ve,T.exports.luaO_pushvfstring=ke,T.exports.luaO_str2num=function(Ie){let Ce=xe(Ie);return null===Ce?(Ce=Ae(Ie),null!=Ce&&new Q(Y.LUA_TNUMFLT,Ce)):new Q(Y.LUA_TNUMINT,Ce)},T.exports.luaO_utf8desc=function(Ie,Ce){let Pe=1;if(E(1114111>=Ce),128>Ce)Ie[pe-1]=Ce;else{let Me=63;do Ie[pe-Pe++]=128|63&Ce,Ce>>=6,Me>>=1;while(Ce>Me);Ie[pe-Pe]=~Me<<1|Ce}return Pe},T.exports.luaO_utf8esc=function(Ie){let Ce=[],Pe=1;if(E(1114111>=Ie),128>Ie)Ce[pe-1]=Ie;else{let Me=63;do Ce[pe-Pe++]=128|63&Ie,Ie>>=6,Me>>=1;while(Ie>Me);Ce[pe-Pe]=~Me<<1|Ie}return{buff:Ce,n:Pe}},T.exports.numarith=Se},function(T){T.exports=function(){throw new Error('define cannot be used indirect')}},function(T,O,U){'use strict';(function(E){const N=U(2),I='_LOADED',M=N.to_luastring('FILE*',!0),K=72,F=10,H=11,Y=function(ft,At,Tt){if(0===Tt||!N.lua_istable(ft,-1))return 0;for(N.lua_pushnil(ft);N.lua_next(ft,-2);){if(N.lua_type(ft,-2)===N.LUA_TSTRING){if(N.lua_rawequal(ft,At,-1))return N.lua_pop(ft,1),1;if(Y(ft,At,Tt-1))return N.lua_remove(ft,-2),N.lua_pushliteral(ft,'.'),N.lua_insert(ft,-2),N.lua_concat(ft,3),1}N.lua_pop(ft,1)}return 0},J=function(ft,At){let Tt=N.lua_gettop(ft);if(N.lua_getinfo(ft,['f'.charCodeAt(0)],At),N.lua_getfield(ft,N.LUA_REGISTRYINDEX,N.to_luastring(I,!0)),Y(ft,Tt+1,2)){let ht=N.lua_tostring(ft,-1);return N.to_jsstring(ht).startsWith('_G.')&&(N.lua_pushstring(ft,ht.slice(3)),N.lua_remove(ft,-2)),N.lua_copy(ft,-1,Tt+1),N.lua_pop(ft,2),1}return N.lua_settop(ft,Tt),0},q=function(ft,At){J(ft,At)?(N.lua_pushfstring(ft,N.to_luastring('function \'%s\''),N.lua_tostring(ft,-1)),N.lua_remove(ft,-2)):At.namewhat?N.lua_pushfstring(ft,N.to_luastring('%s \'%s\''),At.namewhat,At.name):At.what&&At.what[0]==='m'.charCodeAt(0)?N.lua_pushliteral(ft,'main chunk'):At.what&&At.what[0]!='C'.charCodeAt(0)?N.lua_pushfstring(ft,N.to_luastring('function <%s:%d>'),At.short_src,At.linedefined):N.lua_pushliteral(ft,'?')},W=function(ft){let At=new N.lua_Debug,Tt=1,ht=1;for(;N.lua_getstack(ft,ht,At);)Tt=ht,ht*=2;for(;Tt<ht;){let xt=_Mathfloor((Tt+ht)/2);N.lua_getstack(ft,xt,At)?Tt=xt+1:ht=xt}return ht-1},$=function(ft){throw new Error(`PANIC: unprotected error in call to Lua API (${N.lua_tojsstring(ft,-1)})`)},ee=function(ft,At,Tt){let ht=new N.lua_Debug;return N.lua_getstack(ft,0,ht)?(N.lua_getinfo(ft,'n',ht),ht.namewhat===N.to_luastring('method',!0)&&(At--,0===At))?ue(ft,N.to_luastring('calling \'%s\' on bad self (%s)'),ht.name,Tt):(null===ht.name&&(ht.name=J(ft,ht)?N.lua_tostring(ft,-1):['?'.charCodeAt(0)]),ue(ft,N.to_luastring('bad argument #%d to \'%s\' (%s)'),At,ht.name,Tt)):ue(ft,N.to_luastring('bad argument #%d (%s)'),At,Tt)},te=function(ft,At,Tt){let ht=qe(ft,At,N.to_luastring('__name',!0))===N.LUA_TSTRING?N.lua_tostring(ft,-1):N.lua_type(ft,At)===N.LUA_TLIGHTUSERDATA?N.to_luastring('light userdata',!0):Te(ft,At),xt=N.lua_pushfstring(ft,N.to_luastring('%s expected, got %s'),Tt,ht);return ee(ft,At,xt)},ae=function(ft,At){let Tt=new N.lua_Debug;return N.lua_getstack(ft,At,Tt)&&(N.lua_getinfo(ft,N.to_luastring('Sl',!0),Tt),0<Tt.currentline)?void N.lua_pushfstring(ft,N.to_luastring('%s:%d: '),Tt.short_src,Tt.currentline):void N.lua_pushstring(ft,[])},ue=function(ft,At,...Tt){return ae(ft,1),N.lua_pushvfstring(ft,At,Tt),N.lua_concat(ft,2),N.lua_error(ft)},se=function(ft,At,Tt,ht){return At?(N.lua_pushboolean(ft,1),1):(N.lua_pushnil(ft),Tt?N.lua_pushstring(ft,N.to_luastring(`${N.to_jsstring(Tt)}: ${ht.message}`)):N.lua_pushstring(ft,N.to_luastring(ht.message)),N.lua_pushinteger(ft,-ht.errno),3)},oe=function(ft,At){return N.lua_getfield(ft,N.LUA_REGISTRYINDEX,At)},ce=function(ft,At,Tt){let ht=N.lua_touserdata(ft,At);return null!==ht&&N.lua_getmetatable(ft,At)?(oe(ft,Tt),N.lua_rawequal(ft,-1,-2)||(ht=null),N.lua_pop(ft,2),ht):null},ge=function(ft,At,Tt){te(ft,At,N.lua_typename(ft,Tt))},Te=function(ft,At){return N.lua_typename(ft,N.lua_type(ft,At))},Ue=function(ft,At){return Ee(ft,At,null)},Ee=function(ft,At){let Tt=N.lua_tolstring(ft,At);return(null===Tt||void 0===Tt)&&ge(ft,At,N.LUA_TSTRING),Tt},ke=function(ft,At,Tt){return 0>=N.lua_type(ft,At)?Tt:Ee(ft,At)},ve=ke,Re=function(ft,At){N.lua_isnumber(ft,At)?ee(ft,At,N.to_luastring('number has no integer representation',!0)):ge(ft,At,N.LUA_TNUMBER)},be=function(ft,At){let Tt=N.lua_tonumber(ft,At);return!1===Tt&&ge(ft,At,N.LUA_TNUMBER),Tt},Ne=function(ft,At){let Tt=N.lua_tointeger(ft,At);return!1===Tt&&Re(ft,At),Tt},Ce=function(ft){return ft},Pe=function(ft,At){At.L=ft,At.b=[]},Ke=function(ft,At,Tt){ft.b=ft.b.concat(At.slice(0,Tt))},Be=Ke,Ve=function(ft){let At=ft.L;N.lua_pushstring(At,ft.b)},we=function(ft,At){ft.n+=At},Xe=function(ft,At,Tt,ht){return 0>=N.lua_type(ft,Tt)?ht:At(ft,Tt)},je=function(ft,At){let Tt=At.string;return At.string=null,Tt},ze=function(ft,At,Tt,ht,xt){return N.lua_load(ft,je,{string:At},ht,xt)},Ye=function(ft,At,Tt,ht){return ze(ft,At,Tt,ht,null)},Je=function(ft,At){return Ye(ft,At,At.length,At)},qe=function(ft,At,Tt){if(!N.lua_getmetatable(ft,At))return N.LUA_TNIL;N.lua_pushstring(ft,Tt);let ht=N.lua_rawget(ft,-2);return ht===N.LUA_TNIL&&N.lua_pop(ft,2),ht},We=function(ft,At,Tt){return(At=N.lua_absindex(ft,At),qe(ft,At,Tt)!==N.LUA_TNIL)&&(N.lua_pushvalue(ft,At),N.lua_call(ft,1,1),!0)},at=function(ft,At,Tt){var ht=Tt>>>0,xt=At.length,Ot=ft.length+1-xt;loop:for(;ht<Ot;ht++){for(let Ut=0;Ut<xt;Ut++)if(ft[ht+Ut]!==At[Ut])continue loop;return ht}return-1},ut=function(ft,At,Tt){return N.lua_getfield(ft,At,Tt)===N.LUA_TTABLE||(N.lua_pop(ft,1),At=N.lua_absindex(ft,At),N.lua_newtable(ft),N.lua_pushvalue(ft,-1),N.lua_setfield(ft,At,Tt),!1)},rt=function(ft,At,Tt){for(let ht in st(ft,Tt,N.to_luastring('too many upvalues',!0)),At){for(let xt=0;xt<Tt;xt++)N.lua_pushvalue(ft,-Tt);N.lua_pushcclosure(ft,At[ht],Tt),N.lua_setfield(ft,-(Tt+2),N.to_luastring(ht))}N.lua_pop(ft,Tt)},st=function(ft,At,Tt){N.lua_checkstack(ft,At)||(Tt?ue(ft,N.to_luastring('stack overflow (%s)'),Tt):ue(ft,N.to_luastring('stack overflow',!0)))},it=-1;T.exports.LUA_FILEHANDLE=M,T.exports.LUA_LOADED_TABLE=I,T.exports.LUA_NOREF=-2,T.exports.LUA_PRELOAD_TABLE='_PRELOAD',T.exports.LUA_REFNIL=it,T.exports.luaL_Buffer=class{constructor(){this.b=null,this.L=null}},T.exports.luaL_addchar=function(ft,At){ft.b.push(At)},T.exports.luaL_addlstring=Ke,T.exports.luaL_addsize=we,T.exports.luaL_addstring=Be,T.exports.luaL_addvalue=function(ft){let At=ft.L,Tt=N.lua_tostring(At,-1);Be(ft,Tt),N.lua_remove(At,-1)},T.exports.luaL_argcheck=function(ft,At,Tt,ht){At||ee(ft,Tt,ht)},T.exports.luaL_argerror=ee,T.exports.luaL_buffinit=Pe,T.exports.luaL_buffinitsize=function(ft,At){return Pe(ft,At),At},T.exports.luaL_callmeta=We,T.exports.luaL_checkany=function(ft,At){N.lua_type(ft,At)===N.LUA_TNONE&&ee(ft,At,N.to_luastring('value expected',!0))},T.exports.luaL_checkinteger=Ne,T.exports.luaL_checklstring=Ee,T.exports.luaL_checknumber=be,T.exports.luaL_checkoption=function(ft,At,Tt,ht){let xt=Tt?ve(ft,At,Tt):Ue(ft,At);for(let Ot=0;ht[Ot];Ot++)if(ht[Ot].join('|')===xt.join('|'))return Ot;return ee(ft,At,N.lua_pushfstring(ft,N.to_luastring('invalid option \'%s\''),xt))},T.exports.luaL_checkstack=st,T.exports.luaL_checkstring=Ue,T.exports.luaL_checktype=function(ft,At,Tt){N.lua_type(ft,At)!==Tt&&ge(ft,At,Tt)},T.exports.luaL_checkudata=function(ft,At,Tt){let ht=ce(ft,At,Tt);return null===ht&&te(ft,At,Tt),ht},T.exports.luaL_checkversion=function(ft){let At=N.LUA_VERSION_NUM,ht=N.lua_version(ft);K!=K,ht==N.lua_version(null)?ht!==At&&ue(ft,N.to_luastring('version mismatch: app. needs %f, Lua core provides %f'),At,ht):ue(ft,N.to_luastring('multiple Lua VMs detected'))},T.exports.luaL_dostring=function(ft,At){return Je(ft,At)||N.lua_pcall(ft,0,N.LUA_MULTRET,0)},T.exports.luaL_error=ue,T.exports.luaL_execresult=function(ft,At){let Tt,ht;if(null===At)return N.lua_pushboolean(ft,1),N.lua_pushliteral(ft,'exit'),N.lua_pushinteger(ft,0),3;if(At.status)Tt='exit',ht=At.status;else if(At.signal)Tt='signal',ht=At.signal;else return se(ft,0,null,At);return N.lua_pushnil(ft),N.lua_pushliteral(ft,Tt),N.lua_pushinteger(ft,ht),3},T.exports.luaL_fileresult=se,T.exports.luaL_getmetafield=qe,T.exports.luaL_getmetatable=oe,T.exports.luaL_getsubtable=ut,T.exports.luaL_gsub=function(ft,At,Tt,ht){let Ot=[],xt;for(;0<=(xt=at(At,Tt));)Ot.push(...At.slice(0,xt)),Ot.push(...ht),At=At.slice(xt+Tt.length);return Ot.push(...At),N.lua_pushstring(ft,Ot),N.lua_tostring(ft,-1)},T.exports.luaL_len=function(ft,At){N.lua_len(ft,At);let Tt=N.lua_tointegerx(ft,-1);return!1===Tt&&ue(ft,N.to_luastring('object length is not an integer',!0)),N.lua_pop(ft,1),Tt},T.exports.luaL_loadbuffer=Ye,T.exports.luaL_loadbufferx=ze,T.exports.luaL_loadstring=Je,T.exports.luaL_newlib=function(ft,At){N.lua_createtable(ft),rt(ft,At,0)},T.exports.luaL_newlibtable=function(ft){N.lua_createtable(ft)},T.exports.luaL_newmetatable=function(ft,At){return oe(ft,At)===N.LUA_TNIL?(N.lua_pop(ft,1),N.lua_createtable(ft,0,2),N.lua_pushstring(ft,At),N.lua_setfield(ft,-2,N.to_luastring('__name')),N.lua_pushvalue(ft,-1),N.lua_setfield(ft,N.LUA_REGISTRYINDEX,At),1):0},T.exports.luaL_newstate=function(){let ft=N.lua_newstate();return ft&&N.lua_atpanic(ft,$),ft},T.exports.luaL_opt=Xe,T.exports.luaL_optinteger=function(ft,At,Tt){return Xe(ft,Ne,At,Tt)},T.exports.luaL_optlstring=ke,T.exports.luaL_optnumber=function(ft,At,Tt){return Xe(ft,be,At,Tt)},T.exports.luaL_optstring=ve,T.exports.luaL_prepbuffer=function(ft){return Ce(ft,8192)},T.exports.luaL_prepbuffsize=Ce,T.exports.luaL_pushresult=Ve,T.exports.luaL_pushresultsize=function(ft,At){we(ft,At),Ve(ft)},T.exports.luaL_ref=function(ft,At){let Tt;return N.lua_isnil(ft,-1)?(N.lua_pop(ft,1),it):(At=N.lua_absindex(ft,At),N.lua_rawgeti(ft,At,0),Tt=N.lua_tointeger(ft,-1),N.lua_pop(ft,1),0===Tt?Tt=N.lua_rawlen(ft,At)+1:(N.lua_rawgeti(ft,At,Tt),N.lua_rawseti(ft,At,0)),N.lua_rawseti(ft,At,Tt),Tt)},T.exports.luaL_requiref=function(ft,At,Tt,ht){ut(ft,N.LUA_REGISTRYINDEX,N.to_luastring(I)),N.lua_getfield(ft,-1,At),N.lua_toboolean(ft,-1)||(N.lua_pop(ft,1),N.lua_pushcfunction(ft,Tt),N.lua_pushstring(ft,At),N.lua_call(ft,1,1),N.lua_pushvalue(ft,-1),N.lua_setfield(ft,-3,At)),N.lua_remove(ft,-2),ht&&(N.lua_pushvalue(ft,-1),N.lua_setglobal(ft,At))},T.exports.luaL_setfuncs=rt,T.exports.luaL_setmetatable=function(ft,At){oe(ft,At),N.lua_setmetatable(ft,-2)},T.exports.luaL_testudata=ce,T.exports.luaL_tolstring=function(ft,At){if(We(ft,At,N.to_luastring('__tostring',!0)))N.lua_isstring(ft,-1)||ue(ft,N.to_luastring('\'__tostring\' must return a string',!0));else{let Tt=N.lua_type(ft,At);switch(Tt){case N.LUA_TNUMBER:{if(N.lua_isinteger(ft,At))N.lua_pushstring(ft,N.to_luastring(N.lua_tointeger(ft,At).toString()));else{let Et=N.lua_tonumber(ft,At),kt=_Mathabs(Et),vt;vt=Object.is(Et,Infinity)?'inf':Object.is(Et,-Infinity)?'-inf':_NumberisNaN(Et)?'nan':1e14<=kt||0<kt&&1e-4>kt?Et.toExponential():Et.toPrecision(16).replace(/(\.[0-9][1-9]*)0+$/,'$1'),N.lua_pushstring(ft,N.to_luastring(vt))}break}case N.LUA_TSTRING:N.lua_pushvalue(ft,At);break;case N.LUA_TBOOLEAN:N.lua_pushliteral(ft,N.lua_toboolean(ft,At)?'true':'false');break;case N.LUA_TNIL:N.lua_pushliteral(ft,'nil');break;default:let ht=qe(ft,At,N.to_luastring('__name',!0)),xt=ht===N.LUA_TSTRING?N.lua_tostring(ft,-1):Te(ft,At),Ot=N.lua_topointer(ft,At),Ut;switch(Tt){case N.LUA_TLIGHTUSERDATA:Ut='<id NYI>';break;case N.LUA_TFUNCTION:if('function'==typeof Ot){Ut='<id NYI>';break}case N.LUA_TTABLE:case N.LUA_TTHREAD:case N.LUA_TUSERDATA:Ut=`0x${Ot.id.toString(16)}`;break;default:throw Error('unhandled type: '+Tt);}N.lua_pushstring(ft,N.to_luastring(`${N.to_jsstring(xt)}: ${Ut}`)),ht!==N.LUA_TNIL&&N.lua_remove(ft,-2);}}return N.lua_tolstring(ft,-1)},T.exports.luaL_traceback=function(ft,At,Tt,ht){let xt=new N.lua_Debug,Ot=N.lua_gettop(ft),Ut=W(At),Et=Ut-ht>F+H?F:-1;for(Tt&&N.lua_pushstring(ft,Tt.concat('\n'.charCodeAt(0))),st(ft,10,null),N.lua_pushliteral(ft,'stack traceback:');N.lua_getstack(At,ht++,xt);)0==Et--?(N.lua_pushliteral(ft,'\n\t...'),ht=Ut-H+1):(N.lua_getinfo(At,N.to_luastring('Slnt',!0),xt),N.lua_pushstring(ft,['\n'.charCodeAt(0),'\t'.charCodeAt(0)].concat(xt.short_src).concat([':'.charCodeAt(0)])),0<xt.currentline&&N.lua_pushliteral(ft,`${xt.currentline}:`),N.lua_pushliteral(ft,' in '),q(ft,xt),xt.istailcall&&N.lua_pushliteral(ft,'\n\t(...tail calls..)'),N.lua_concat(ft,N.lua_gettop(ft)-Ot));N.lua_concat(ft,N.lua_gettop(ft)-Ot)},T.exports.luaL_typename=Te,T.exports.luaL_unref=function(ft,At,Tt){0<=Tt&&(At=N.lua_absindex(ft,At),N.lua_rawgeti(ft,At,0),N.lua_rawseti(ft,At,Tt),N.lua_pushinteger(ft,Tt),N.lua_rawseti(ft,At,0))},T.exports.luaL_where=ae,T.exports.lua_writestringerror=function(ft){E.stderr?E.stderr.write(ft):console.error(ft)}}).call(O,U(19))},function(T,O,U){'use strict';const E=U(0),N=U(1);class I{constructor(Y,J){this.hash=null,this.realstring=J}getstr(){return this.realstring}tsslen(){return this.realstring.length}}const M=function(Y){return E(Array.isArray(Y)),Y.map((J)=>`${J}|`).join('')},V=function(Y,J){return new I(Y,J)};T.exports.luaS_eqlngstr=function(Y,J){return E(Y instanceof I),E(J instanceof I),Y==J||Y.realstring.length==J.realstring.length&&Y.realstring.join()==J.realstring.join()},T.exports.luaS_hash=M,T.exports.luaS_hashlongstr=function(Y){return E(Y instanceof I),null===Y.hash&&(Y.hash=M(Y.getstr())),Y.hash},T.exports.luaS_bless=V,T.exports.luaS_new=function(Y,J){return V(Y,J.slice(0))},T.exports.luaS_newliteral=function(Y,J){return V(Y,N.to_luastring(J))},T.exports.TString=I},function(T,O,U){'use strict';const E=U(0),N=U(1),I=U(9),P=U(11),M=U(4),K=U(18),V=U(14),F=U(10),H=U(12),Y=U(13),J=U(15),q=N.constant_types,W=N.thread_status,Q=function(Be){return E(Be.callstatus&V.CIST_LUA),Be.l_savedpc-1},$=function(Be){return Be.func.value.p.lineinfo?Be.func.value.p.lineinfo[Q(Be)]:-1},ee=function(Be){if(Be.status===W.LUA_YIELD){let Ve=Be.ci,Ge=Ve.funcOff;Ve.func=Be.stack[Ve.extra],Ve.funcOff=Ve.extra,Ve.extra=Ge}},oe=function(Be,Ve){E(Ve<Be.upvalues.length);let Ge=Be.upvalues[Ve].name;return null===Ge?['?'.charCodeAt(0)]:Ge.getstr()},_e=function(Be,Ve){let Ge=Be.func.value.p.numparams;return Ve>=Be.l_base-Be.funcOff-Ge?null:{pos:Be.funcOff+Ge+Ve,name:N.to_luastring('(*vararg)',!0)}},pe=function(Be,Ve,Ge){let Fe=null,we;if(Ve.callstatus&V.CIST_LUA){if(0>Ge)return _e(Ve,-Ge);we=Ve.l_base,Fe=P.luaF_getlocalname(Ve.func.value.p,Ge,Q(Ve))}else we=Ve.funcOff+1;if(null===Fe){let He=Ve===Be.ci?Be.top:Ve.next.func;if(He-we>=Ge&&0<Ge)Fe=N.to_luastring('(*temporary)',!0);else return null}return{pos:we+(Ge-1),name:Fe}},Le=function(Be,Ve){if(null===Ve||Ve instanceof M.CClosure)Be.source=N.to_luastring('=[JS]',!0),Be.linedefined=-1,Be.lastlinedefined=-1,Be.what='J';else{let Ge=Ve.p;Be.source=Ge.source?Ge.source.getstr():N.to_luastring('=?',!0),Be.linedefined=Ge.linedefined,Be.lastlinedefined=Ge.lastlinedefined,Be.what=0===Be.linedefined?N.to_luastring('main',!0):N.to_luastring('Lua',!0)}Be.short_src=M.luaO_chunkid(Be.source,Y.LUA_IDSIZE)},ge=function(Be,Ve){if(null===Ve||Ve instanceof M.CClosure)Be.stack[Be.top++]=new M.TValue(q.LUA_TNIL,null),E(Be.top<=Be.ci.top,'stack overflow');else{let Ge=Ve.l.p.lineinfo,we=F.luaH_new(Be);Be.stack[Be.top++]=new M.TValue(q.LUA_TTABLE,we),E(Be.top<=Be.ci.top,'stack overflow');let Fe=new M.TValue(q.LUA_TBOOLEAN,!0);for(let He=0;He<Ve.l.p.length;He++)F.luaH_setint(we,Ge[He],Fe)}},Ae=function(Be,Ve){let Ge={name:null,funcname:null};return null===Ve?null:Ve.callstatus&V.CIST_FIN?(Ge.name=N.to_luastring('__gc',!0),Ge.funcname=N.to_luastring('metamethod',!0),Ge):!(Ve.callstatus&V.CIST_TAIL)&&Ve.previous.callstatus&V.CIST_LUA?ke(Be,Ve.previous):null},Te=function(Be,Ve,Ge,we,Fe){let He=1;for(;0<Ve.length;Ve=Ve.slice(1))switch(_StringfromCharCode(Ve[0])){case'S':{Le(Ge,we);break}case'l':{Ge.currentline=Fe&&Fe.callstatus&V.CIST_LUA?$(Fe):-1;break}case'u':{Ge.nups=null===we?0:we.nupvalues,null===we||we instanceof M.CClosure?(Ge.isvararg=!0,Ge.nparams=0):(Ge.isvararg=we.p.is_vararg,Ge.nparams=we.p.numparams);break}case't':{Ge.istailcall=Fe?Fe.callstatus&V.CIST_TAIL:0;break}case'n':{let Xe=Ae(Be,Fe);null===Xe?(Ge.namewhat=null,Ge.name=null):(Ge.namewhat=Xe.funcname,Ge.name=Xe.name);break}case'L':case'f':break;default:He=0;}return He},xe=function(Be,Ve,Ge){let we={name:null,funcname:null};if(K.ISK(Ge)){let Fe=Be.k[K.INDEXK(Ge)];if(Fe.ttisstring())return we.name=Fe.svalue(),we}else{let Fe=Ee(Be,Ve,Ge);if(Fe&&Fe.funcname[0]==='c'.charCodeAt(0))return Fe}return we.name=[N.char['?']],we},Oe=function(Be,Ve){return Be<Ve?-1:Be},Ue=function(Be,Ve,Ge){let we=-1,Fe=0;for(let He=0;He<Ve;He++){let Xe=Be.code[He],je=K.OpCodes[Xe.opcode],ze=Xe.A;switch(je){case'OP_LOADNIL':{let Ye=Xe.B;ze<=Ge&&Ge<=ze+Ye&&(we=Oe(He,Fe));break}case'OP_TFORCALL':{Ge>=ze+2&&(we=Oe(He,Fe));break}case'OP_CALL':case'OP_TAILCALL':{Ge>=ze&&(we=Oe(He,Fe));break}case'OP_JMP':{let Ye=Xe.sBx,Je=He+1+Ye;He<Je&&Je<=Ve&&Je>Fe&&(Fe=Je);break}default:K.testAMode(Xe.opcode)&&Ge===ze&&(we=Oe(He,Fe));}}return we},Ee=function(Be,Ve,Ge){let we={name:P.luaF_getlocalname(Be,Ge+1,Ve),funcname:null};if(we.name)return we.funcname=N.to_luastring('local',!0),we;let Fe=Ue(Be,Ve,Ge);if(-1!==Fe){let He=Be.code[Fe],Xe=K.OpCodes[He.opcode];switch(Xe){case'OP_MOVE':{let je=He.B;if(je<He.A)return Ee(Be,Fe,je);break}case'OP_GETTABUP':case'OP_GETTABLE':{let je=He.C,ze=He.B,Ye='OP_GETTABLE'===Xe?P.luaF_getlocalname(Be,ze+1,Fe):oe(Be,ze);return we.name=xe(Be,Fe,je).name,we.funcname=Ye&&'_ENV'===Ye?N.to_luastring('global',!0):N.to_luastring('field',!0),we}case'OP_GETUPVAL':return we.name=oe(Be,He.B),we.funcname=N.to_luastring('upvalue',!0),we;case'OP_LOADK':case'OP_LOADKX':{let je='OP_LOADK'===Xe?He.Bx:Be.code[Fe+1].Ax;if(Be.k[je].ttisstring())return we.name=Be.k[je].tsvalue(),we.funcname=N.to_luastring('constant',!0),we;break}case'OP_SELF':{let je=He.C;return we.name=xe(Be,Fe,je).name,we.funcname=N.to_luastring('method',!0),we}default:}}return null},ke=function(Be,Ve){let Ge={name:null,funcname:null},we=0,Fe=Ve.func.value.p,He=Q(Ve),Xe=Fe.code[He];if(Ve.callstatus&V.CIST_HOOKED)return Ge.name=[N.char['?']],Ge.funcname=N.to_luastring('hook',!0),Ge;switch(K.OpCodes[Xe.opcode]){case'OP_CALL':case'OP_TAILCALL':return Ee(Fe,He,Xe.A);case'OP_TFORCALL':return Ge.name=N.to_luastring('for iterator',!0),Ge.funcname=N.to_luastring('for iterator',!0),Ge;case'OP_SELF':case'OP_GETTABUP':case'OP_GETTABLE':we=H.TMS.TM_INDEX;break;case'OP_SETTABUP':case'OP_SETTABLE':we=H.TMS.TM_NEWINDEX;break;case'OP_ADD':we=H.TMS.OP_ADD;break;case'OP_SUB':we=H.TMS.OP_SUB;break;case'OP_MUL':we=H.TMS.OP_MUL;break;case'OP_MOD':we=H.TMS.OP_MOD;break;case'OP_POW':we=H.TMS.OP_POW;break;case'OP_DIV':we=H.TMS.OP_DIV;break;case'OP_IDIV':we=H.TMS.OP_IDI;break;case'OP_BAND':we=H.TMS.OP_BAN;break;case'OP_BOR':we=H.TMS.OP_BOR;break;case'OP_BXOR':we=H.TMS.OP_BXO;break;case'OP_SHL':we=H.TMS.OP_SHL;break;case'OP_SHR':we=H.TMS.OP_SHR;break;case'OP_UNM':we=H.TMS.TM_UNM;break;case'OP_BNOT':we=H.TMS.TM_BNOT;break;case'OP_LEN':we=H.TMS.TM_LEN;break;case'OP_CONCAT':we=H.TMS.TM_CONCAT;break;case'OP_EQ':we=H.TMS.TM_EQ;break;case'OP_LT':we=H.TMS.TM_LT;break;case'OP_LE':we=H.TMS.TM_LE;break;default:return null;}return Ge.name=Be.l_G.tmname[we].getstr(),Ge.funcname=N.to_luastring('metamethod',!0),Ge},ve=function(Be,Ve,Ge){for(let we=Ve.l_base;we<Ve.top;we++)if(Be.stack[we]===Ge)return we;return!1},Re=function(Be,Ve,Ge){let we=Ve.func;for(let Fe=0;Fe<we.nupvalues;Fe++)if(we.upvals[Fe].val()===Ge)return{name:oe(we.p,Fe),funcname:N.to_luastring('upvalue',!0)};return null},be=function(Be,Ve){let Ge=Be.ci,we=null;if(Ge.callstatus&V.CIST_LUA){we=Re(Be,Ge,Ve);let Fe=ve(Be,Ge,Ve);!we&&Fe&&(we=Ee(Ge.func.value.p,Q(Ge),Fe-Ge.l_base))}return we?M.luaO_pushfstring(Be,N.to_luastring(' (%s \'%s\')',!0),we.funcname,we.name):N.to_luastring('',!0)},Se=function(Be,Ve,Ge){let we=H.luaT_objtypename(Be,Ve);Me(Be,N.to_luastring(`attempt to ${N.to_jsstring(Ge)} a ${N.to_jsstring(we)} value${N.to_jsstring(be(Be,Ve))}`))},Pe=function(Be,Ve,Ge,we){let Fe;return Fe=Ge?M.luaO_chunkid(Ge.getstr(),Y.LUA_IDSIZE):['?'.charCodeAt(0)],M.luaO_pushfstring(Be,N.to_luastring('%s:%d: %s',!0),Fe,we,Ve)},Me=function(Be,Ve,...Ge){let we=Be.ci,Fe=M.luaO_pushvfstring(Be,Ve,Ge);we.callstatus&V.CIST_LUA&&Pe(Be,Fe,we.func.value.p.source,$(we)),ye(Be)},ye=function(Be){if(0!==Be.errfunc){let Ve=Be.errfunc;Be.stack[Be.top]=Be.stack[Be.top-1],Be.stack[Be.top-1]=Be.stack[Ve],Be.top++,I.luaD_callnoyield(Be,Be.top-2,1)}I.luaD_throw(Be,W.LUA_ERRRUN)};T.exports.luaG_addinfo=Pe,T.exports.luaG_concaterror=function(Be,Ve,Ge){(Ve.ttisstring()||Ve.ttisnumber())&&(Ve=Ge),Se(Be,Ve,N.to_luastring('concatenate',!0))},T.exports.luaG_errormsg=ye,T.exports.luaG_opinterror=function(Be,Ve,Ge,we){!1===J.tonumber(Ve)&&(Ge=Ve),Se(Be,Ge,we)},T.exports.luaG_ordererror=function(Be,Ve,Ge){let we=H.luaT_objtypename(Be,Ve),Fe=H.luaT_objtypename(Be,Ge);we.join()===Fe.join()?Me(Be,N.to_luastring(`attempt to compare two ${N.to_jsstring(we)} values`)):Me(Be,N.to_luastring(`attempt to compare ${N.to_jsstring(we)} with ${N.to_jsstring(Fe)}`))},T.exports.luaG_runerror=Me,T.exports.luaG_tointerror=function(Be,Ve,Ge){let we=J.tointeger(Ve);!1===we&&(Ge=Ve),Me(Be,N.to_luastring(`number${N.to_jsstring(be(Be,Ge))} has no integer representation`))},T.exports.luaG_traceexec=function(Be){let Ve=Be.ci,Ge=Be.hookmask,we=0==--Be.hookcount&&Ge&N.LUA_MASKCOUNT;if(we)Be.hookcount=Be.basehookcount;else if(!(Ge&N.LUA_MASKLINE))return;if(Ve.callstatus&V.CIST_HOOKYIELD)return void(Ve.callstatus&=~V.CIST_HOOKYIELD);if(we&&I.luaD_hook(Be,N.LUA_HOOKCOUNT,-1),Ge&N.LUA_MASKLINE){let Fe=Ve.func.value.p,He=Ve.l_savedpc,Xe=Fe.lineinfo?Fe.lineinfo[He]:-1;(0===He||Ve.l_savedpc<=Be.oldpc||Xe!==Fe.lineinfo?Fe.lineinfo[Be.oldpc]:-1)&&I.luaD_hook(Be,N.LUA_HOOKLINE,Xe)}Be.oldpc=Ve.l_savedpc,Be.status===W.LUA_YIELD&&(we&&(Be.hookcount=1),Ve.l_savedpc--,Ve.callstatus|=V.CIST_HOOKYIELD,Ve.func=Be.top-1,I.luaD_throw(Be,W.LUA_YIELD))},T.exports.luaG_typeerror=Se,T.exports.lua_gethook=function(Be){return Be.hook},T.exports.lua_gethookcount=function(Be){return Be.basehookcount},T.exports.lua_gethookmask=function(Be){return Be.hookmask},T.exports.lua_getinfo=function(Be,Ve,Ge){let we,Fe,He,Xe,je;return ee(Be),Ve[0]==='>'.charCodeAt(0)?(He=null,je=Be.top-1,Xe=Be.stack[je],E(Be,Xe.ttisfunction(),'function expected'),Ve=Ve.slice(1),Be.top--):(He=Ge.i_ci,Xe=He.func,je=He.funcOff,E(He.func.ttisfunction())),Fe=Xe.ttisclosure()?Xe.value:null,we=Te(Be,Ve,Ge,Fe,He),0<=Ve.indexOf('f'.charCodeAt(0))&&(Be.stack[Be.top++]=Xe,E(Be.top<=Be.ci.top,'stack overflow')),ee(Be),0<=Ve.indexOf('L'.charCodeAt(0))&&ge(Be,Fe),we},T.exports.lua_getlocal=function(Be,Ve,Ge){let we;if(ee(Be),null===Ve)we=Be.stack[Be.top-1].ttisLclosure()?P.luaF_getlocalname(Be.stack[Be.top-1].value.p,Ge,0):null;else{let Fe=pe(Be,Ve.i_ci,Ge);Fe?(we=Fe.name,Be.stack[Be.top++]=Be.stack[Fe.pos]):we=null}return ee(Be),we},T.exports.lua_getstack=function(Be,Ve,Ge){let we,Fe;if(0>Ve)return 0;for(we=Be.ci;0<Ve&&we!==Be.base_ci;we=we.previous)Ve--;return 0===Ve&&we!==Be.base_ci?(Fe=1,Ge.i_ci=we):Fe=0,Fe},T.exports.lua_sethook=function(Be,Ve,Ge,we){(null===Ve||0===Ge)&&(Ge=0,Ve=null),Be.ci.callstatus&V.CIST_LUA&&(Be.oldpc=Be.ci.l_savedpc),Be.hook=Ve,Be.basehookcount=we,Be.hookcount=Be.basehookcount,Be.hookmask=Ge},T.exports.lua_setlocal=function(Be,Ve,Ge){ee(Be);let we=pe(Be,Ve.i_ci,Ge),Fe=we.name,He=we.pos;return Fe&&(Be.stack[He]=Be.stack[Be.top-1],delete Be.stack[--Be.top]),ee(Be),Fe}},function(T,O,U){'use strict';const E=U(0),N=U(1),I=U(21),P=U(8),M=U(11),K=U(3),V=U(4),F=U(31),H=U(14),Y=U(7),J=U(12),q=U(44),W=U(15),Q=U(20),$=N.constant_types,ee=N.thread_status,te=function(Pe,Me,ye){switch(Me){case ee.LUA_ERRMEM:{Pe.stack[ye]=new V.TValue($.LUA_TLNGSTR,Y.luaS_newliteral(Pe,'not enough memory'));break}case ee.LUA_ERRERR:{Pe.stack[ye]=new V.TValue($.LUA_TLNGSTR,Y.luaS_newliteral(Pe,'error in error handling'));break}default:Pe.stack[ye]=Pe.stack[Pe.top-1];}Pe.top=ye+1},ae=function(Pe,Me,ye){let De=Pe.stack[Me];switch(De.type){case $.LUA_TCCL:case $.LUA_TLCF:{let Ke=De.type===$.LUA_TCCL?De.value.f:De.value,Be=H.luaE_extendCI(Pe);Be.funcOff=Me,Be.nresults=ye,Be.func=De,Be.top=Pe.top+N.LUA_MINSTACK,Be.callstatus=0,Pe.hookmask&N.LUA_MASKCALL&&ne(Pe,N.LUA_HOOKCALL,-1);let Ve=Ke(Pe);return E('number'==typeof Ve&&0<=Ve&&(0|Ve)===Ve,'invalid return value from JS function (expected integer)'),E(Ve<Pe.top-Pe.ci.funcOff,'not enough elements in the stack'),ue(Pe,Be,Pe.top-Ve,Ve),!0}case $.LUA_TLCL:{let Ke=De.value.p,Be=Pe.top-Me-1,Ve=Ke.maxstacksize,Ge;if(Ke.is_vararg)Ge=oe(Pe,Ke,Be);else{for(;Be<Ke.numparams;Be++)Pe.stack[Pe.top++]=new V.TValue($.LUA_TNIL,null);Ge=Me+1}let we=H.luaE_extendCI(Pe);return we.funcOff=Me,we.nresults=ye,we.func=De,we.l_base=Ge,Pe.top=we.top=Ge+Ve,we.l_code=Ke.code,we.l_savedpc=0,we.callstatus=H.CIST_LUA,!1}default:return _e(Pe,Me,De),ae(Pe,Me,ye);}},ue=function(Pe,Me,ye,De){let Ke=Me.nresults;Pe.hookmask&(N.LUA_MASKRET|N.LUA_MASKLINE)&&(Pe.hookmask&N.LUA_MASKRET&&ne(Pe,N.LUA_HOOKRET,-1),Pe.oldpc=Me.previous.l_savedpc);let Be=Me.funcOff;return Pe.ci=Me.previous,Pe.ci.next=null,se(Pe,ye,Be,De,Ke)},se=function(Pe,Me,ye,De,Ke){switch(Ke){case 0:break;case 1:{0===De&&(Pe.stack[Me]=V.luaO_nilobject),Pe.stack[ye]=Pe.stack[Me];break}case N.LUA_MULTRET:{for(let Be=0;Be<De;Be++)Pe.stack[ye+Be]=Pe.stack[Me+Be];return Pe.top=ye+De,!1}default:{let Be;if(Ke<=De)for(Be=0;Be<Ke;Be++)Pe.stack[ye+Be]=Pe.stack[Me+Be];else{for(Be=0;Be<De;Be++)Pe.stack[ye+Be]=Pe.stack[Me+Be];for(;Be<Ke;Be++)Pe.stack[ye+Be]=new V.TValue($.LUA_TNIL,null)}break}}return Pe.top=ye+Ke,!0},ne=function(Pe,Me,ye){let De=Pe.hook;if(De&&Pe.allowhook){let Ke=Pe.ci,Be=Pe.top,Ve=Ke.top,Ge=new N.lua_Debug;Ge.event=Me,Ge.currentline=ye,Ge.i_ci=Ke,Ke.top=Pe.top+N.LUA_MINSTACK,Pe.allowhook=0,Ke.callstatus|=H.CIST_HOOKED,De(Pe,Ge),E(!Pe.allowhook),Pe.allowhook=1,Ke.top=Ve,Pe.top=Be,Ke.callstatus&=~H.CIST_HOOKED}},oe=function(Pe,Me,ye){let De=Me.numparams,Ke=Pe.top-ye,Be=Pe.top,Ve;for(Ve=0;Ve<De&&Ve<ye;Ve++)Pe.stack[Pe.top++]=Pe.stack[Ke+Ve],Pe.stack[Ke+Ve]=new V.TValue($.LUA_TNIL,null);for(;Ve<De;Ve++)Pe.stack[Pe.top++]=new V.TValue($.LUA_TNIL,null);return Be},_e=function(Pe,Me,ye){let De=J.luaT_gettmbyobj(Pe,ye,J.TMS.TM_CALL);De.ttisfunction(De)||P.luaG_typeerror(Pe,ye,N.to_luastring('call',!0));for(let Ke=Pe.top;Ke>Me;Ke--)Pe.stack[Ke]=Pe.stack[Ke-1];Pe.top++,Pe.stack[Me]=new V.TValue(De.type,De.value)},pe=function(Pe){Pe.nCcalls===K.LUAI_MAXCCALLS?P.luaG_runerror(Pe,'JS stack overflow'):Pe.nCcalls>=K.LUAI_MAXCCALLS+(K.LUAI_MAXCCALLS>>3)&&de(Pe,ee.LUA_ERRERR)},ce=function(Pe,Me,ye){++Pe.nCcalls>=K.LUAI_MAXCCALLS&&pe(Pe),ae(Pe,Me,ye)||W.luaV_execute(Pe),Pe.nCcalls--},de=function(Pe,Me){if(Pe.errorJmp)throw Pe.errorJmp.status=Me,Pe.errorJmp;else{let ye=Pe.l_G;if(Pe.status=Me,ye.mainthread.errorJmp)ye.mainthread.stack[ye.mainthread.top++]=Pe.stack[Pe.top-1],de(ye.mainthread,Me);else{let De=ye.panic;throw De&&(te(Pe,Me,Pe.top),Pe.ci.top<Pe.top&&(Pe.ci.top=Pe.top),De(Pe)),new Error(`Aborted ${Me}`)}}},Le=function(Pe,Me,ye){let De=Pe.nCcalls,Ke={status:ee.LUA_OK,previous:Pe.errorJmp};Pe.errorJmp=Ke;try{Me(Pe,ye)}catch(Be){if(Ke.status===ee.LUA_OK){let Ve=Pe.l_G.atnativeerror;if(Ve)try{if(Ke.status=ee.LUA_OK,I.lua_pushcfunction(Pe,Ve),I.lua_pushlightuserdata(Pe,Be),be(Pe,Pe.top-2,1),0!==Pe.errfunc){let Ge=Pe.errfunc;Pe.stack[Pe.top]=Pe.stack[Pe.top-1],Pe.stack[Pe.top-1]=Pe.stack[Ge],Pe.top++,be(Pe,Pe.top-2,1)}Ke.status=ee.LUA_ERRRUN}catch(Ge){Ke.status===ee.LUA_OK&&(Ke.status=-1)}else Ke.status=-1}}return Pe.errorJmp=Ke.previous,Pe.nCcalls=De,Ke.status},ge=function(Pe,Me){let ye=Pe.ci;E(null!==ye.c_k&&0===Pe.nny),E(ye.callstatus&H.CIST_YPCALL||Me===ee.LUA_YIELD),ye.callstatus&ee.CIST_YPCALL&&(ye.callstatus&=~ee.CIST_YPCALL,Pe.errfunc=ye.c_old_errfunc),ye.nresults===N.LUA_MULTRET&&Pe.ci.top<Pe.top&&(Pe.ci.top=Pe.top);let De=ye.c_k(Pe,Me,ye.c_ctx);E(De<Pe.top-Pe.ci.funcOff,'not enough elements in the stack'),ue(Pe,ye,Pe.top-De,De)},Ae=function(Pe,Me){for(null!==Me&&ge(Pe,Me);Pe.ci!==Pe.base_ci;)Pe.ci.callstatus&H.CIST_LUA?(W.luaV_finishOp(Pe),W.luaV_execute(Pe)):ge(Pe,H.LUA_YIELD)},Te=function(Pe){for(let Me=Pe.ci;null!==Me;Me=Me.previous)if(Me.callstatus&H.CIST_YPCALL)return Me;return null},he=function(Pe,Me){let ye=Te(Pe);if(null===ye)return 0;let De=Pe.stack[ye.extra];return M.luaF_close(Pe,De),te(Pe,Me,De),Pe.ci=ye,Pe.allowhook=ye.callstatus&H.CIST_OAH,Pe.nny=0,Pe.errfunc=ye.c_old_errfunc,1},xe=function(Pe,Me,ye){return Pe.top-=ye,Pe.stack[Pe.top++]=new V.TValue($.LUA_TLNGSTR,Y.luaS_newliteral(Pe,Me)),E(Pe.top<=Pe.ci.top,'stack overflow'),ee.LUA_ERRRUN},Oe=function(Pe,Me){let ye=Pe.top-Me,De=Pe.ci;Pe.status===ee.LUA_OK?!ae(Pe,ye-1,N.LUA_MULTRET)&&W.luaV_execute(Pe):(E(Pe.status===ee.LUA_YIELD),Pe.status=ee.LUA_OK,De.funcOff=De.extra,De.func=Pe.stack[De.funcOff],De.callstatus&H.CIST_LUA?W.luaV_execute(Pe):(null!==De.c_k&&(Me=De.c_k(Pe,ee.LUA_YIELD,De.c_ctx),E(Me<Pe.top-Pe.ci.funcOff,'not enough elements in the stack'),ye=Pe.top-Me),ue(Pe,De,ye,Me)),Ae(Pe,null))},ke=function(Pe,Me,ye,De){let Ke=Pe.ci;return E(Me<Pe.top-Pe.ci.funcOff,'not enough elements in the stack'),0<Pe.nny&&(Pe===Pe.l_G.mainthread?P.luaG_runerror(Pe,N.to_luastring('attempt to yield from outside a coroutine',!0)):P.luaG_runerror(Pe,N.to_luastring('attempt to yield across a JS-call boundary',!0))),Pe.status=ee.LUA_YIELD,Ke.extra=Ke.funcOff,Ke.callstatus&H.CIST_LUA?E(null===De,'hooks cannot continue after yielding'):(Ke.c_k=De,null!==De&&(Ke.c_ctx=ye),Ke.funcOff=Pe.top-Me-1,Ke.func=Pe.stack[Ke.funcOff],de(Pe,ee.LUA_YIELD)),E(Ke.callstatus&H.CIST_HOOKED),0},Re=function(Pe,Me,ye,De,Ke){let Be=Pe.ci,Ve=Pe.allowhook,Ge=Pe.nny,we=Pe.errfunc;Pe.errfunc=Ke;let Fe=Le(Pe,Me,ye);return Fe!==ee.LUA_OK&&(M.luaF_close(Pe,De),te(Pe,Fe,De),Pe.ci=Be,Pe.allowhook=Ve,Pe.nny=Ge),Pe.errfunc=we,Fe},be=function(Pe,Me,ye){Pe.nny++,ce(Pe,Me,ye),Pe.nny--};class Se{constructor(Pe,Me,ye){this.z=Pe,this.buff=new Q.MBuffer,this.dyd=new F.Dyndata,this.mode=ye,this.name=Me}}const Ne=function(Pe,Me,ye){Me&&-1===Me.indexOf(ye[0])&&(I.lua_pushstring(Pe,N.to_luastring(`attempt to load a ${N.to_jsstring(ye)} chunk (mode is '${N.to_jsstring(Me)}')`)),de(Pe,ee.LUA_ERRSYNTAX))},Ie=function(Pe,Me){let De=Me.z.zgetc(),ye;De===N.LUA_SIGNATURE.charCodeAt(0)?(Ne(Pe,Me.mode,N.to_luastring('binary',!0)),ye=q.luaU_undump(Pe,Me.z,Me.name)):(Ne(Pe,Me.mode,N.to_luastring('text',!0)),ye=F.luaY_parser(Pe,Me.z,Me.buff,Me.dyd,Me.name,De)),E(ye.nupvalues===ye.p.upvalues.length),M.luaF_initupvals(Pe,ye)};T.exports.SParser=Se,T.exports.adjust_varargs=oe,T.exports.luaD_call=ce,T.exports.luaD_callnoyield=be,T.exports.luaD_hook=ne,T.exports.luaD_pcall=Re,T.exports.luaD_poscall=ue,T.exports.luaD_precall=ae,T.exports.luaD_protectedparser=function(Pe,Me,ye,De){let Ke=new Se(Me,ye,De);Pe.nny++;let Be=Re(Pe,Ie,Ke,Pe.top,Pe.errfunc);return Pe.nny--,Be},T.exports.luaD_rawrunprotected=Le,T.exports.luaD_throw=de,T.exports.lua_isyieldable=function(Pe){return 0===Pe.nny},T.exports.lua_resume=function(Pe,Me,ye){let De=Pe.nny;if(Pe.status===ee.LUA_OK){if(Pe.ci!==Pe.base_ci)return xe(Pe,'cannot resume non-suspended coroutine',ye);}else if(Pe.status!==ee.LUA_YIELD)return xe(Pe,'cannot resume dead coroutine',ye);if(Pe.nCcalls=Me?Me.nCcalls+1:1,Pe.nCcalls>=K.LUAI_MAXCCALLS)return xe(Pe,'JS stack overflow',ye);Pe.nny=0,E((Pe.status===ee.LUA_OK?ye+1:ye)<Pe.top-Pe.ci.funcOff,'not enough elements in the stack');let Ke=Le(Pe,Oe,ye);if(-1===Ke)Ke=ee.LUA_ERRRUN;else{for(;Ke>ee.LUA_YIELD&&he(Pe,Ke);)Ke=Le(Pe,Ae,Ke);Ke>ee.LUA_YIELD?(Pe.status=Ke,te(Pe,Ke,Pe.top),Pe.ci.top=Pe.top):E(Ke===Pe.status)}return Pe.nny=De,Pe.nCcalls--,E(Pe.nCcalls===(Me?Me.nCcalls:0)),Ke},T.exports.lua_yield=function(Pe,Me){ke(Pe,Me,0,null)},T.exports.lua_yieldk=ke,T.exports.moveresults=se,T.exports.stackerror=pe,T.exports.tryfuncTM=_e},function(T,O,U){'use strict';const E=U(0),N=U(1),I=U(8),P=U(4),M=U(7),K=N.constant_types,V=function(_e){switch(_e.type){case K.LUA_TBOOLEAN:case K.LUA_TLIGHTUSERDATA:case K.LUA_TNUMFLT:case K.LUA_TNUMINT:case K.LUA_TTABLE:case K.LUA_TLCL:case K.LUA_TLCF:case K.LUA_TCCL:case K.LUA_TUSERDATA:case K.LUA_TTHREAD:return _e.value;case K.LUA_TSHRSTR:case K.LUA_TLNGSTR:return M.luaS_hashlongstr(_e.tsvalue());default:throw new Error('unknown key type: '+_e.type);}};class F{constructor(_e){this.id=_e.l_G.id_counter++,this.strong=new Map,this.dead_strong=new Map,this.dead_weak=void 0,this.f=void 0,this.l=void 0,this.metatable=null}}const H=function(_e,pe,ce,de){_e.dead_strong.clear(),_e.dead_weak=void 0;let Le=null,ge={key:ce,value:de,p:Le=_e.l,n:void 0};_e.f||(_e.f=ge),Le&&(Le.n=ge),_e.strong.set(pe,ge),_e.l=ge},Y=function(_e){return'object'==typeof _e?null!==_e:'function'==typeof _e},J=function(_e,pe){let ce=_e.strong.get(pe);if(ce){ce.key.setdeadvalue(),ce.value=void 0;let de=ce.n,Le=ce.p;ce.p=void 0,Le&&(Le.n=de),de&&(de.p=Le),_e.f===ce&&(_e.f=de),_e.l===ce&&(_e.l=Le),_e.strong.delete(pe),Y(pe)?(!_e.dead_weak&&(_e.dead_weak=new WeakMap),_e.dead_weak.set(pe,ce)):_e.dead_strong.set(pe,ce)}},W=function(_e,pe){let ce=_e.strong.get(pe);return ce?ce.value:P.luaO_nilobject},Q=function(_e,pe){return E('number'==typeof pe&&(0|pe)===pe),W(_e,pe)},te=function(_e,pe,ce){let de=_e.strong.get(pe);if(de)return de.value;let Le=new P.TValue(K.LUA_TNIL,null);return H(_e,pe,ce,Le),Le};T.exports.luaH_delete=function(_e,pe){E(pe instanceof P.TValue);let ce=V(pe);return J(_e,ce)},T.exports.luaH_get=function(_e,pe){return E(pe instanceof P.TValue),pe.ttisnil()?P.luaO_nilobject:W(_e,V(pe))},T.exports.luaH_getint=Q,T.exports.luaH_getn=function(_e){let pe=0,ce=_e.strong.size+1;for(;1<ce-pe;){let de=_Mathfloor((pe+ce)/2);Q(_e,de).ttisnil()?ce=de:pe=de}return pe},T.exports.luaH_getstr=function(_e,pe){return E(pe instanceof M.TString),W(_e,M.luaS_hashlongstr(pe))},T.exports.luaH_set=function(_e,pe){E(pe instanceof P.TValue);let ce=V(pe);return te(_e,ce,new P.TValue(pe.type,pe.value))},T.exports.luaH_setint=function(_e,pe,ce){E('number'==typeof pe&&(0|pe)===pe&&ce instanceof P.TValue);let de=pe;if(ce.ttisnil())return void J(_e,de);let Le=_e.strong.get(de);if(Le){let ge=Le.value;ge.setfrom(ce)}else{let ge=new P.TValue(K.LUA_TNUMINT,pe),Ae=new P.TValue(ce.type,ce.value);H(_e,de,ge,Ae)}},T.exports.luaH_new=function(_e){return new F(_e)},T.exports.luaH_next=function(_e,pe,ce){let de=_e.stack[ce],Le;if(de.type!==K.LUA_TNIL){let ge=V(de);if(Le=pe.strong.get(ge),!Le){if(Le=pe.dead_weak.get(ge)||pe.dead_strong.get(ge),!Le)return I.luaG_runerror(_e,N.to_luastring('invalid key to \'next\''));do if(Le=Le.n,!Le)return!1;while(Le.key.ttisdeadkey())}else if(Le=Le.n,!Le)return!1}else if(Le=pe.f,!Le)return!1;return _e.stack[ce]=new P.TValue(Le.key.type,Le.key.value),_e.stack[ce+1]=new P.TValue(Le.value.type,Le.value.value),!0}},function(T,O,U){'use strict';const E=U(0),N=U(1),I=U(4),P=N.constant_types;class K{constructor(){this.L=null,this.v=null,this.open_next=null,this.refcount=0,this.value=null}val(){return null===this.v?this.value:this.L.stack[this.v]}isopen(){return null!==this.v}}T.exports.MAXUPVAL=255,T.exports.Proto=class{constructor(q){this.id=q.l_G.id_counter++,this.k=[],this.p=[],this.code=[],this.cache=null,this.lineinfo=[],this.upvalues=[],this.numparams=0,this.is_vararg=!1,this.maxstacksize=0,this.locvars=[],this.linedefined=0,this.lastlinedefined=0,this.source=null}},T.exports.UpVal=K,T.exports.luaF_findupval=function(q,W){let Q=q.openupval,$=Q;for(;null!==Q&&Q.v>=W;){if($=Q,E($.isopen()),$.v===W)return $;Q=$.open_next}let ee=new K;return $&&(ee.open_next=$),q.openupval=ee,ee.L=q,ee.v=W,ee},T.exports.luaF_close=function(q,W){for(;null!==q.openupval&&q.openupval.v>=W;){let Q=q.openupval;if(E(Q.isopen()),q.openupval=Q.open_next,0<Q.refcount){let $=Q.L.stack[Q.v];Q.L=null,Q.v=null,Q.value=new I.TValue($.type,$.value)}}},T.exports.luaF_getlocalname=function(q,W,Q){for(let $=0;$<q.locvars.length&&q.locvars[$].startpc<=Q;$++)if(Q<q.locvars[$].endpc&&(W--,0===W))return q.locvars[$].varname.getstr();return null},T.exports.luaF_initupvals=function(q,W){for(let Q=0,$;Q<W.nupvalues;Q++)$=new K(q),$.refcount=1,$.value=new I.TValue(P.LUA_TNIL,null),W.upvals[Q]=$},T.exports.luaF_newLclosure=function(q,W){let Q=new I.LClosure(q,W);return Q}},function(T,O,U){'use strict';const E=U(0),N=U(1),I=U(4),P=U(9),M=U(14),K=U(7),V=U(10),F=U(8),H=U(15),Y=N.constant_types,J=['no value','nil','boolean','userdata','number','string','table','function','userdata','thread','proto'].map((ne)=>N.to_luastring(ne)),q=function(ne){return J[ne+1]},W={TM_INDEX:0,TM_NEWINDEX:1,TM_GC:2,TM_MODE:3,TM_LEN:4,TM_EQ:5,TM_ADD:6,TM_SUB:7,TM_MUL:8,TM_MOD:9,TM_POW:10,TM_DIV:11,TM_IDIV:12,TM_BAND:13,TM_BOR:14,TM_BXOR:15,TM_SHL:16,TM_SHR:17,TM_UNM:18,TM_BNOT:19,TM_LT:20,TM_LE:21,TM_CONCAT:22,TM_CALL:23,TM_N:24},ee=function(ne,oe,_e,pe,ce,de){let Le=ce,ge=ne.top;ne.stack[ne.top]=new I.TValue(oe.type,oe.value),ne.stack[ne.top+1]=new I.TValue(_e.type,_e.value),ne.stack[ne.top+2]=new I.TValue(pe.type,pe.value),ne.top+=3,de||(ne.stack[ne.top++]=new I.TValue(ce.type,ce.value)),ne.ci.callstatus&M.CIST_LUA?P.luaD_call(ne,ge,de):P.luaD_callnoyield(ne,ge,de),de&&(E('number'==typeof Le),ne.stack[Le]=ne.stack[--ne.top])},te=function(ne,oe,_e,pe,ce){let de=se(ne,oe,ce);return(de.ttisnil()&&(de=se(ne,_e,ce)),!de.ttisnil())&&(ee(ne,de,oe,_e,pe,1),!0)},se=function(ne,oe,_e){let pe;switch(oe.ttnov()){case Y.LUA_TTABLE:case Y.LUA_TUSERDATA:pe=oe.value.metatable;break;default:pe=ne.l_G.mt[oe.ttnov()];}return pe?V.luaH_getstr(pe,ne.l_G.tmname[_e]):I.luaO_nilobject};T.exports.TMS=W,T.exports.luaT_callTM=ee,T.exports.luaT_callbinTM=te,T.exports.luaT_trybinTM=function(ne,oe,_e,pe,ce){if(!te(ne,oe,_e,pe,ce))switch(ce){case W.TM_CONCAT:F.luaG_concaterror(ne,oe,_e);case W.TM_BAND:case W.TM_BOR:case W.TM_BXOR:case W.TM_SHL:case W.TM_SHR:case W.TM_BNOT:{let de=H.tonumber(oe),Le=H.tonumber(_e);!1!==de&&!1!==Le?F.luaG_tointerror(ne,oe,_e):F.luaG_opinterror(ne,oe,_e,N.to_luastring('perform bitwise operation on',!0))}default:F.luaG_opinterror(ne,oe,_e,N.to_luastring('perform arithmetic on',!0));}},T.exports.luaT_callorderTM=function(ne,oe,_e,pe){return te(ne,oe,_e,ne.top,pe)?ne.stack[ne.top].l_isfalse()?0:1:-1},T.exports.luaT_gettmbyobj=se,T.exports.luaT_init=function(ne){ne.l_G.tmname[W.TM_INDEX]=new K.luaS_new(ne,N.to_luastring('__index',!0)),ne.l_G.tmname[W.TM_NEWINDEX]=new K.luaS_new(ne,N.to_luastring('__newindex',!0)),ne.l_G.tmname[W.TM_GC]=new K.luaS_new(ne,N.to_luastring('__gc',!0)),ne.l_G.tmname[W.TM_MODE]=new K.luaS_new(ne,N.to_luastring('__mode',!0)),ne.l_G.tmname[W.TM_LEN]=new K.luaS_new(ne,N.to_luastring('__len',!0)),ne.l_G.tmname[W.TM_EQ]=new K.luaS_new(ne,N.to_luastring('__eq',!0)),ne.l_G.tmname[W.TM_ADD]=new K.luaS_new(ne,N.to_luastring('__add',!0)),ne.l_G.tmname[W.TM_SUB]=new K.luaS_new(ne,N.to_luastring('__sub',!0)),ne.l_G.tmname[W.TM_MUL]=new K.luaS_new(ne,N.to_luastring('__mul',!0)),ne.l_G.tmname[W.TM_MOD]=new K.luaS_new(ne,N.to_luastring('__mod',!0)),ne.l_G.tmname[W.TM_POW]=new K.luaS_new(ne,N.to_luastring('__pow',!0)),ne.l_G.tmname[W.TM_DIV]=new K.luaS_new(ne,N.to_luastring('__div',!0)),ne.l_G.tmname[W.TM_IDIV]=new K.luaS_new(ne,N.to_luastring('__idiv',!0)),ne.l_G.tmname[W.TM_BAND]=new K.luaS_new(ne,N.to_luastring('__band',!0)),ne.l_G.tmname[W.TM_BOR]=new K.luaS_new(ne,N.to_luastring('__bor',!0)),ne.l_G.tmname[W.TM_BXOR]=new K.luaS_new(ne,N.to_luastring('__bxor',!0)),ne.l_G.tmname[W.TM_SHL]=new K.luaS_new(ne,N.to_luastring('__shl',!0)),ne.l_G.tmname[W.TM_SHR]=new K.luaS_new(ne,N.to_luastring('__shr',!0)),ne.l_G.tmname[W.TM_UNM]=new K.luaS_new(ne,N.to_luastring('__unm',!0)),ne.l_G.tmname[W.TM_BNOT]=new K.luaS_new(ne,N.to_luastring('__bnot',!0)),ne.l_G.tmname[W.TM_LT]=new K.luaS_new(ne,N.to_luastring('__lt',!0)),ne.l_G.tmname[W.TM_LE]=new K.luaS_new(ne,N.to_luastring('__le',!0)),ne.l_G.tmname[W.TM_CONCAT]=new K.luaS_new(ne,N.to_luastring('__concat',!0)),ne.l_G.tmname[W.TM_CALL]=new K.luaS_new(ne,N.to_luastring('__call',!0))},T.exports.luaT_objtypename=function(ne,oe){let _e;if(oe.ttistable()&&null!==(_e=oe.value.metatable)||oe.ttisfulluserdata()&&null!==(_e=oe.value.metatable)){let pe=V.luaH_getstr(_e,N.to_luastring('__name',!0));if(pe.ttisstring())return pe.svalue()}return q(oe.ttnov())},T.exports.ttypename=q},function(T,O,U){'use strict';const E=U(3),M='',V=`%${M}d`,J=function(q,W){for(var Q=_Mathmin(3,_Mathceil(_Mathabs(W)/1023)),$=q,ee=0;ee<Q;ee++)$*=_Mathpow(2,_Mathfloor((W+ee)/Q));return $};T.exports.frexp=function(q){if(0===q)return[q,0];var W=new DataView(new ArrayBuffer(8));W.setFloat64(0,q);var Q=2047&W.getUint32(0)>>>20;0==Q&&(W.setFloat64(0,18446744073709552000*q),Q=(2047&W.getUint32(0)>>>20)-64);var $=Q-1022,ee=J(q,-$);return[ee,$]},T.exports.ldexp=J,T.exports.LUAI_MAXSTACK=1e6,T.exports.LUA_IDSIZE=60,T.exports.LUA_INTEGER_FMT=V,T.exports.LUA_INTEGER_FRMLEN=M,T.exports.LUA_NUMBER_FMT='%.14g',T.exports.LUA_NUMBER_FRMLEN='',T.exports.lua_getlocaledecpoint=function(){return 1.1.toLocaleString().substring(1,2)},T.exports.lua_numbertointeger=function(q){return q>=E.MIN_INT&&q<-E.MIN_INT?q:0}},function(T,O,U){'use strict';const E=U(0),N=U(1),I=U(4),P=U(9),M=U(21),K=U(10),V=U(11),F=U(12),H=N.constant_types,Y=N.thread_status,J=N.LUA_NUMTAGS,q=2*N.LUA_MINSTACK;class W{constructor(){this.func=null,this.funcOff=NaN,this.top=NaN,this.previous=null,this.next=null,this.l_base=NaN,this.l_code=null,this.l_savedpc=NaN,this.c_k=null,this.c_old_errfunc=null,this.c_ctx=null,this.nresults=NaN,this.callstatus=NaN}}class Q{constructor(){this.id=null,this.base_ci=new W,this.top=0,this.ci=null,this.stack=[],this.openupval=null,this.status=Y.LUA_OK,this.next=null,this.errorJmp=null,this.nny=1,this.errfunc=0}}class ${constructor(ge){this.id_counter=0,this.mainthread=ge,this.l_registry=new I.TValue(H.LUA_TNIL,null),this.panic=null,this.atnativeerror=null,this.version=null,this.tmname=Array(F.TMS.TM_N),this.mt=Array(J)}}const te=function(ge){let Ae=ge.ci;Ae.next=null},ae=function(ge){ge.stack=Array(q),ge.top=0;let Te=ge.base_ci;Te.next=Te.previous=null,Te.callstatus=0,Te.func=ge.stack[ge.top],Te.funcOff=ge.top,ge.stack[ge.top++]=new I.TValue(H.LUA_TNIL,null),Te.top=ge.top+N.LUA_MINSTACK,ge.ci=Te},ue=function(ge){ge.ci=ge.base_ci,te(ge),ge.stack=null},se=function(ge,Ae){let Te=K.luaH_new(ge);Ae.l_registry.sethvalue(Te),K.luaH_setint(Te,N.LUA_RIDX_MAINTHREAD,new I.TValue(H.LUA_TTHREAD,ge)),K.luaH_setint(Te,N.LUA_RIDX_GLOBALS,new I.TValue(H.LUA_TTABLE,K.luaH_new(ge)))},ne=function(ge){let Ae=ge.l_G;ae(ge,ge),se(ge,Ae),F.luaT_init(ge),Ae.version=M.lua_version(null)},oe=function(ge,Ae){ge.id=Ae.id_counter++,ge.l_G=Ae,ge.stack=null,ge.ci=null,ge.errorJmp=null,ge.nCcalls=0,ge.hook=null,ge.hookmask=0,ge.basehookcount=0,ge.allowhook=1,ge.hookcount=ge.basehookcount,ge.openupval=null,ge.nny=1,ge.status=Y.LUA_OK,ge.errfunc=0},de=function(ge){V.luaF_close(ge,ge.stack),ue(ge)};T.exports.lua_State=Q,T.exports.CallInfo=W,T.exports.CIST_OAH=1,T.exports.CIST_LUA=2,T.exports.CIST_HOOKED=4,T.exports.CIST_FRESH=8,T.exports.CIST_YPCALL=16,T.exports.CIST_TAIL=32,T.exports.CIST_HOOKYIELD=64,T.exports.CIST_LEQ=128,T.exports.CIST_FIN=256,T.exports.lua_close=function(ge){ge=ge.l_G.mainthread,de(ge)},T.exports.lua_newstate=function(){let ge=new Q,Ae=new $(ge);return oe(ge,Ae),P.luaD_rawrunprotected(ge,ne,null)!==Y.LUA_OK&&(ge=null),ge},T.exports.lua_newthread=function(ge){let Ae=ge.l_G,Te=new Q;return ge.stack[ge.top++]=new I.TValue(H.LUA_TTHREAD,Te),E(ge.top<=ge.ci.top,'stack overflow'),oe(Te,Ae),Te.hookmask=ge.hookmask,Te.basehookcount=ge.basehookcount,Te.hook=ge.hook,Te.hookcount=Te.basehookcount,ae(Te,ge),Te},T.exports.luaE_extendCI=function(ge){let Ae=new W;return ge.ci.next=Ae,Ae.previous=ge.ci,Ae.next=null,ge.ci=Ae,Ae},T.exports.luaE_freeCI=te,T.exports.luaE_freethread=function(ge,Ae){V.luaF_close(Ae,Ae.stack),ue(Ae)}},function(T,O,U){'use strict';const E=U(0),N=U(1),I=U(18),P=U(13),M=U(4),K=U(11),V=U(14),F=U(7),H=U(3),Y=U(9),J=U(12),q=U(10),W=U(8),Q=N.constant_types,$=N.LUA_MULTRET,te=function(De,Ke,Be){return Ke+Be.A},ae=function(De,Ke,Be){return Ke+Be.B},se=function(De,Ke,Be,Ve){return I.ISK(Ve.B)?Be[I.INDEXK(Ve.B)]:De.stack[Ke+Ve.B]},ne=function(De,Ke,Be,Ve){return I.ISK(Ve.C)?Be[I.INDEXK(Ve.C)]:De.stack[Ke+Ve.C]},_e=function(De,Ke,Be,Ve){let Ge=Be.A;0!==Ge&&K.luaF_close(De,Ke.l_base+Ge-1),Ke.l_savedpc+=Be.sBx+Ve},pe=function(De,Ke){_e(De,Ke,Ke.l_code[Ke.l_savedpc],1)},ce=function(De,Ke,Be){if(Ke.ttisnumber()&&Be.ttisnumber())return Oe(Ke,Be)?1:0;if(Ke.ttisstring()&&Be.ttisstring())return 0>ve(Ke.tsvalue(),Be.tsvalue())?1:0;let Ve=J.luaT_callorderTM(De,Ke,Be,J.TMS.TM_LT);return 0>Ve&&W.luaG_ordererror(De,Ke,Be),Ve?1:0},de=function(De,Ke,Be){let Ve;return Ke.ttisnumber()&&Be.ttisnumber()?Ue(Ke,Be)?1:0:Ke.ttisstring()&&Be.ttisstring()?0>=ve(Ke.tsvalue(),Be.tsvalue())?1:0:(Ve=J.luaT_callorderTM(De,Ke,Be,J.TMS.TM_LE),0<=Ve)?Ve?1:0:(De.ci.callstatus|=V.CIST_LEQ,Ve=J.luaT_callorderTM(De,Be,Ke,J.TMS.TM_LT),De.ci.callstatus^=V.CIST_LEQ,0>Ve&&W.luaG_ordererror(De,Ke,Be),1===Ve?0:1)},Le=function(De,Ke,Be){if(Ke.ttype()!==Be.ttype())return Ke.ttnov()!==Be.ttnov()||Ke.ttnov()!==Q.LUA_TNUMBER?0:_Mathfloor(Ke.value)===_Mathfloor(Be.value)?1:0;let Ve;switch(Ke.ttype()){case Q.LUA_TNIL:return 1;case Q.LUA_TBOOLEAN:return Ke.value==Be.value?1:0;case Q.LUA_TNUMINT:case Q.LUA_TNUMFLT:case Q.LUA_TLCF:return Ke.value===Be.value?1:0;case Q.LUA_TSHRSTR:case Q.LUA_TLNGSTR:return F.luaS_eqlngstr(Ke.tsvalue(),Be.tsvalue())?1:0;case Q.LUA_TLIGHTUSERDATA:case Q.LUA_TUSERDATA:case Q.LUA_TTABLE:if(Ke.value===Be.value)return 1;if(null===De)return 0;Ve=J.luaT_gettmbyobj(De,Ke,J.TMS.TM_EQ),Ve.ttisnil()&&(Ve=J.luaT_gettmbyobj(De,Be,J.TMS.TM_EQ));break;default:return Ke.value===Be.value?1:0;}return!Ve||Ve.ttisnil()?0:(J.luaT_callTM(De,Ve,Ke,Be,De.top,1),De.stack[De.top].l_isfalse()?0:1)},Ae=function(De,Ke){let Be=!1,Ve=Te(De,0>Ke?2:1);if(!1===Ve){let Ge=xe(De);if(!1===Ge)return!1;0<Ge?(Ve=H.LUA_MAXINTEGER,0>Ke&&(Be=!0)):(Ve=H.LUA_MININTEGER,0<=Ke&&(Be=!0))}return{casted:!0,stopnow:Be,ilimit:Ve}},Te=function(De,Ke){if(De.ttisfloat()){let Be=De.value,Ve=_Mathfloor(Be);if(Be!==Ve){if(0===Ke)return!1;1<Ke&&(Ve+=1)}let Ge=P.lua_numbertointeger(Ve);return 0===Ge?0===Be&&0:Ge}if(De.ttisinteger())return De.value;if(De.ttisstring()){let Be=M.luaO_str2num(De.svalue());return!1!==Be&&Te(Be,Ke)}return!1},he=function(De){return De.ttisinteger()?De.value:Te(De,0)},xe=function(De){if(De.ttnov()===Q.LUA_TNUMBER)return De.value;if(De.ttnov()===Q.LUA_TSTRING){let Ke=M.luaO_str2num(De.svalue());return!!Ke&&Ke.value}return!1},Oe=function(De,Ke){return De.ttisinteger()?Ke.ttisinteger()?De.value<Ke.value?1:0:ke(Ke.value,De.value):Ke.ttisfloat()?De.value<Ke.value?1:0:isNaN(De.value)?0:!Ee(Ke.value,De.value)},Ue=function(De,Ke){return De.ttisinteger()?Ke.ttisinteger()?De.value<=Ke.value?1:0:Ee(De.value,Ke.value):Ke.ttisfloat()?De.value<=Ke.value?1:0:!isNaN(De.value)&&!ke(Ke.value,De.value)},Ee=function(De,Ke){return De<=Ke?1:0},ke=function(De,Ke){return De<Ke?1:0},ve=function(De,Ke){let Be=De.getstr(),Ve=De.tsslen(),Ge=N.to_jsstring(Be),we=Ke.getstr(),Fe=Ke.tsslen(),He=N.to_jsstring(we);for(;;){let Xe=Ge===He;if(!Xe)return Ge<He?-1:1;let je=Ge.length;if(je===Fe)return je===Ve?0:1;if(je===Ve)return-1;je++,Be=Be.slice(je),Ve-=je,we=we.slice(je),Fe-=je,Ge=N.to_jsstring(Be),He=N.to_jsstring(we)}},Re=function(De,Ke,Be){let Ve;switch(Be.ttype()){case Q.LUA_TTABLE:{if(Ve=J.luaT_gettmbyobj(De,Be,J.TMS.TM_LEN),!Ve.ttisnil())break;return void(De.stack[Ke]=new M.TValue(Q.LUA_TNUMINT,q.luaH_getn(Be.value)))}case Q.LUA_TSHRSTR:case Q.LUA_TLNGSTR:return void(De.stack[Ke]=new M.TValue(Q.LUA_TNUMINT,Be.vslen()));default:{Ve=J.luaT_gettmbyobj(De,Be,J.TMS.TM_LEN),Ve.ttisnil()&&W.luaG_typeerror(De,Be,N.to_luastring('get length of',!0));break}}J.luaT_callTM(De,Ve,Be,Be,Ke,1)},be=function(De,Ke){let Be=De.stack[Ke];return!!Be.ttisstring()||Be.ttisnumber()&&!isNaN(Be.value)&&(De.stack[Ke]=new M.TValue(Q.LUA_TLNGSTR,F.luaS_bless(De,N.to_luastring(`${Be.value}`))),!0)},Se=function(De){return De.ttisstring()&&0===De.vslen()},Ne=function(De,Ke){E(2<=Ke);do{let Be=De.top,Ve=2;if(!(De.stack[Be-2].ttisstring()||De.stack[Be-2].ttisnumber())||!be(De,Be-1))J.luaT_trybinTM(De,De.stack[Be-2],De.stack[Be-1],Be-2,J.TMS.TM_CONCAT),delete De.stack[Be-1];else if(Se(De.stack[Be-1]))be(De,Be-2),delete De.stack[Be-1];else if(Se(De.stack[Be-2]))De.stack[Be-2]=De.stack[Be-1],delete De.stack[Be-1];else{let Ge=Array(Ke);for(Ge[Ke-1]=De.stack[Be-1].svalue(),delete De.stack[Be-1],Ve=1;Ve<Ke;Ve++){if(!be(De,Be-Ve-1)){Ge=Ge.slice(Ke-Ve);break}Ge[Ke-Ve-1]=De.stack[Be-Ve-1].svalue(),delete De.stack[Be-Ve-1]}let we=F.luaS_bless(De,Array.prototype.concat.apply([],Ge));De.stack[Be-Ve]=new M.TValue(Q.LUA_TLNGSTR,we)}Ke-=Ve-1,De.top-=Ve-1}while(1<Ke)},Ie=2e3,Ce=function(De,Ke,Be,Ve,Ge){if(Ge=Ge?Ge:0,Ge>=Ie&&W.luaG_runerror(De,N.to_luastring('\'__index\' chain too long; possible loop',!0)),Ke.ttistable()){let we=q.luaH_get(Ke.value,Be);we.ttisnil()?Pe(De,Ke,Be,Ve,we,Ge):De.stack[Ve]=new M.TValue(we.type,we.value)}else Pe(De,Ke,Be,Ve,null,Ge)},Pe=function(De,Ke,Be,Ve,Ge,we){let Fe;if(null===Ge)E(!Ke.ttistable()),Fe=J.luaT_gettmbyobj(De,Ke,J.TMS.TM_INDEX),Fe.ttisnil()&&W.luaG_typeerror(De,Ke,N.to_luastring('index',!0));else if(E(Ge.ttisnil()),Fe=J.luaT_gettmbyobj(De,Ke,J.TMS.TM_INDEX),Fe.ttisnil())return void(De.stack[Ve]=new M.TValue(Q.LUA_TNIL,null));return Fe.ttisfunction()?void J.luaT_callTM(De,Fe,Ke,Be,Ve,1):void Ce(De,Fe,Be,Ve,we+1)},Me=function(De,Ke,Be,Ve,Ge){if(Ge=Ge?Ge:0,Ge>=Ie&&W.luaG_runerror(De,N.to_luastring('\'__newindex\' chain too long; possible loop',!0)),Ke.ttistable()){let we=q.luaH_set(Ke.value,Be);we.ttisnil()?ye(De,Ke,Be,Ve,we,Ge):Ve.ttisnil()?q.luaH_delete(Ke.value,Be):we.setfrom(Ve)}else ye(De,Ke,Be,Ve,null,Ge)},ye=function(De,Ke,Be,Ve,Ge,we){let Fe;if(null===Ge)Fe=J.luaT_gettmbyobj(De,Ke,J.TMS.TM_NEWINDEX),Fe.ttisnil()&&W.luaG_typeerror(De,Ke,N.to_luastring('index',!0));else if(E(Ge.ttisnil()),Fe=J.luaT_gettmbyobj(De,Ke,J.TMS.TM_NEWINDEX),Fe.ttisnil())return void(Ve.ttisnil()?q.luaH_delete(Ke.value,Be):Ge.setfrom(Ve));return Fe.ttisfunction()?void J.luaT_callTM(De,Fe,Ke,Be,Ve,0):void Me(De,Fe,Be,Ve,we+1)};T.exports.LEintfloat=Ee,T.exports.LEnum=Ue,T.exports.LTintfloat=ke,T.exports.LTnum=Oe,T.exports.RA=te,T.exports.RB=ae,T.exports.RC=function(De,Ke,Be){return Ke+Be.C},T.exports.RKB=se,T.exports.RKC=ne,T.exports.dojump=_e,T.exports.donextjump=pe,T.exports.forlimit=Ae,T.exports.gettable=Ce,T.exports.l_strcmp=ve,T.exports.luaV_concat=Ne,T.exports.luaV_equalobj=Le,T.exports.luaV_execute=function(De){const Ke=I.OpCodesI;let Be=De.ci;Be.callstatus|=V.CIST_FRESH;newframe:for(;;){E(Be===De.ci);let Ve=Be.func.value,Ge=Ve.p.k,we=Be.l_base,Fe=Be.l_code[Be.l_savedpc++];De.hookmask&(N.LUA_MASKLINE|N.LUA_MASKCOUNT)&&W.luaG_traceexec(De);let He=te(De,we,Fe),Xe=Fe.opcode;switch(Xe){case Ke.OP_MOVE:{De.stack[He]=De.stack[ae(De,we,Fe)];break}case Ke.OP_LOADK:{let je=Ge[Fe.Bx];De.stack[He]=new M.TValue(je.type,je.value);break}case Ke.OP_LOADKX:{E(Be.l_code[Be.l_savedpc].opcode===Ke.OP_EXTRAARG);let je=Ge[Be.l_code[Be.l_savedpc++].Ax];De.stack[He]=new M.TValue(je.type,je.value);break}case Ke.OP_LOADBOOL:{De.stack[He]=new M.TValue(Q.LUA_TBOOLEAN,0!==Fe.B),0!==Fe.C&&Be.l_savedpc++;break}case Ke.OP_LOADNIL:{for(let je=0;je<=Fe.B;je++)De.stack[He+je]=new M.TValue(Q.LUA_TNIL,null);break}case Ke.OP_GETUPVAL:{let je=Ve.upvals[Fe.B].val();De.stack[He]=new M.TValue(je.type,je.value);break}case Ke.OP_SETUPVAL:{let je=Ve.upvals[Fe.B];null===je.v?je.value.setfrom(De.stack[He]):je.L.stack[je.v]=De.stack[He];break}case Ke.OP_GETTABUP:{let je=Ve.upvals[Fe.B].val(),ze=ne(De,we,Ge,Fe);Ce(De,je,ze,He);break}case Ke.OP_SETTABUP:{let je=Ve.upvals[Fe.A].val(),ze=se(De,we,Ge,Fe),Ye=ne(De,we,Ge,Fe);Me(De,je,ze,Ye);break}case Ke.OP_GETTABLE:{let je=se(De,we,Ge,Fe),ze=ne(De,we,Ge,Fe);Ce(De,je,ze,He);break}case Ke.OP_SETTABLE:{let je=De.stack[He],ze=se(De,we,Ge,Fe),Ye=ne(De,we,Ge,Fe);Me(De,je,ze,Ye);break}case Ke.OP_NEWTABLE:{De.stack[He]=new M.TValue(Q.LUA_TTABLE,q.luaH_new(De));break}case Ke.OP_SELF:{let je=De.stack[ae(De,we,Fe)],ze=ne(De,we,Ge,Fe);De.stack[He+1]=je,Ce(De,je,ze,He);break}case Ke.OP_ADD:{let je=se(De,we,Ge,Fe),ze=ne(De,we,Ge,Fe),Ye=xe(je),Je=xe(ze);je.ttisinteger()&&ze.ttisinteger()?De.stack[He]=new M.TValue(Q.LUA_TNUMINT,0|je.value+ze.value):!1!==Ye&&!1!==Je?De.stack[He]=new M.TValue(Q.LUA_TNUMFLT,Ye+Je):J.luaT_trybinTM(De,je,ze,He,J.TMS.TM_ADD);break}case Ke.OP_SUB:{let je=se(De,we,Ge,Fe),ze=ne(De,we,Ge,Fe),Ye=xe(je),Je=xe(ze);je.ttisinteger()&&ze.ttisinteger()?De.stack[He]=new M.TValue(Q.LUA_TNUMINT,0|je.value-ze.value):!1!==Ye&&!1!==Je?De.stack[He]=new M.TValue(Q.LUA_TNUMFLT,Ye-Je):J.luaT_trybinTM(De,je,ze,He,J.TMS.TM_SUB);break}case Ke.OP_MUL:{let je=se(De,we,Ge,Fe),ze=ne(De,we,Ge,Fe),Ye=xe(je),Je=xe(ze);je.ttisinteger()&&ze.ttisinteger()?De.stack[He]=new M.TValue(Q.LUA_TNUMINT,0|je.value*ze.value):!1!==Ye&&!1!==Je?De.stack[He]=new M.TValue(Q.LUA_TNUMFLT,Ye*Je):J.luaT_trybinTM(De,je,ze,He,J.TMS.TM_MUL);break}case Ke.OP_MOD:{let je=se(De,we,Ge,Fe),ze=ne(De,we,Ge,Fe),Ye=xe(je),Je=xe(ze);je.ttisinteger()&&ze.ttisinteger()?De.stack[He]=new M.TValue(Q.LUA_TNUMINT,0|je.value-_Mathfloor(je.value/ze.value)*ze.value):!1!==Ye&&!1!==Je?De.stack[He]=new M.TValue(Q.LUA_TNUMFLT,Ye-_Mathfloor(Ye/Je)*Je):J.luaT_trybinTM(De,je,ze,He,J.TMS.TM_MOD);break}case Ke.OP_POW:{let je=se(De,we,Ge,Fe),ze=ne(De,we,Ge,Fe),Ye=xe(je),Je=xe(ze);!1!==Ye&&!1!==Je?De.stack[He]=new M.TValue(Q.LUA_TNUMFLT,_Mathpow(Ye,Je)):J.luaT_trybinTM(De,je,ze,He,J.TMS.TM_POW);break}case Ke.OP_DIV:{let je=se(De,we,Ge,Fe),ze=ne(De,we,Ge,Fe),Ye=xe(je),Je=xe(ze);!1!==Ye&&!1!==Je?De.stack[He]=new M.TValue(Q.LUA_TNUMFLT,Ye/Je):J.luaT_trybinTM(De,je,ze,He,J.TMS.TM_DIV);break}case Ke.OP_IDIV:{let je=se(De,we,Ge,Fe),ze=ne(De,we,Ge,Fe),Ye=xe(je),Je=xe(ze);je.ttisinteger()&&ze.ttisinteger()?De.stack[He]=new M.TValue(Q.LUA_TNUMINT,0|_Mathfloor(je.value/ze.value)):!1!==Ye&&!1!==Je?De.stack[He]=new M.TValue(Q.LUA_TNUMFLT,_Mathfloor(Ye/Je)):J.luaT_trybinTM(De,je,ze,He,J.TMS.TM_IDIV);break}case Ke.OP_BAND:{let je=se(De,we,Ge,Fe),ze=ne(De,we,Ge,Fe),Ye=he(je),Je=he(ze);!1!==Ye&&Je?De.stack[He]=new M.TValue(Q.LUA_TNUMINT,Ye&Je):J.luaT_trybinTM(De,je,ze,He,J.TMS.TM_BAND);break}case Ke.OP_BOR:{let je=se(De,we,Ge,Fe),ze=ne(De,we,Ge,Fe),Ye=he(je),Je=he(ze);!1!==Ye&&Je?De.stack[He]=new M.TValue(Q.LUA_TNUMINT,Ye|Je):J.luaT_trybinTM(De,je,ze,He,J.TMS.TM_BOR);break}case Ke.OP_BXOR:{let je=se(De,we,Ge,Fe),ze=ne(De,we,Ge,Fe),Ye=he(je),Je=he(ze);!1!==Ye&&Je?De.stack[He]=new M.TValue(Q.LUA_TNUMINT,Ye^Je):J.luaT_trybinTM(De,je,ze,He,J.TMS.TM_BXOR);break}case Ke.OP_SHL:{let je=se(De,we,Ge,Fe),ze=ne(De,we,Ge,Fe),Ye=he(je),Je=he(ze);!1!==Ye&&Je?De.stack[He]=new M.TValue(Q.LUA_TNUMINT,Ye<<Je):J.luaT_trybinTM(De,je,ze,He,J.TMS.TM_SHL);break}case Ke.OP_SHR:{let je=se(De,we,Ge,Fe),ze=ne(De,we,Ge,Fe),Ye=he(je),Je=he(ze);!1!==Ye&&Je?De.stack[He]=new M.TValue(Q.LUA_TNUMINT,Ye>>Je):J.luaT_trybinTM(De,je,ze,He,J.TMS.TM_SHR);break}case Ke.OP_UNM:{let je=De.stack[ae(De,we,Fe)],ze=xe(je);je.ttisinteger()?De.stack[He]=new M.TValue(Q.LUA_TNUMINT,-je.value):!1===ze?J.luaT_trybinTM(De,je,je,He,J.TMS.TM_UNM):De.stack[He]=new M.TValue(Q.LUA_TNUMFLT,-ze);break}case Ke.OP_BNOT:{let je=De.stack[ae(De,we,Fe)],ze=xe(je);je.ttisinteger()?De.stack[He]=new M.TValue(Q.LUA_TNUMINT,~je.value):J.luaT_trybinTM(De,je,je,He,J.TMS.TM_BNOT);break}case Ke.OP_NOT:{let je=De.stack[ae(De,we,Fe)];De.stack[He]=new M.TValue(Q.LUA_TBOOLEAN,je.l_isfalse());break}case Ke.OP_LEN:{Re(De,He,De.stack[ae(De,we,Fe)]);break}case Ke.OP_CONCAT:{let je=Fe.B,ze=Fe.C;De.top=we+ze+1,Ne(De,ze-je+1),De.stack[He]=De.stack[we+je],De.top=Be.top;break}case Ke.OP_JMP:{_e(De,Be,Fe,0);break}case Ke.OP_EQ:{Le(De,se(De,we,Ge,Fe),ne(De,we,Ge,Fe))===Fe.A?pe(De,Be):Be.l_savedpc++;break}case Ke.OP_LT:{ce(De,se(De,we,Ge,Fe),ne(De,we,Ge,Fe))===Fe.A?pe(De,Be):Be.l_savedpc++;break}case Ke.OP_LE:{de(De,se(De,we,Ge,Fe),ne(De,we,Ge,Fe))===Fe.A?pe(De,Be):Be.l_savedpc++;break}case Ke.OP_TEST:{(Fe.C?De.stack[He].l_isfalse():!De.stack[He].l_isfalse())?Be.l_savedpc++:pe(De,Be);break}case Ke.OP_TESTSET:{let je=De.stack[ae(De,we,Fe)];(Fe.C?je.l_isfalse():!je.l_isfalse())?Be.l_savedpc++:(De.stack[He]=je,pe(De,Be));break}case Ke.OP_CALL:{let je=Fe.B,ze=Fe.C-1;if(0!==je&&(De.top=He+je),Y.luaD_precall(De,He,ze))0<=ze&&(De.top=Be.top);else{Be=De.ci;continue newframe}break}case Ke.OP_TAILCALL:{if(0!==Fe.B&&(De.top=He+Fe.B),Y.luaD_precall(De,He,$));else{let je=De.ci,ze=je.previous,Ye=je.func,Je=je.funcOff,Ze=ze.funcOff,qe=je.l_base+Ye.value.p.numparams;0<Ve.p.p.length&&K.luaF_close(De,ze.l_base);for(let We=0;Je+We<qe;We++)De.stack[Ze+We]=De.stack[Je+We];ze.func=je.func,ze.l_base=Ze+(je.l_base-Je),ze.top=De.top=Ze+(De.top-Je),ze.l_code=je.l_code,ze.l_savedpc=je.l_savedpc,ze.callstatus|=V.CIST_TAIL,ze.next=null,Be=De.ci=ze,E(De.top===ze.l_base+De.stack[Ze].value.p.maxstacksize);continue newframe}break}case Ke.OP_RETURN:{0<Ve.p.p.length&&K.luaF_close(De,we);let je=Y.luaD_poscall(De,Be,He,0===Fe.B?De.top-He:Fe.B-1);if(Be.callstatus&V.CIST_FRESH)return;Be=De.ci,je&&(De.top=Be.top);continue newframe}case Ke.OP_FORLOOP:{if(De.stack[He].ttisinteger()){let je=De.stack[He+2].value,ze=De.stack[He].value+je,Ye=De.stack[He+1].value;(0<je?ze<=Ye:Ye<=ze)&&(Be.l_savedpc+=Fe.sBx,De.stack[He].value=ze,De.stack[He+3]=new M.TValue(Q.LUA_TNUMINT,ze))}else{let je=De.stack[He+2].value,ze=De.stack[He].value+je,Ye=De.stack[He+1].value;(0<je?ze<=Ye:Ye<=ze)&&(Be.l_savedpc+=Fe.sBx,De.stack[He].value=ze,De.stack[He+3]=new M.TValue(Q.LUA_TNUMFLT,ze))}break}case Ke.OP_FORPREP:{let je=De.stack[He],ze=De.stack[He+1],Ye=De.stack[He+2],Je=Ae(ze,Ye.value);if(je.ttisinteger()&&Ye.ttisinteger()&&Je.casted){let Ze=Je.stopnow?0:je.value;ze.value=Je.ilimit,je.value=Ze-Ye.value}else{let Ze=xe(je),qe=xe(ze),We=xe(Ye);!1===qe&&W.luaG_runerror(De,N.to_luastring('\'for\' limit must be a number',!0)),ze.type=Q.LUA_TNUMFLT,ze.value=qe,!1===We&&W.luaG_runerror(De,N.to_luastring('\'for\' step must be a number',!0)),Ye.type=Q.LUA_TNUMFLT,Ye.value=We,!1===Ze&&W.luaG_runerror(De,N.to_luastring('\'for\' initial value must be a number',!0)),je.type=Q.LUA_TNUMFLT,je.value=Ze-We}Be.l_savedpc+=Fe.sBx;break}case Ke.OP_TFORCALL:{let je=He+3;De.stack[je+2]=De.stack[He+2],De.stack[je+1]=De.stack[He+1],De.stack[je]=De.stack[He],De.top=je+3,Y.luaD_call(De,je,Fe.C),De.top=Be.top,Fe=Be.l_code[Be.l_savedpc++],He=te(De,we,Fe),E(Fe.opcode===Ke.OP_TFORLOOP)}case Ke.OP_TFORLOOP:{De.stack[He+1].ttisnil()||(De.stack[He]=De.stack[He+1],Be.l_savedpc+=Fe.sBx);break}case Ke.OP_SETLIST:{let je=Fe.B,ze=Fe.C;0===je&&(je=De.top-He-1),0===ze&&(E(Be.l_code[Be.l_savedpc].opcode===Ke.OP_EXTRAARG),ze=Be.l_code[Be.l_savedpc++].Ax);for(let Ye=De.stack[He].value,Je=(ze-1)*I.LFIELDS_PER_FLUSH+je;0<je;je--)q.luaH_setint(Ye,Je--,De.stack[He+je]);De.top=Be.top;break}case Ke.OP_CLOSURE:{let je=Ve.p.p[Fe.Bx],ze=je.upvalues.length,Ye=je.upvalues,Je=new M.LClosure(De,ze);Je.p=je,De.stack[He]=new M.TValue(Q.LUA_TLCL,Je);for(let Ze=0;Ze<ze;Ze++)Je.upvals[Ze]=Ye[Ze].instack?K.luaF_findupval(De,we+Ye[Ze].idx):Ve.upvals[Ye[Ze].idx],Je.upvals[Ze].refcount++;break}case Ke.OP_VARARG:{let je=Fe.B-1,ze=we-Be.funcOff-Ve.p.numparams-1,Ye;for(0>ze&&(ze=0),0>je&&(je=ze,De.top=He+ze),Ye=0;Ye<je&&Ye<ze;Ye++)De.stack[He+Ye]=De.stack[we-ze+Ye];for(;Ye<je;Ye++)De.stack[He+Ye]=new M.TValue(Q.LUA_TNIL,null);break}case Ke.OP_EXTRAARG:}}},T.exports.luaV_finishOp=function(De){let Ke=De.ci,Be=I.OpCodesI,Ve=Ke.l_base,Ge=Ke.l_code[Ke.l_savedpc-1],we=Ge.opcode;switch(we){case Be.OP_ADD:case Be.OP_SUB:case Be.OP_MUL:case Be.OP_DIV:case Be.OP_IDIV:case Be.OP_BAND:case Be.OP_BOR:case Be.OP_BXOR:case Be.OP_SHL:case Be.OP_SHR:case Be.OP_MOD:case Be.OP_POW:case Be.OP_UNM:case Be.OP_BNOT:case Be.OP_LEN:case Be.OP_GETTABUP:case Be.OP_GETTABLE:case Be.OP_SELF:{De.stack[Ve+Ge.A]=De.stack[--De.top];break}case Be.OP_LE:case Be.OP_LT:case Be.OP_EQ:{let Fe=!De.stack[De.top-1].l_isfalse();De.top--,Ke.callstatus&V.CIST_LEQ&&(E(we===Be.OP_LE),Ke.callstatus^=V.CIST_LEQ,Fe=1===Fe?0:1),E(Ke.l_code[Ke.l_savedpc]===Be.OP_JMP),Fe!==Ge.A&&Ke.l_savedpc++;break}case Be.OP_CONCAT:{let Fe=De.top-1,He=Ge.B,Xe=Fe-1-(Ve+He);De.stack[De.top-2]=De.stack[Fe],1<Xe&&(De.top=Fe-1,Ne(De,Xe)),De.stack[Ke.l_base+Ge.A]=De.stack[De.top-1],De.top=Ke.top;break}case Be.OP_TFORCALL:{E(Ke.l_code[Ke.l_savedpc]===Be.OP_TFORLOOP),De.top=Ke.top;break}case Be.OP_CALL:{0<=Ge.C-1&&(De.top=Ke.top);break}}},T.exports.luaV_finishset=ye,T.exports.luaV_lessequal=de,T.exports.luaV_lessthan=ce,T.exports.luaV_objlen=Re,T.exports.luaV_rawequalobj=function(De,Ke){return Le(null,De,Ke)},T.exports.luaV_tointeger=Te,T.exports.settable=Me,T.exports.tointeger=he,T.exports.tonumber=xe},function(T,O){(function(U){T.exports=U}).call(O,{})},function(T){T.exports=function(U){return U.webpackPolyfill||(U.deprecate=function(){},U.paths=[],!U.children&&(U.children=[]),Object.defineProperty(U,'loaded',{enumerable:!0,get:function(){return U.l}}),Object.defineProperty(U,'id',{enumerable:!0,get:function(){return U.i}}),U.webpackPolyfill=1),U}},function(T){'use strict';const I=0,P=1,M=2,K=3,V=0,F=1,H=2,Y=3,J=[64|M<<4|I<<2|V,64|K<<4|I<<2|F,64|I<<4|I<<2|F,64|P<<4|P<<2|V,64|P<<4|I<<2|V,64|P<<4|I<<2|V,64|P<<4|K<<2|V,64|M<<4|K<<2|V,0|K<<4|K<<2|V,0|P<<4|I<<2|V,0|K<<4|K<<2|V,64|P<<4|P<<2|V,64|M<<4|K<<2|V,64|K<<4|K<<2|V,64|K<<4|K<<2|V,64|K<<4|K<<2|V,64|K<<4|K<<2|V,64|K<<4|K<<2|V,64|K<<4|K<<2|V,64|K<<4|K<<2|V,64|K<<4|K<<2|V,64|K<<4|K<<2|V,64|K<<4|K<<2|V,64|K<<4|K<<2|V,64|K<<4|K<<2|V,64|M<<4|I<<2|V,64|M<<4|I<<2|V,64|M<<4|I<<2|V,64|M<<4|I<<2|V,64|M<<4|M<<2|V,0|M<<4|I<<2|H,128|K<<4|K<<2|V,128|K<<4|K<<2|V,128|K<<4|K<<2|V,128|I<<4|P<<2|V,192|M<<4|P<<2|V,64|P<<4|P<<2|V,64|P<<4|P<<2|V,0|P<<4|I<<2|V,64|M<<4|I<<2|H,64|M<<4|I<<2|H,0|I<<4|P<<2|V,64|M<<4|I<<2|H,0|P<<4|P<<2|V,64|P<<4|I<<2|F,64|P<<4|I<<2|V,0|P<<4|P<<2|Y],te=9,ae=9,ue=te+ae,se=8,ne=te+ae+se,oe=6,_e=0,pe=_e+oe,ce=pe+se,de=ce+te,Le=ce,ge=pe,Ae=(1<<ue)-1,Te=Ae>>1,xe=(1<<se)-1,Ee=1<<ae-1,Ne=function(Qe,$e){return~(-1<<Qe)<<$e},Ie=function(Qe,$e){return~Ne(Qe,$e)},Me=function(Qe,$e,et,at){return Qe.code=Qe.code&Ie(at,et)|$e<<et&Ne(at,et),Ye(Qe)},Fe=function(Qe,$e){return Me(Qe,$e,Le,ue)},Ye=function(Qe){if('number'==typeof Qe)return{code:Qe,opcode:Qe>>_e&Ne(oe,0),A:Qe>>pe&Ne(se,0),B:Qe>>de&Ne(ae,0),C:Qe>>ce&Ne(te,0),Bx:Qe>>Le&Ne(ue,0),Ax:Qe>>ge&Ne(ne,0),sBx:(Qe>>Le&Ne(ue,0))-Te};let $e=Qe.code;return Qe.opcode=$e>>_e&Ne(oe,0),Qe.A=$e>>pe&Ne(se,0),Qe.B=$e>>de&Ne(ae,0),Qe.C=$e>>ce&Ne(te,0),Qe.Bx=$e>>Le&Ne(ue,0),Qe.Ax=$e>>ge&Ne(ne,0),Qe.sBx=($e>>Le&Ne(ue,0))-Te,Qe};T.exports.BITRK=Ee,T.exports.CREATE_ABC=function(Qe,$e,et,at){return Ye(Qe<<_e|$e<<pe|et<<de|at<<ce)},T.exports.CREATE_ABx=function(Qe,$e,et){return Ye(Qe<<_e|$e<<pe|et<<Le)},T.exports.CREATE_Ax=function(Qe,$e){return Ye(Qe<<_e|$e<<ge)},T.exports.GET_OPCODE=function(Qe){return Qe.opcode},T.exports.GETARG_A=function(Qe){return Qe.A},T.exports.GETARG_B=function(Qe){return Qe.B},T.exports.GETARG_C=function(Qe){return Qe.C},T.exports.GETARG_Bx=function(Qe){return Qe.Bx},T.exports.GETARG_Ax=function(Qe){return Qe.Ax},T.exports.GETARG_sBx=function(Qe){return Qe.sBx},T.exports.INDEXK=function(Qe){return Qe&~Ee},T.exports.ISK=function(Qe){return Qe&Ee},T.exports.LFIELDS_PER_FLUSH=50,T.exports.MAXARG_A=xe,T.exports.MAXARG_Ax=(1<<ne)-1,T.exports.MAXARG_B=(1<<ae)-1,T.exports.MAXARG_Bx=Ae,T.exports.MAXARG_C=(1<<te)-1,T.exports.MAXARG_sBx=Te,T.exports.MAXINDEXRK=Ee-1,T.exports.NO_REG=xe,T.exports.OpArgK=K,T.exports.OpArgN=I,T.exports.OpArgR=M,T.exports.OpArgU=P,T.exports.OpCodes=['OP_MOVE','OP_LOADK','OP_LOADKX','OP_LOADBOOL','OP_LOADNIL','OP_GETUPVAL','OP_GETTABUP','OP_GETTABLE','OP_SETTABUP','OP_SETUPVAL','OP_SETTABLE','OP_NEWTABLE','OP_SELF','OP_ADD','OP_SUB','OP_MUL','OP_MOD','OP_POW','OP_DIV','OP_IDIV','OP_BAND','OP_BOR','OP_BXOR','OP_SHL','OP_SHR','OP_UNM','OP_BNOT','OP_NOT','OP_LEN','OP_CONCAT','OP_JMP','OP_EQ','OP_LT','OP_LE','OP_TEST','OP_TESTSET','OP_CALL','OP_TAILCALL','OP_RETURN','OP_FORLOOP','OP_FORPREP','OP_TFORCALL','OP_TFORLOOP','OP_SETLIST','OP_CLOSURE','OP_VARARG','OP_EXTRAARG'],T.exports.OpCodesI={OP_MOVE:0,OP_LOADK:1,OP_LOADKX:2,OP_LOADBOOL:3,OP_LOADNIL:4,OP_GETUPVAL:5,OP_GETTABUP:6,OP_GETTABLE:7,OP_SETTABUP:8,OP_SETUPVAL:9,OP_SETTABLE:10,OP_NEWTABLE:11,OP_SELF:12,OP_ADD:13,OP_SUB:14,OP_MUL:15,OP_MOD:16,OP_POW:17,OP_DIV:18,OP_IDIV:19,OP_BAND:20,OP_BOR:21,OP_BXOR:22,OP_SHL:23,OP_SHR:24,OP_UNM:25,OP_BNOT:26,OP_NOT:27,OP_LEN:28,OP_CONCAT:29,OP_JMP:30,OP_EQ:31,OP_LT:32,OP_LE:33,OP_TEST:34,OP_TESTSET:35,OP_CALL:36,OP_TAILCALL:37,OP_RETURN:38,OP_FORLOOP:39,OP_FORPREP:40,OP_TFORCALL:41,OP_TFORLOOP:42,OP_SETLIST:43,OP_CLOSURE:44,OP_VARARG:45,OP_EXTRAARG:46},T.exports.POS_A=pe,T.exports.POS_Ax=ge,T.exports.POS_B=de,T.exports.POS_Bx=Le,T.exports.POS_C=ce,T.exports.POS_OP=_e,T.exports.RKASK=function(Qe){return Qe|Ee},T.exports.SETARG_A=function(Qe,$e){return Me(Qe,$e,pe,se)},T.exports.SETARG_Ax=function(Qe,$e){return Me(Qe,$e,ge,ne)},T.exports.SETARG_B=function(Qe,$e){return Me(Qe,$e,de,ae)},T.exports.SETARG_Bx=Fe,T.exports.SETARG_C=function(Qe,$e){return Me(Qe,$e,ce,te)},T.exports.SETARG_sBx=function(Qe,$e){return Fe(Qe,$e+Te)},T.exports.SET_OPCODE=function(Qe,$e){return Qe.code=Qe.code&Ie(oe,_e)|$e<<_e&Ne(oe,_e),Ye(Qe)},T.exports.SIZE_A=se,T.exports.SIZE_Ax=ne,T.exports.SIZE_B=ae,T.exports.SIZE_Bx=ue,T.exports.SIZE_C=te,T.exports.SIZE_OP=oe,T.exports.fullins=Ye,T.exports.getBMode=function(Qe){return 3&J[Qe]>>4},T.exports.getCMode=function(Qe){return 3&J[Qe]>>2},T.exports.getOpMode=function(Qe){return 3&J[Qe]},T.exports.iABC=V,T.exports.iABx=F,T.exports.iAsBx=H,T.exports.iAx=Y,T.exports.testAMode=function(Qe){return 64&J[Qe]},T.exports.testTMode=function(Qe){return 128&J[Qe]}},function(T){function U(){throw new Error('setTimeout has not been defined')}function E(){throw new Error('clearTimeout has not been defined')}function N($){if(H===setTimeout)return setTimeout($,0);if((H===U||!H)&&setTimeout)return H=setTimeout,setTimeout($,0);try{return H($,0)}catch(ee){try{return H.call(null,$,0)}catch(te){return H.call(this,$,0)}}}function I($){if(Y===clearTimeout)return clearTimeout($);if((Y===E||!Y)&&clearTimeout)return Y=clearTimeout,clearTimeout($);try{return Y($)}catch(ee){try{return Y.call(null,$)}catch(te){return Y.call(this,$)}}}function P(){q&&W&&(q=!1,W.length?J=W.concat(J):Q=-1,J.length&&M())}function M(){if(!q){var $=N(P);q=!0;for(var ee=J.length;ee;){for(W=J,J=[];++Q<ee;)W&&W[Q].run();Q=-1,ee=J.length}W=null,q=!1,I($)}}function K($,ee){this.fun=$,this.array=ee}function V(){}var F=T.exports={},H,Y;(function(){try{H='function'==typeof setTimeout?setTimeout:U}catch($){H=U}try{Y='function'==typeof clearTimeout?clearTimeout:E}catch($){Y=E}})();var J=[],q=!1,Q=-1,W;F.nextTick=function($){var ee=Array(arguments.length-1);if(1<arguments.length)for(var te=1;te<arguments.length;te++)ee[te-1]=arguments[te];J.push(new K($,ee)),1!==J.length||q||N(M)},K.prototype.run=function(){this.fun.apply(null,this.array)},F.title='browser',F.browser=!0,F.env={},F.argv=[],F.version='',F.versions={},F.on=V,F.addListener=V,F.once=V,F.off=V,F.removeListener=V,F.removeAllListeners=V,F.emit=V,F.prependListener=V,F.prependOnceListener=V,F.listeners=function(){return[]},F.binding=function(){throw new Error('process.binding is not supported')},F.cwd=function(){return'/'},F.chdir=function(){throw new Error('process.chdir is not supported')},F.umask=function(){return 0}},function(T,O,U){'use strict';const E=U(0),P=-1,M=function(V){let H=V.reader(V.L,V.data),F;return null===H?P:(H instanceof DataView?(V.buffer=new Uint8Array(H.buffer,H.byteOffset,H.byteLength),V.off=0,F=H.byteLength-H.byteOffset):(E('string'!=typeof H,'Should only load binary of array of bytes'),V.buffer=H,V.off=0,F=H.length),0===F)?P:(V.n=F-1,V.buffer[V.off++])};T.exports.EOZ=P,T.exports.luaZ_fill=M,T.exports.luaZ_read=function(V,F,H,Y){for(;Y;){if(0===V.n){if(M(V)===P)return Y;V.n++,V.off--}let J=Y<=V.n?Y:V.n;for(let q=0;q<J;q++)F[H++]=V.buffer[V.off++];V.n-=J,0===V.n&&(V.buffer=null),Y-=J}return 0},T.exports.MBuffer=class{constructor(){this.buffer=null,this.n=0}},T.exports.ZIO=class{constructor(V,F,H){this.L=V,E('function'==typeof F,'ZIO requires a reader'),this.reader=F,this.data=H,this.n=0,this.buffer=null,this.off=0}zgetc(){return 0<this.n--?this.buffer[this.off++]:M(this)}}},function(T,O,U){'use strict';const E=U(0),N=U(1),I=U(8),P=U(9),M=U(42),K=U(11),V=U(4),F=U(14),H=U(7),Y=U(12),J=U(13),q=U(15),W=U(10),Q=U(20),$=K.MAXUPVAL,ee=N.constant_types,te=N.thread_status,ae=V.TValue,ue=V.CClosure,se=function(Ea){return Ea!==V.luaO_nilobject},pe=function(Ea,va){let Ra=Ea.ci;if(0<va){let ba=Ra.funcOff+va;return E(va<=Ra.top-(Ra.funcOff+1),'unacceptable index'),ba>=Ea.top?V.luaO_nilobject:Ea.stack[ba]}return va>N.LUA_REGISTRYINDEX?(E(0!=va&&-va<=Ea.top,'invalid index'),Ea.stack[Ea.top+va]):va===N.LUA_REGISTRYINDEX?Ea.l_G.l_registry:(va=N.LUA_REGISTRYINDEX-va,E(va<=$+1,'upvalue index too large'),Ra.func.ttislcf()?V.luaO_nilobject:va<=Ra.func.value.nupvalues?Ra.func.value.upvalue[va-1]:V.luaO_nilobject)},ce=function(Ea,va){let Ra=Ea.ci;if(0<va){let ba=Ra.funcOff+va;return E(va<=Ra.top-(Ra.funcOff+1),'unacceptable index'),ba>=Ea.top?null:ba}return va>N.LUA_REGISTRYINDEX?(E(0!=va&&-va<=Ea.top,'invalid index'),Ea.top+va):va===N.LUA_REGISTRYINDEX?null:(va=N.LUA_REGISTRYINDEX-va,E(va<=$+1,'upvalue index too large'),Ra.func.ttislcf()?null:va<=Ra.func.nupvalues?va-1:null)},he=function(Ea,va){let Ra=Ea.ci.funcOff;if(0<=va){for(;Ea.top<Ra+1+va;)Ea.stack[Ea.top++]=new ae(ee.LUA_TNIL,null);Ea.top=Ra+1+va}else{E(-(va+1)<=Ea.top-(Ra+1),'invalid new top');for(let ba=Ea.top+va+1;Ea.top>ba;)delete Ea.stack[--Ea.top]}},xe=function(Ea,va){he(Ea,-va-1)},Oe=function(Ea,va,Ra){for(;va<Ra;va++,Ra--){let ba=Ea.stack[va];Ea.stack[va]=Ea.stack[Ra],Ea.stack[Ra]=ba}},Ue=function(Ea,va,Ra){let ba=Ea.stack[Ea.top-1],Sa=pe(Ea,va),Na=ce(Ea,va);E(Sa!==V.luaO_nilobject&&va>N.LUA_REGISTRYINDEX,'index not in the stack'),E((0<=Ra?Ra:-Ra)<=Ea.top-va,'invalid \'n\'');let Ia=0<=Ra?Ea.top-1-Ra:Na-Ra-1;Oe(Ea,Na,Ia),Oe(Ea,Ia+1,Ea.top-1),Oe(Ea,Na,Ea.top-1)},Ee=function(Ea,va,Ra){let ba=pe(Ea,va);Ea.stack[ce(Ea,Ra)]=new ae(ba.type,ba.value)},De=function(Ea,va,Ra){if(E('function'==typeof va),E('number'==typeof Ra),0===Ra)Ea.stack[Ea.top]=new ae(ee.LUA_TLCF,va);else{E(Ra<Ea.top-Ea.ci.funcOff,'not enough elements in the stack'),E(Ra<=$,'upvalue index too large');let ba=new ue(Ea,va,Ra);for(Ea.top-=Ra;Ra--;)ba.upvalue[Ra].setfrom(Ea.stack[Ea.top+Ra]),delete Ea.stack[Ea.top+Ra];Ea.stack[Ea.top]=new ae(ee.LUA_TCCL,ba)}Ea.top++,E(Ea.top<=Ea.ci.top,'stack overflow')},Be=function(Ea,va){De(Ea,va,0)},Xe=function(Ea,va,Ra){E(Array.isArray(Ra),'key must be an array of bytes');let ba=new ae(ee.LUA_TLNGSTR,H.luaS_new(Ea,Ra));E(1<Ea.top-Ea.ci.funcOff,'not enough elements in the stack'),Ea.stack[Ea.top++]=ba,q.settable(Ea,va,Ea.stack[Ea.top-1],Ea.stack[Ea.top-2]),delete Ea.stack[--Ea.top],delete Ea.stack[--Ea.top]},je=function(Ea,va){Xe(Ea,W.luaH_getint(Ea.l_G.l_registry.value,N.LUA_RIDX_GLOBALS),va)},$e=function(Ea,va,Ra){E(Array.isArray(Ra),'key must be an array of bytes');let ba=new ae(ee.LUA_TLNGSTR,H.luaS_new(Ea,Ra));return Ea.stack[Ea.top++]=ba,E(Ea.top<=Ea.ci.top,'stack overflow'),q.gettable(Ea,va,Ea.stack[Ea.top-1],Ea.top-1),Ea.stack[Ea.top-1].ttnov()},et=function(Ea,va,Ra){let ba=pe(Ea,va);return E(ba.ttistable(),'table expected'),Ea.stack[Ea.top++]=W.luaH_getint(ba.value,Ra),E(Ea.top<=Ea.ci.top,'stack overflow'),Ea.stack[Ea.top-1].ttnov()},ut=function(Ea){let ba=new V.TValue(ee.LUA_TTABLE,W.luaH_new(Ea));Ea.stack[Ea.top++]=ba,E(Ea.top<=Ea.ci.top,'stack overflow')},rt=function(Ea,va){return{id:Ea.l_G.id_counter++,metatable:null,uservalue:new V.TValue(ee.LUA_TNIL,null),len:va,data:Object.create(null)}},nt=function(Ea,va,Ra){switch(va.ttype()){case ee.LUA_TCCL:{let ba=va.value;return 1<=Ra&&Ra<=ba.nupvalues?{name:[],val:ba.upvalue[Ra-1]}:null}case ee.LUA_TLCL:{let ba=va.value,Sa=ba.p;if(!(1<=Ra&&Ra<=Sa.upvalues.length))return null;let Na=Sa.upvalues[Ra-1].name;return{name:Na?Na.getstr():N.to_luastring('(*no name)',!0),val:ba.upvals[Ra-1].val()}}default:return null;}},xt=function(Ea,va){let Ra=pe(Ea,va);return Ra.ttisstring()||Ra.ttisnumber()?Ra.ttisstring()?Ra.svalue():N.to_luastring(`${Ra.value}`):null},Ut=function(Ea,va){let Ra=pe(Ea,va);return Ra.ttisstring()||Ra.ttisnumber()?Ra.ttisstring()?Ra.jsstring():`${Ra.value}`:null},Pt=new WeakMap,yt=function(Ea,va,Ra){let ba=function(Sa){E(Sa instanceof F.lua_State&&Ea===Sa.l_G,'must be from same global state'),Sa.stack[Sa.top++]=new ae(va,Ra)};return Pt.set(ba,Ea),ba},Gt=function(Ea,va){P.luaD_callnoyield(Ea,va.funcOff,va.nresults)},wt=function(Ea,va){let Ra=pe(Ea,va);return se(Ra)?Ra.ttnov():ee.LUA_TNONE},_a=function(Ea,va,Ra,ba,Sa){E(null===Sa||!(Ea.ci.callstatus&F.CIST_LUA),'cannot use continuations inside hooks'),E(va+1<Ea.top-Ea.ci.funcOff,'not enough elements in the stack'),E(Ea.status===te.LUA_OK,'cannot do calls on non-normal thread'),E(va===N.LUA_MULTRET||(Ea.ci.top-Ea.top>=va-Ra,'results from function overflow current stack size'));let Na=Ea.top-(va+1);null!==Sa&&0===Ea.nny?(Ea.ci.c_k=Sa,Ea.ci.c_ctx=ba,P.luaD_call(Ea,Na,Ra)):P.luaD_callnoyield(Ea,Na,Ra),Ra===N.LUA_MULTRET&&Ea.ci.top<Ea.top&&(Ea.ci.top=Ea.top)},pa=function(Ea,va,Ra,ba,Sa,Na){E(va+1<Ea.top-Ea.ci.funcOff,'not enough elements in the stack'),E(Ea.status===te.LUA_OK,'cannot do calls on non-normal thread'),E(va===N.LUA_MULTRET||(Ea.ci.top-Ea.top>=va-Ra,'results from function overflow current stack size'));let Ia={func:null,funcOff:NaN,nresults:NaN},Ca,Pa;if(Pa=0===ba?0:ce(Ea,ba),Ia.funcOff=Ea.top-(va+1),Ia.func=Ea.stack[Ia.funcOff],null===Na||0<Ea.nny)Ia.nresults=Ra,Ca=P.luaD_pcall(Ea,Gt,Ia,Ia.funcOff,Pa);else{let Ma=Ea.ci;Ma.c_k=Na,Ma.c_ctx=Sa,Ma.extra=Ia.funcOff,Ma.c_old_errfunc=Ea.errfunc,Ea.errfunc=Pa,Ma.callstatus&=~F.CIST_OAH|Ea.allowhook,Ma.callstatus|=F.CIST_YPCALL,P.luaD_call(Ea,Ia.funcOff,Ra),Ma.callstatus&=~F.CIST_YPCALL,Ea.errfunc=Ma.c_old_errfunc,Ca=te.LUA_OK}return Ra===N.LUA_MULTRET&&Ea.ci.top<Ea.top&&(Ea.ci.top=Ea.top),Ca},Aa=function(Ea,va,Ra){let Sa=pe(Ea,va);E(Sa.ttisLclosure(),'Lua function expected');let Na=Sa.value;return E(1<=Ra&&Ra<=Na.p.upvalues.length,'invalid upvalue index'),{closure:Na,upval:Na.upvals[Ra-1],upvalOff:Ra-1}};T.exports.index2addr=pe,T.exports.index2addr_=ce,T.exports.lua_absindex=function(Ea,va){return 0<va||va<=N.LUA_REGISTRYINDEX?va:Ea.top-Ea.ci.funcOff+va},T.exports.lua_arith=function(Ea,va){va!==N.LUA_OPUNM&&va!==N.LUA_OPBNOT?E(2<Ea.top-Ea.ci.funcOff,'not enough elements in the stack'):(E(1<Ea.top-Ea.ci.funcOff,'not enough elements in the stack'),Ea.stack[Ea.top++]=Ea.stack[Ea.top-1]),V.luaO_arith(Ea,va,Ea.stack[Ea.top-2],Ea.stack[Ea.top-1],Ea.stack[Ea.top-2]),Ea.op--},T.exports.lua_atpanic=function(Ea,va){let Ra=Ea.l_G.panic;return Ea.l_G.panic=va,Ra},T.exports.lua_atnativeerror=function(Ea,va){let Ra=Ea.l_G.atnativeerror;return Ea.l_G.atnativeerror=va,Ra},T.exports.lua_call=function(Ea,va,Ra){_a(Ea,va,Ra,0,null)},T.exports.lua_callk=_a,T.exports.lua_checkstack=function(Ea){return Ea.stack.length<J.LUAI_MAXSTACK},T.exports.lua_compare=function(Ea,va,Ra,ba){let Sa=pe(Ea,va),Na=pe(Ea,Ra),Ia=0;return se(Sa)&&se(Na)&&(ba===N.LUA_OPEQ?Ia=q.luaV_equalobj(Ea,Sa,Na):ba===N.LUA_OPLT?Ia=q.luaV_lessthan(Ea,Sa,Na):ba===N.LUA_OPLE?Ia=q.luaV_lessequal(Ea,Sa,Na):E(!1,'invalid option')),Ia},T.exports.lua_concat=function(Ea,va){E(va<Ea.top-Ea.ci.funcOff,'not enough elements in the stack'),2<=va?q.luaV_concat(Ea,va):0==va&&(Ea.stack[Ea.top++]=new ae(ee.LUA_TLNGSTR,H.luaS_newliteral(Ea,[])),E(Ea.top<=Ea.ci.top,'stack overflow'))},T.exports.lua_copy=Ee,T.exports.lua_createtable=ut,T.exports.lua_dump=function(Ea,va,Ra,ba){E(1<Ea.top-Ea.ci.funcOff,'not enough elements in the stack');let Sa=Ea.stack[Ea.top-1];return Sa.ttisLclosure()?M.luaU_dump(Ea,Sa.value.p,va,Ra,ba):1},T.exports.lua_error=function(Ea){E(1<Ea.top-Ea.ci.funcOff,'not enough elements in the stack'),I.luaG_errormsg(Ea)},T.exports.lua_gc=function(){},T.exports.lua_getallocf=function(){return console.warn('lua_getallocf is not available'),0},T.exports.lua_getextraspace=function(){return console.warn('lua_getextraspace is not available'),0},T.exports.lua_getfield=function(Ea,va,Ra){return $e(Ea,pe(Ea,va),Ra)},T.exports.lua_getglobal=function(Ea,va){return $e(Ea,W.luaH_getint(Ea.l_G.l_registry.value,N.LUA_RIDX_GLOBALS),va)},T.exports.lua_geti=function(Ea,va,Ra){E('number'==typeof Ra&&(0|Ra)===Ra);let ba=pe(Ea,va);return Ea.stack[Ea.top++]=new ae(ee.LUA_TNUMINT,Ra),E(Ea.top<=Ea.ci.top,'stack overflow'),q.gettable(Ea,ba,Ea.stack[Ea.top-1],Ea.top-1),Ea.stack[Ea.top-1].ttnov()},T.exports.lua_getmetatable=function(Ea,va){let Ra=pe(Ea,va),Sa=!1,ba;switch(Ra.ttnov()){case ee.LUA_TTABLE:case ee.LUA_TUSERDATA:ba=Ra.value.metatable;break;default:ba=Ea.l_G.mt[Ra.ttnov()];}return null!==ba&&void 0!==ba&&(Ea.stack[Ea.top++]=new ae(ee.LUA_TTABLE,ba),E(Ea.top<=Ea.ci.top,'stack overflow'),Sa=!0),Sa},T.exports.lua_gettable=function(Ea,va){let Ra=pe(Ea,va);return q.gettable(Ea,Ra,Ea.stack[Ea.top-1],Ea.top-1),Ea.stack[Ea.top-1].ttnov()},T.exports.lua_gettop=function(Ea){return Ea.top-(Ea.ci.funcOff+1)},T.exports.lua_getupvalue=function(Ea,va,Ra){let ba=nt(Ea,pe(Ea,va),Ra);if(ba){let Sa=ba.name,Na=ba.val;return Ea.stack[Ea.top++]=new ae(Na.type,Na.value),Sa}return null},T.exports.lua_getuservalue=function(Ea,va){let Ra=pe(Ea,va);E(Ea,Ra.ttisfulluserdata(),'full userdata expected');let ba=Ra.value.uservalue;return Ea.stack[Ea.top++]=new ae(ba.type,ba.value),E(Ea.top<=Ea.ci.top,'stack overflow'),Ea.stack[Ea.top-1].ttnov()},T.exports.lua_insert=function(Ea,va){Ue(Ea,va,1)},T.exports.lua_isboolean=function(Ea,va){return wt(Ea,va)===ee.LUA_TBOOLEAN},T.exports.lua_iscfunction=function(Ea,va){let Ra=pe(Ea,va);return Ra.ttislcf(Ra)||Ra.ttisCclosure()},T.exports.lua_isfunction=function(Ea,va){return wt(Ea,va)===ee.LUA_TFUNCTION},T.exports.lua_isinteger=function(Ea,va){return pe(Ea,va).ttisinteger()},T.exports.lua_islightuserdata=function(Ea,va){return wt(Ea,va)===ee.LUA_TLIGHTUSERDATA},T.exports.lua_isnil=function(Ea,va){return wt(Ea,va)===ee.LUA_TNIL},T.exports.lua_isnone=function(Ea,va){return wt(Ea,va)===ee.LUA_TNONE},T.exports.lua_isnoneornil=function(Ea,va){return 0>=wt(Ea,va)},T.exports.lua_isnumber=function(Ea,va){return!1!==q.tonumber(pe(Ea,va))},T.exports.lua_isproxy=function(Ea,va){let Ra=Pt.get(Ea);return!!Ra&&(null===va||va.l_G===Ra)},T.exports.lua_isstring=function(Ea,va){let Ra=pe(Ea,va);return Ra.ttisstring()||Ra.ttisnumber()},T.exports.lua_istable=function(Ea,va){return pe(Ea,va).ttistable()},T.exports.lua_isthread=function(Ea,va){return wt(Ea,va)===ee.LUA_TTHREAD},T.exports.lua_isuserdata=function(Ea,va){let Ra=pe(Ea,va);return Ra.ttisfulluserdata(Ra)||Ra.ttislightuserdata()},T.exports.lua_len=function(Ea,va){let Ra=pe(Ea,va);q.luaV_objlen(Ea,Ea.top++,Ra),E(Ea.top<=Ea.ci.top,'stack overflow')},T.exports.lua_load=function(Ea,va,Ra,ba,Sa){E(Array.isArray(ba),'lua_load expect an array of byte as chunkname'),E(!Sa||Array.isArray(Sa),'lua_load expect an array of byte as mode'),ba||(ba=[N.char['?']]);let Na=new Q.ZIO(Ea,va,Ra),Ia=P.luaD_protectedparser(Ea,Na,ba,Sa);if(Ia===te.LUA_OK){let Ca=Ea.stack[Ea.top-1].value;if(1<=Ca.nupvalues){let Pa=W.luaH_getint(Ea.l_G.l_registry.value,N.LUA_RIDX_GLOBALS);Ca.upvals[0].value.setfrom(Pa)}}return Ia},T.exports.lua_newtable=function(Ea){ut(Ea,0,0)},T.exports.lua_newuserdata=function(Ea,va){let Ra=rt(Ea,va);return Ea.stack[Ea.top++]=new V.TValue(ee.LUA_TUSERDATA,Ra),E(Ea.top<=Ea.ci.top,'stack overflow'),Ra.data},T.exports.lua_next=function(Ea,va){let Ra=pe(Ea,va);E(Ra.ttistable(),'table expected');let ba=W.luaH_next(Ea,Ra.value,Ea.top-1);return ba?(Ea.top++,E(Ea.top<=Ea.ci.top,'stack overflow'),1):(Ea.top--,0)},T.exports.lua_pcall=function(Ea,va,Ra,ba){return pa(Ea,va,Ra,ba,0,null)},T.exports.lua_pcallk=pa,T.exports.lua_pop=xe,T.exports.lua_pushboolean=function(Ea,va){Ea.stack[Ea.top++]=new ae(ee.LUA_TBOOLEAN,!!va),E(Ea.top<=Ea.ci.top,'stack overflow')},T.exports.lua_pushcclosure=De,T.exports.lua_pushcfunction=Be,T.exports.lua_pushfstring=function(Ea,va,...Ra){return E(Array.isArray(va)),V.luaO_pushvfstring(Ea,va,Ra)},T.exports.lua_pushglobaltable=function(Ea){et(Ea,N.LUA_REGISTRYINDEX,N.LUA_RIDX_GLOBALS)},T.exports.lua_pushinteger=function(Ea,va){E('number'==typeof va&&(0|va)===va),Ea.stack[Ea.top++]=new ae(ee.LUA_TNUMINT,va),E(Ea.top<=Ea.ci.top,'stack overflow')},T.exports.lua_pushjsclosure=De,T.exports.lua_pushjsfunction=Be,T.exports.lua_pushlightuserdata=function(Ea,va){Ea.stack[Ea.top++]=new ae(ee.LUA_TLIGHTUSERDATA,va),E(Ea.top<=Ea.ci.top,'stack overflow')},T.exports.lua_pushliteral=function(Ea,va){if(E('string'==typeof va||void 0===va||null===va,'lua_pushliteral expects a JS string'),void 0===va||null===va)Ea.stack[Ea.top]=new ae(ee.LUA_TNIL,null);else{let Ra=new ae(ee.LUA_TLNGSTR,H.luaS_newliteral(Ea,va));Ea.stack[Ea.top]=Ra}return Ea.top++,E(Ea.top<=Ea.ci.top,'stack overflow'),va},T.exports.lua_pushlstring=function(Ea,va,Ra){E(Array.isArray(va),'lua_pushlstring expects array of byte'),E('number'==typeof Ra);let ba=new ae(ee.LUA_TLNGSTR,H.luaS_bless(Ea,va.slice(0,Ra)));return Ea.stack[Ea.top++]=ba,E(Ea.top<=Ea.ci.top,'stack overflow'),ba.value},T.exports.lua_pushnil=function(Ea){Ea.stack[Ea.top++]=new ae(ee.LUA_TNIL,null),E(Ea.top<=Ea.ci.top,'stack overflow')},T.exports.lua_pushnumber=function(Ea,va){E('number'==typeof va),Ea.stack[Ea.top++]=new ae(ee.LUA_TNUMFLT,va),E(Ea.top<=Ea.ci.top,'stack overflow')},T.exports.lua_pushstring=function(Ea,va){return E(Array.isArray(va)||void 0===va||null===va,'lua_pushstring expects array of byte'),Ea.stack[Ea.top]=void 0===va||null===va?new ae(ee.LUA_TNIL,null):new ae(ee.LUA_TLNGSTR,H.luaS_new(Ea,va)),Ea.top++,E(Ea.top<=Ea.ci.top,'stack overflow'),va},T.exports.lua_pushthread=function(Ea){return Ea.stack[Ea.top++]=new ae(ee.LUA_TTHREAD,Ea),E(Ea.top<=Ea.ci.top,'stack overflow'),Ea.l_G.mainthread===Ea},T.exports.lua_pushvalue=function(Ea,va){Ea.stack[Ea.top]=pe(Ea,va),Ea.top++,E(Ea.top<=Ea.ci.top,'stack overflow')},T.exports.lua_pushvfstring=function(Ea,va,Ra){return E(Array.isArray(va)),V.luaO_pushvfstring(Ea,va,Ra)},T.exports.lua_rawequal=function(Ea,va,Ra){let ba=pe(Ea,va),Sa=pe(Ea,Ra);return se(ba)&&se(Sa)?q.luaV_equalobj(null,ba,Sa):0},T.exports.lua_rawget=function(Ea,va){let Ra=pe(Ea,va);return E(Ra.ttistable(Ra),'table expected'),Ea.stack[Ea.top-1]=W.luaH_get(Ra.value,Ea.stack[Ea.top-1]),Ea.stack[Ea.top-1].ttnov()},T.exports.lua_rawgeti=et,T.exports.lua_rawgetp=function(Ea,va,Ra){let ba=pe(Ea,va);E(ba.ttistable(),'table expected');let Sa=new ae(ee.LUA_TLIGHTUSERDATA,Ra);return Ea.stack[Ea.top++]=W.luaH_get(ba.value,Sa),E(Ea.top<=Ea.ci.top,'stack overflow'),Ea.stack[Ea.top-1].ttnov()},T.exports.lua_rawlen=function(Ea,va){let Ra=pe(Ea,va);switch(Ra.ttype()){case ee.LUA_TSHRSTR:case ee.LUA_TLNGSTR:return Ra.vslen();case ee.LUA_TUSERDATA:return Ra.len;case ee.LUA_TTABLE:return W.luaH_getn(Ra.value);default:return 0;}},T.exports.lua_rawset=function(Ea,va){E(2<Ea.top-Ea.ci.funcOff,'not enough elements in the stack');let Ra=pe(Ea,va);E(Ra.ttistable(),'table expected');let ba=Ea.stack[Ea.top-2],Sa=Ea.stack[Ea.top-1];if(Sa.ttisnil())W.luaH_delete(Ra.value,ba);else{let Na=W.luaH_set(Ra.value,ba);Na.setfrom(Sa)}Ea.top-=2},T.exports.lua_rawseti=function(Ea,va,Ra){E(2<Ea.top-Ea.ci.funcOff,'not enough elements in the stack');let ba=pe(Ea,va);E(ba.ttistable(),'table expected'),W.luaH_setint(ba.value,Ra,Ea.stack[Ea.top-1]),delete Ea.stack[--Ea.top]},T.exports.lua_rawsetp=function(Ea,va,Ra){E(1<Ea.top-Ea.ci.funcOff,'not enough elements in the stack');let ba=pe(Ea,va);E(Ea,ba.ttistable(),'table expected');let Sa=new ae(ee.LUA_TLIGHTUSERDATA,Ra),Na=Ea.stack[Ea.top-1];if(Na.ttisnil())W.luaH_delete(ba.value,Sa);else{let Ia=W.luaH_set(ba.value,Sa);Ia.setfrom(Na)}Ea.top--},T.exports.lua_register=function(Ea,va,Ra){Be(Ea,Ra),je(Ea,va)},T.exports.lua_remove=function(Ea,va){Ue(Ea,va,-1),xe(Ea,1)},T.exports.lua_replace=function(Ea,va){Ee(Ea,-1,va),xe(Ea,1)},T.exports.lua_rotate=Ue,T.exports.lua_setallocf=function(){return console.warn('lua_setallocf is not available'),0},T.exports.lua_setfield=function(Ea,va,Ra){Xe(Ea,pe(Ea,va),Ra)},T.exports.lua_setglobal=je,T.exports.lua_seti=function(Ea,va,Ra){E('number'==typeof Ra&&(0|Ra)===Ra),E(1<Ea.top-Ea.ci.funcOff,'not enough elements in the stack');let ba=pe(Ea,va);Ea.stack[Ea.top++]=new ae(ee.LUA_TNUMINT,Ra),E(Ea.top<=Ea.ci.top,'stack overflow'),q.settable(Ea,ba,Ea.stack[Ea.top-1],Ea.stack[Ea.top-2]),delete Ea.stack[--Ea.top],delete Ea.stack[--Ea.top]},T.exports.lua_setmetatable=function(Ea,va){E(1<Ea.top-Ea.ci.funcOff,'not enough elements in the stack');let ba=pe(Ea,va),Ra;switch(Ea.stack[Ea.top-1].ttisnil()?Ra=null:(E(Ea.stack[Ea.top-1].ttistable(),'table expected'),Ra=Ea.stack[Ea.top-1].value),ba.ttnov()){case ee.LUA_TUSERDATA:case ee.LUA_TTABLE:{ba.value.metatable=Ra;break}default:{Ea.l_G.mt[ba.ttnov()]=Ra;break}}return delete Ea.stack[--Ea.top],!0},T.exports.lua_settable=function(Ea,va){E(2<Ea.top-Ea.ci.funcOff,'not enough elements in the stack');let Ra=pe(Ea,va);q.settable(Ea,Ra,Ea.stack[Ea.top-2],Ea.stack[Ea.top-1]),Ea.top-=2},T.exports.lua_settop=he,T.exports.lua_setupvalue=function(Ea,va,Ra){let ba=pe(Ea,va);E(1<Ea.top-Ea.ci.funcOff,'not enough elements in the stack');let Sa=nt(Ea,ba,Ra);if(Sa){let Na=Sa.name,Ia=Sa.val;return Ea.top--,Ia.type=Ea.stack[Ea.top].type,Ia.value=Ea.stack[Ea.top].value,Na}return null},T.exports.lua_setuservalue=function(Ea,va){E(1<Ea.top-Ea.ci.funcOff,'not enough elements in the stack');let Ra=pe(Ea,va);E(Ea,Ra.ttisfulluserdata(),'full userdata expected'),Ra.value.uservalue.setfrom(Ea.stack[Ea.top-1]),delete Ea.stack[--Ea.top]},T.exports.lua_status=function(Ea){return Ea.status},T.exports.lua_stringtonumber=function(Ea,va){let Ra=V.luaO_str2num(va);return Ra?(Ea.stack[Ea.top++]=Ra,E(Ea.top<=Ea.ci.top,'stack overflow'),va.length):0},T.exports.lua_toboolean=function(Ea,va){let Ra=pe(Ea,va);return!Ra.l_isfalse()},T.exports.lua_tocfunction=function(Ea,va){let Ra=pe(Ea,va);return Ra.ttislcf()||Ra.ttisCclosure()?Ra.value:null},T.exports.lua_todataview=function(Ea,va){let Ra=pe(Ea,va);if(!Ra.ttisstring()&&!Ra.ttisnumber())return null;let ba=new DataView(new ArrayBuffer(Ra.vslen()));return Ra.svalue().forEach((Sa,Na)=>ba.setUint8(Na,Sa,!0)),ba},T.exports.lua_tointeger=function(Ea,va){return q.tointeger(pe(Ea,va))},T.exports.lua_tointegerx=function(Ea,va){return q.tointeger(pe(Ea,va))},T.exports.lua_tojsstring=Ut,T.exports.lua_toljsstring=Ut,T.exports.lua_tolstring=xt,T.exports.lua_tonumber=function(Ea,va){return q.tonumber(pe(Ea,va))},T.exports.lua_topointer=function(Ea,va){let Ra=pe(Ea,va);switch(Ra.ttype()){case ee.LUA_TTABLE:case ee.LUA_TLCL:case ee.LUA_TCCL:case ee.LUA_TLCF:case ee.LUA_TTHREAD:case ee.LUA_TUSERDATA:case ee.LUA_TLIGHTUSERDATA:return Ra.value;default:return null;}},T.exports.lua_toproxy=function(Ea,va){let Ra=pe(Ea,va);return yt(Ea.l_G,Ra.type,Ra.value)},T.exports.lua_tostring=xt,T.exports.lua_tothread=function(Ea,va){let Ra=pe(Ea,va);return Ra.ttisthread()?Ra.value:null},T.exports.lua_touserdata=function(Ea,va){let Ra=pe(Ea,va);switch(Ra.ttnov()){case ee.LUA_TUSERDATA:return Ra.value.data;case ee.LUA_TLIGHTUSERDATA:return Ra.value;default:return null;}},T.exports.lua_type=wt,T.exports.lua_typename=function(Ea,va){return E(ee.LUA_TNONE<=va&&va<ee.LUA_NUMTAGS,'invalid tag'),Y.ttypename(va)},T.exports.lua_upvalueid=function(Ea,va,Ra){let ba=pe(Ea,va);switch(ba.ttype()){case ee.LUA_TLCL:return Aa(Ea,va,Ra,null).upval;case ee.LUA_TCCL:{let Sa=ba.value;return E(1<=Ra&&Ra<=Sa.nupvalues,'invalid upvalue index'),Sa.upvalue[Ra-1]}default:return E(!1,'closure expected'),null;}},T.exports.lua_upvaluejoin=function(Ea,va,Ra,ba,Sa){let Na=Aa(Ea,va,Ra),Ia=Aa(Ea,ba,Sa),Ca=Na.upvalOff,Pa=Ia.upval,Ma=Na.closure;Ma.upvals[Ca]=Pa},T.exports.lua_version=function(Ea){return null===Ea?N.LUA_VERSION_NUM:Ea.l_G.version},T.exports.lua_xmove=function(Ea,va,Ra){if(Ea!==va){E(Ra<Ea.top-Ea.ci.funcOff,'not enough elements in the stack'),E(Ea.l_G===va.l_G,'moving among independent states'),E(va.ci.top-va.top>=Ra,'stack overflow'),Ea.top-=Ra;for(let ba=0;ba<Ra;ba++)va.stack[va.top]=Ea.stack[Ea.top+ba],va.top++}}},function(T){var U=function(){return this}();try{U=U||Function('return this')()||(1,eval)('this')}catch(E){'object'==typeof window&&(U=window)}T.exports=U},function(T,O,U){'use strict';const E=U(2),N=U(6),I=U(34);T.exports.lua=E,T.exports.lauxlib=N,T.exports.lualib=I},function(T,O,U){'use strict';const E=U(2),N=U(6),I=function($){let ee=E.lua_tothread($,1);return N.luaL_argcheck($,ee,1,E.to_luastring('thread expected',!0)),ee},P=function($,ee,te){if(!E.lua_checkstack(ee,te))return E.lua_pushliteral($,'too many arguments to resume'),-1;if(E.lua_status(ee)===E.LUA_OK&&0===E.lua_gettop(ee))return E.lua_pushliteral($,'cannot resume dead coroutine'),-1;E.lua_xmove($,ee,te);let ae=E.lua_resume(ee,$,te);if(ae===E.LUA_OK||ae===E.LUA_YIELD){let ue=E.lua_gettop(ee);return E.lua_checkstack($,ue+1)?(E.lua_xmove(ee,$,ue),ue):(E.lua_pop(ee,ue),E.lua_pushliteral($,'too many results to resume'),-1)}return E.lua_xmove(ee,$,1),-1},K=function($){let ee=E.lua_tothread($,E.lua_upvalueindex(1)),te=P($,ee,E.lua_gettop($));return 0>te?(E.lua_type($,-1)===E.LUA_TSTRING&&(N.luaL_where($,1),E.lua_insert($,-2),E.lua_concat($,2)),E.lua_error($)):te},V=function($){N.luaL_checktype($,1,E.LUA_TFUNCTION);let ee=E.lua_newthread($);return E.lua_pushvalue($,1),E.lua_xmove($,ee,1),1},W={create:V,isyieldable:function($){return E.lua_pushboolean($,E.lua_isyieldable($)),1},resume:function($){let ee=I($),te=P($,ee,E.lua_gettop($)-1);return 0>te?(E.lua_pushboolean($,0),E.lua_insert($,-2),2):(E.lua_pushboolean($,1),E.lua_insert($,-(te+1)),te+1)},running:function($){return E.lua_pushboolean($,E.lua_pushthread($)),2},status:function($){let ee=I($);if($===ee)E.lua_pushliteral($,'running');else switch(E.lua_status(ee)){case E.LUA_YIELD:E.lua_pushliteral($,'suspended');break;case E.LUA_OK:{let te=new E.lua_Debug;0<E.lua_getstack(ee,0,te)?E.lua_pushliteral($,'normal'):0===E.lua_gettop(ee)?E.lua_pushliteral($,'dead'):E.lua_pushliteral($,'suspended');break}default:E.lua_pushliteral($,'dead');}return 1},wrap:function($){return V($),E.lua_pushcclosure($,K,1),1},'yield':function($){return E.lua_yield($,E.lua_gettop($))}};T.exports.luaopen_coroutine=function($){return N.luaL_newlib($,W),1}},function(T,O,U){'use strict';const E=U(0),N=U(2),I=U(6),P=function(Ue,Ee,ke){Ue===Ee||N.lua_checkstack(Ee,ke)||I.luaL_error(Ue,N.to_luastring('stack overflow',!0))},Y=function(Ue){return N.lua_isthread(Ue,1)?{arg:1,thread:N.lua_tothread(Ue,1)}:{arg:0,thread:Ue}},J=function(Ue,Ee,ke){N.lua_pushstring(Ue,ke),N.lua_setfield(Ue,-2,Ee)},q=function(Ue,Ee,ke){N.lua_pushinteger(Ue,ke),N.lua_setfield(Ue,-2,Ee)},W=function(Ue,Ee,ke){N.lua_pushboolean(Ue,ke),N.lua_setfield(Ue,-2,Ee)},Q=function(Ue,Ee,ke){Ue==Ee?N.lua_rotate(Ue,-2,1):N.lua_xmove(Ee,Ue,1),N.lua_setfield(Ue,-2,ke)},ae=function(Ue,Ee){let ke=I.luaL_checkinteger(Ue,2);I.luaL_checktype(Ue,1,N.LUA_TFUNCTION);let ve=Ee?N.lua_getupvalue(Ue,1,ke):N.lua_setupvalue(Ue,1,ke);return null===ve?0:(N.lua_pushstring(Ue,ve),N.lua_insert(Ue,-(Ee+1)),Ee+1)},ne=function(Ue,Ee,ke){let ve=I.luaL_checkinteger(Ue,ke);return I.luaL_checktype(Ue,Ee,N.LUA_TFUNCTION),I.luaL_argcheck(Ue,null!==N.lua_getupvalue(Ue,Ee,ve),ke,N.to_luastring('invalid upvalue index',!0)),ve},pe=N.to_luastring('__hooks__',!0),ce=['call','return','line','count','tail call'].map((Ue)=>N.to_luastring(Ue)),de=function(Ue,Ee){N.lua_rawgetp(Ue,N.LUA_REGISTRYINDEX,pe),N.lua_pushthread(Ue),N.lua_rawget(Ue,-2)===N.LUA_TFUNCTION&&(N.lua_pushstring(Ue,ce[Ee.event]),0<=Ee.currentline?N.lua_pushinteger(Ue,Ee.currentline):N.lua_pushnil(Ue),E(N.lua_getinfo(Ue,['l'.charCodeAt(0),'S'.charCodeAt(0)],Ee)),N.lua_call(Ue,2,0))},Le=function(Ue,Ee){let ke=0;return-1<Ue.indexOf('c'.charCodeAt(0))&&(ke|=N.LUA_MASKCALL),-1<Ue.indexOf('r'.charCodeAt(0))&&(ke|=N.LUA_MASKRET),-1<Ue.indexOf('l'.charCodeAt(0))&&(ke|=N.LUA_MASKLINE),0<Ee&&(ke|=N.LUA_MASKCOUNT),ke},ge=function(Ue,Ee){let ke=0;return Ue&N.LUA_MASKCALL&&(Ee[ke++]='c'.charCodeAt(0)),Ue&N.LUA_MASKRET&&(Ee[ke++]='r'.charCodeAt(0)),Ue&N.LUA_MASKLINE&&(Ee[ke++]='l'.charCodeAt(0)),Ee},xe={gethook:function(Ue){let Ee=Y(Ue),ke=Ee.thread,ve=Ee.arg,be=N.lua_gethookmask(ke),Se=N.lua_gethook(ke);return null===Se?N.lua_pushnil(Ue):Se===de?(N.lua_rawgetp(Ue,N.LUA_REGISTRYINDEX,pe),P(Ue,ke,1),N.lua_pushthread(ke),N.lua_xmove(ke,Ue,1),N.lua_rawget(Ue,-2),N.lua_remove(Ue,-2)):N.lua_pushliteral(Ue,'external hook'),N.lua_pushstring(Ue,ge(be,[])),N.lua_pushinteger(Ue,N.lua_gethookcount(ke)),3},getinfo:function(Ue){let Ee=new N.lua_Debug,ke=Y(Ue),ve=ke.arg,Re=ke.thread,be=I.luaL_optstring(Ue,ve+2,N.to_luastring('flnStu',!0));if(P(Ue,Re,3),N.lua_isfunction(Ue,ve+1))be=['>'.charCodeAt(0)].concat(be),N.lua_pushvalue(Ue,ve+1),N.lua_xmove(Ue,Re,1);else if(!N.lua_getstack(Re,I.luaL_checkinteger(Ue,ve+1),Ee))return N.lua_pushnil(Ue),1;return N.lua_getinfo(Re,be,Ee)||I.luaL_argerror(Ue,ve+2,N.to_luastring('invalid option',!0)),N.lua_newtable(Ue),-1<be.indexOf('S'.charCodeAt(0))&&(J(Ue,N.to_luastring('source',!0),Ee.source),J(Ue,N.to_luastring('short_src',!0),Ee.short_src),J(Ue,N.to_luastring('linedefined',!0),N.to_luastring(`${Ee.linedefined}`)),J(Ue,N.to_luastring('lastlinedefined',!0),N.to_luastring(`${Ee.lastlinedefined}`)),J(Ue,N.to_luastring('what',!0),Ee.what)),-1<be.indexOf('l'.charCodeAt(0))&&q(Ue,N.to_luastring('currentline',!0),Ee.currentline),-1<be.indexOf('u'.charCodeAt(0))&&(q(Ue,N.to_luastring('nups',!0),Ee.nups),q(Ue,N.to_luastring('nparams',!0),Ee.nparams),W(Ue,N.to_luastring('isvararg',!0),Ee.isvararg)),-1<be.indexOf('n'.charCodeAt(0))&&(J(Ue,N.to_luastring('name',!0),Ee.name?Ee.name:null),J(Ue,N.to_luastring('namewhat',!0),Ee.namewhat?Ee.namewhat:null)),-1<be.indexOf('t'.charCodeAt(0))&&W(Ue,N.to_luastring('istailcall',!0),Ee.istailcall),-1<be.indexOf('L'.charCodeAt(0))&&Q(Ue,Re,N.to_luastring('activelines',!0)),-1<be.indexOf('f'.charCodeAt(0))&&Q(Ue,Re,N.to_luastring('func',!0)),1},getlocal:function(Ue){let Ee=Y(Ue),ke=Ee.thread,ve=Ee.arg,Re=new N.lua_Debug,be=I.luaL_checkinteger(Ue,ve+2);if(N.lua_isfunction(Ue,ve+1))return N.lua_pushvalue(Ue,ve+1),N.lua_pushstring(Ue,N.lua_getlocal(Ue,null,be)),1;let Se=I.luaL_checkinteger(Ue,ve+1);if(!N.lua_getstack(ke,Se,Re))return I.luaL_argerror(Ue,ve+1,N.to_luastring('level out of range',!0));P(Ue,ke,1);let Ne=N.lua_getlocal(ke,Re,be);return Ne?(N.lua_xmove(ke,Ue,1),N.lua_pushstring(Ue,Ne),N.lua_rotate(Ue,-2,1),2):(N.lua_pushnil(Ue),1)},getmetatable:function(Ue){return I.luaL_checkany(Ue,1),N.lua_getmetatable(Ue,1)||N.lua_pushnil(Ue),1},getregistry:function(Ue){return N.lua_pushvalue(Ue,N.LUA_REGISTRYINDEX),1},getupvalue:function(Ue){return ae(Ue,1)},getuservalue:function(Ue){return N.lua_type(Ue,1)===N.LUA_TUSERDATA?N.lua_getuservalue(Ue,1):N.lua_pushnil(Ue),1},sethook:function(Ue){let Re=Y(Ue),be=Re.thread,Se=Re.arg,Ee,ke,ve;if(N.lua_isnoneornil(Ue,Se+1))N.lua_settop(Ue,Se+1),ve=null,Ee=0,ke=0;else{const Ne=I.luaL_checkstring(Ue,Se+2);I.luaL_checktype(Ue,Se+1,N.LUA_TFUNCTION),ke=I.luaL_optinteger(Ue,Se+3,0),ve=de,Ee=Le(Ne,ke)}return N.lua_rawgetp(Ue,N.LUA_REGISTRYINDEX,pe)===N.LUA_TNIL&&(N.lua_createtable(Ue,0,2),N.lua_pushvalue(Ue,-1),N.lua_rawsetp(Ue,N.LUA_REGISTRYINDEX,pe),N.lua_pushstring(Ue,['k'.charCodeAt(0)]),N.lua_setfield(Ue,-2,N.to_luastring('__mode',!0)),N.lua_pushvalue(Ue,-1),N.lua_setmetatable(Ue,-2)),P(Ue,be,1),N.lua_pushthread(be),N.lua_xmove(be,Ue,1),N.lua_pushvalue(Ue,Se+1),N.lua_rawset(Ue,-3),N.lua_sethook(be,ve,Ee,ke),0},setlocal:function(Ue){let Ee=Y(Ue),ke=Ee.thread,ve=Ee.arg,Re=new N.lua_Debug,be=I.luaL_checkinteger(Ue,ve+1),Se=I.luaL_checkinteger(Ue,ve+2);if(!N.lua_getstack(ke,be,Re))return I.luaL_argerror(Ue,ve+1,'level out of range');I.luaL_checkany(Ue,ve+3),N.lua_settop(Ue,ve+3),P(Ue,ke,1),N.lua_xmove(Ue,ke,1);let Ne=N.lua_setlocal(ke,Re,Se);return null===Ne&&N.lua_pop(ke,1),N.lua_pushstring(Ue,Ne),1},setmetatable:function(Ue){const Ee=N.lua_type(Ue,2);return I.luaL_argcheck(Ue,Ee==N.LUA_TNIL||Ee==N.LUA_TTABLE,2,N.to_luastring('nil or table expected',!0)),N.lua_settop(Ue,2),N.lua_setmetatable(Ue,1),1},setupvalue:function(Ue){return I.luaL_checkany(Ue,3),ae(Ue,0)},setuservalue:function(Ue){return I.luaL_checktype(Ue,1,N.LUA_TUSERDATA),I.luaL_checkany(Ue,2),N.lua_settop(Ue,2),N.lua_setuservalue(Ue,1),1},traceback:function(Ue){let Ee=Y(Ue),ke=Ee.thread,ve=Ee.arg,Re=N.lua_tostring(Ue,ve+1);if(null===Re&&!N.lua_isnoneornil(Ue,ve+1))N.lua_pushvalue(Ue,ve+1);else{let be=I.luaL_optinteger(Ue,ve+2,Ue===ke?1:0);I.luaL_traceback(Ue,ke,Re,be)}return 1},upvalueid:function(Ue){let Ee=ne(Ue,1,2);return N.lua_pushlightuserdata(Ue,N.lua_upvalueid(Ue,1,Ee)),1},upvaluejoin:function(Ue){let Ee=ne(Ue,1,2),ke=ne(Ue,3,4);return I.luaL_argcheck(Ue,!N.lua_iscfunction(Ue,1),1,N.to_luastring('Lua function expected',!0)),I.luaL_argcheck(Ue,!N.lua_iscfunction(Ue,3),3,N.to_luastring('Lua function expected',!0)),N.lua_upvaluejoin(Ue,1,Ee,3,ke),0}};T.exports.luaopen_debug=function(Ue){return I.luaL_newlib(Ue,xe),1}},function(T){'use strict';T.exports.lisdigit=function(V){return /^\d$/.test(_StringfromCharCode(V))},T.exports.lislalnum=function(V){return /^[_a-zA-Z0-9]$/.test(_StringfromCharCode(V))},T.exports.lislalpha=function(V){return /^[_a-zA-Z]$/.test(_StringfromCharCode(V))},T.exports.lisprint=function(V){return /^[\x20-\x7E]$/.test(_StringfromCharCode(V))},T.exports.lisspace=function(V){return /^\s$/.test(_StringfromCharCode(V))},T.exports.lisxdigit=function(V){return /^[0-9a-fA-F]$/.test(_StringfromCharCode(V))}},function(T,O,U){'use strict';const E=U(0),N=U(1),I=U(8),P=U(9),M=U(26),K=U(4),V=U(7),F=U(10),H=U(3),Y=U(20),J=N.thread_status,q=N.char,W=257,Q={TK_AND:W,TK_BREAK:W+1,TK_DO:W+2,TK_ELSE:W+3,TK_ELSEIF:W+4,TK_END:W+5,TK_FALSE:W+6,TK_FOR:W+7,TK_FUNCTION:W+8,TK_GOTO:W+9,TK_IF:W+10,TK_IN:W+11,TK_LOCAL:W+12,TK_NIL:W+13,TK_NOT:W+14,TK_OR:W+15,TK_REPEAT:W+16,TK_RETURN:W+17,TK_THEN:W+18,TK_TRUE:W+19,TK_UNTIL:W+20,TK_WHILE:W+21,TK_IDIV:W+22,TK_CONCAT:W+23,TK_DOTS:W+24,TK_EQ:W+25,TK_GE:W+26,TK_LE:W+27,TK_NE:W+28,TK_SHL:W+29,TK_SHR:W+30,TK_DBCOLON:W+31,TK_EOS:W+32,TK_FLT:W+33,TK_INT:W+34,TK_NAME:W+35,TK_STRING:W+36},$=Q,ee=['and','break','do','else','elseif','end','false','for','function','goto','if','in','local','nil','not','or','repeat','return','then','true','until','while','//','..','...','==','>=','<=','~=','<<','>>','::','<eof>','<number>','<integer>','<name>','<string>'];class te{constructor(){this.r=NaN,this.i=NaN,this.ts=null}}class ae{constructor(){this.token=NaN,this.seminfo=new te}}const se=function(De,Ke){let Be=De.buff;Be.n+1>Be.buffer.length&&Be.buffer.length>=H.MAX_INT/2&&xe(De,N.to_luastring('lexical element too long',!0),0),Be.buffer[Be.n++]=0>Ke?255+Ke+1:Ke},ne=function(De,Ke){if(Ke<W)return K.luaO_pushfstring(De.L,N.to_luastring('\'%c\'',!0),Ke);let Be=ee[Ke-W];return Ke<$.TK_EOS?N.to_luastring(`'${Be}'`):N.to_luastring(Be)},oe=function(De){return De.current===q['\n']||De.current===q['\r']},_e=function(De){De.current=De.z.zgetc()},pe=function(De){se(De,De.current),_e(De)},ce=function(De,Ke){let Be=De.L,Ve=V.luaS_new(Be,Ke),Ge=F.luaH_set(De.h,new K.TValue(N.CT.LUA_TLNGSTR,Ve));if(Ge.ttisnil())Ge.setbvalue(!0);else{let we=De.h.strong.get(V.luaS_hashlongstr(Ve));E(we.value==Ge),Ve=we.key.tsvalue()}return Ve},de=function(De){let Ke=De.current;E(oe(De)),_e(De),oe(De)&&De.current!==Ke&&_e(De),++De.linenumber>=H.MAX_INT&&xe(De,N.to_luastring('chunk has too many lines',!0),0)},ge=function(De,Ke){return De.current===Ke.charCodeAt(0)&&(_e(De),!0)},Ae=function(De,Ke){return(De.current===Ke[0].charCodeAt(0)||De.current===Ke[1].charCodeAt(0))&&(pe(De),!0)},Te=function(De,Ke){let Be='Ee',Ve=De.current;for(E(M.lisdigit(De.current)),pe(De),Ve===q[0]&&Ae(De,'xX')&&(Be='Pp');;)if(Ae(De,Be)&&Ae(De,'-+'),M.lisxdigit(De.current))pe(De);else if(De.current===q['.'])pe(De);else break;se(De,0);let Ge=K.luaO_str2num(De.buff.buffer);return!1===Ge&&xe(De,N.to_luastring('malformed number',!0),$.TK_FLT),Ge.ttisinteger()?(Ke.i=Ge.value,$.TK_INT):(E(Ge.ttisfloat()),Ke.r=Ge.value,$.TK_FLT)},he=function(De,Ke){return Ke===$.TK_NAME||Ke===$.TK_STRING||Ke===$.TK_FLT||Ke===$.TK_INT?N.to_luastring(`'${N.to_jsstring(De.buff.buffer)}'`):ne(De,Ke)},xe=function(De,Ke,Be){Ke=I.luaG_addinfo(De.L,Ke,De.source,De.linenumber),Be&&K.luaO_pushfstring(De.L,N.to_luastring('%s near %s'),Ke,he(De,Be)),P.luaD_throw(De.L,J.LUA_ERRSYNTAX)},Ue=function(De){let Ke=0,Be=De.current;for(E(Be===q['[']||Be===q[']']),pe(De);De.current===q['='];)pe(De),Ke++;return De.current===Be?Ke:-Ke-1},Ee=function(De,Ke,Be){let Ve=De.linenumber;pe(De),oe(De)&&de(De);for(let Ge=!1;!Ge;)switch(De.current){case Y.EOZ:{let we=Ke?'string':'comment',Fe=`unfinished long ${we} (starting at line ${Ve})`;xe(De,N.to_luastring(Fe),$.TK_EOS);break}case q[']']:{Ue(De)===Be&&(pe(De),Ge=!0);break}case q['\n']:case q['\r']:{se(De,q['\n']),de(De),Ke||(De.buff.n=0,De.buff.buffer=[]);break}default:Ke?pe(De):_e(De);}Ke&&(Ke.ts=ce(De,De.buff.buffer.slice(2+Be,2+Be-2*(2+Be))))},ke=function(De,Ke,Be){Ke||(De.current!==Y.EOZ&&pe(De),xe(De,Be,$.TK_STRING))},ve=function(De){return pe(De),ke(De,M.lisxdigit(De.current),N.to_luastring('hexadecimal digit expected',!0)),K.luaO_hexavalue(De.current)},Re=function(De){let Ke=ve(De);return Ke=(Ke<<4)+ve(De),De.buff.n-=2,Ke},be=function(De){let Ke=4;pe(De),ke(De,De.current===q['{'],N.to_luastring('missing \'{\'',!0));let Be=ve(De);for(pe(De);M.lisxdigit(De.current);)Ke++,Be=(Be<<4)+K.luaO_hexavalue(De.current),ke(De,1114111>=Be,N.to_luastring('UTF-8 value too large',!0)),pe(De);return ke(De,De.current===q['}'],N.to_luastring('missing \'}\'',!0)),_e(De),De.buff.n-=Ke,Be},Se=function(De){let Ke=K.luaO_utf8esc(be(De)),Be=Ke.buff;for(let Ve=Ke.n;0<Ve;Ve--)se(De,Be[K.UTF8BUFFSZ-Ve])},Ne=function(De){let Ke=0,Be;for(Be=0;3>Be&&M.lisdigit(De.current);Be++)Ke=10*Ke+De.current-q[0],pe(De);return ke(De,255>=Ke,N.to_luastring('decimal escape too large',!0)),De.buff.n-=Be,Ke},Ie=function(De,Ke,Be){for(pe(De);De.current!==Ke;)switch(De.current){case Y.EOZ:xe(De,N.to_luastring('unfinished string',!0),$.TK_EOS);break;case q['\n']:case q['\r']:xe(De,N.to_luastring('unfinished string',!0),$.TK_STRING);break;case q['\\']:{pe(De);let Ve,Ge;switch(De.current){case q.a:Ge=q.a,Ve='read_save';break;case q.b:Ge=q['\b'],Ve='read_save';break;case q.f:Ge=q['\f'],Ve='read_save';break;case q.n:Ge=q['\n'],Ve='read_save';break;case q.r:Ge=q['\r'],Ve='read_save';break;case q.t:Ge=q['\t'],Ve='read_save';break;case q.v:Ge=q['\x0B'],Ve='read_save';break;case q.x:Ge=Re(De),Ve='read_save';break;case q.u:Se(De),Ve='no_save';break;case q['\n']:case q['\r']:de(De),Ge=q['\n'],Ve='only_save';break;case q['\\']:case q['"']:case q['\'']:Ge=De.current,Ve='read_save';break;case Y.EOZ:Ve='no_save';break;case q.z:{for(De.buff.n-=1,_e(De);M.lisspace(De.current);)oe(De)?de(De):_e(De);Ve='no_save';break}default:{ke(De,M.lisdigit(De.current),N.to_luastring('invalid escape sequence',!0)),Ge=Ne(De),Ve='only_save';break}}'read_save'===Ve&&_e(De),('read_save'===Ve||'only_save'===Ve)&&(De.buff.n-=1,se(De,Ge));break}default:pe(De);}pe(De),Be.ts=ce(De,De.buff.buffer.slice(1,De.buff.n-1))},Pe=function(De,Ke){for(De.buff.n=0,De.buff.buffer=[];;)switch(E('number'==typeof De.current),De.current){case q['\n']:case q['\r']:{de(De);break}case q[' ']:case q['\f']:case q['\t']:case q['\x0B']:{_e(De);break}case q['-']:{if(_e(De),De.current!==q['-'])return q['-'];if(_e(De),De.current===q['[']){let Be=Ue(De);if(De.buff.n=0,De.buff.buffer=[],0<=Be){Ee(De,null,Be),De.buff.n=0,De.buff.buffer=[];break}}for(;!oe(De)&&De.current!==Y.EOZ;)_e(De);break}case q['[']:{let Be=Ue(De);return 0<=Be?(Ee(De,Ke,Be),$.TK_STRING):(-1!==Be&&xe(De,N.to_luastring('invalid long string delimiter',!0),$.TK_STRING),q['['])}case q['=']:return _e(De),ge(De,'=')?$.TK_EQ:q['='];case q['<']:return _e(De),ge(De,'=')?$.TK_LE:ge(De,'<')?$.TK_SHL:q['<'];case q['>']:return _e(De),ge(De,'=')?$.TK_GE:ge(De,'>')?$.TK_SHR:q['>'];case q['/']:return _e(De),ge(De,'/')?$.TK_IDIV:q['/'];case q['~']:return _e(De),ge(De,'=')?$.TK_NE:q['~'];case q[':']:return _e(De),ge(De,':')?$.TK_DBCOLON:q[':'];case q['"']:case q['\'']:return Ie(De,De.current,Ke),$.TK_STRING;case q['.']:return pe(De),ge(De,'.')?ge(De,'.')?$.TK_DOTS:$.TK_CONCAT:M.lisdigit(De.current)?Te(De,Ke):q['.'];case q[0]:case q[1]:case q[2]:case q[3]:case q[4]:case q[5]:case q[6]:case q[7]:case q[8]:case q[9]:return Te(De,Ke);case Y.EOZ:return $.TK_EOS;default:{if(M.lislalpha(De.current)){do pe(De);while(M.lislalnum(De.current));let Be=ce(De,De.buff.buffer);Ke.ts=Be;let Ve=ee.slice(0,22).indexOf(N.to_jsstring(Be.getstr()));return 0<=Ve?Ve+W:$.TK_NAME}let Be=De.current;return _e(De),Be}}};T.exports.FIRST_RESERVED=W,T.exports.LexState=class{constructor(){this.current=NaN,this.linenumber=NaN,this.lastline=NaN,this.t=new ae,this.lookahead=new ae,this.fs=null,this.L=null,this.z=null,this.buff=null,this.h=null,this.dyd=null,this.source=null,this.envn=null}},T.exports.RESERVED=Q,T.exports.isreserved=function(De){return 0<=ee.slice(0,22).indexOf(De)},T.exports.luaX_lookahead=function(De){return E(De.lookahead.token===$.TK_EOS),De.lookahead.token=Pe(De,De.lookahead.seminfo),De.lookahead.token},T.exports.luaX_newstring=ce,T.exports.luaX_next=function(De){De.lastline=De.linenumber,De.lookahead.token===$.TK_EOS?De.t.token=Pe(De,De.t.seminfo):(De.t.token=De.lookahead.token,De.t.seminfo.i=De.lookahead.seminfo.i,De.t.seminfo.r=De.lookahead.seminfo.r,De.t.seminfo.ts=De.lookahead.seminfo.ts,De.lookahead.token=$.TK_EOS)},T.exports.luaX_setinput=function(De,Ke,Be,Ve,Ge){Ke.t={token:0,seminfo:{i:NaN,r:NaN,ts:null}},Ke.L=De,Ke.current=Ge,Ke.lookahead={token:$.TK_EOS,seminfo:{i:NaN,r:NaN,ts:null}},Ke.z=Be,Ke.fs=null,Ke.linenumber=1,Ke.lastline=1,Ke.source=Ve,Ke.envn=V.luaS_newliteral(De,'_ENV')},T.exports.luaX_syntaxerror=function(De,Ke){xe(De,Ke,De.t.token)},T.exports.luaX_token2str=ne,T.exports.luaX_tokens=ee},function(T,O,U){'use strict';const E=U(45),N=U(2),I=U(6),P=U(3),M=U(13);var K=E();const te=function(Oe,Ue){let Ee=M.lua_numbertointeger(Ue);!1===Ee?N.lua_pushnumber(Oe,Ue):N.lua_pushinteger(Oe,Ee)},he={abs:function(Oe){return N.lua_isinteger(Oe,1)?N.lua_pushinteger(Oe,_Mathabs(N.lua_tointeger(Oe,1))):N.lua_pushnumber(Oe,_Mathabs(I.luaL_checknumber(Oe,1))),1},acos:function(Oe){return N.lua_pushnumber(Oe,Math.acos(I.luaL_checknumber(Oe,1))),1},asin:function(Oe){return N.lua_pushnumber(Oe,Math.asin(I.luaL_checknumber(Oe,1))),1},atan:function(Oe){return N.lua_pushnumber(Oe,Math.atan(I.luaL_checknumber(Oe,1))),1},ceil:function(Oe){return N.lua_isinteger(Oe,1)?N.lua_settop(Oe,1):te(Oe,_Mathceil(I.luaL_checknumber(Oe,1))),1},cos:function(Oe){return N.lua_pushnumber(Oe,Math.cos(I.luaL_checknumber(Oe,1))),1},deg:function(Oe){return N.lua_pushnumber(Oe,I.luaL_checknumber(Oe,1)*(180/_MathPI)),1},exp:function(Oe){return N.lua_pushnumber(Oe,Math.exp(I.luaL_checknumber(Oe,1))),1},floor:function(Oe){return N.lua_isinteger(Oe,1)?N.lua_settop(Oe,1):te(Oe,_Mathfloor(I.luaL_checknumber(Oe,1))),1},fmod:function(Oe){if(N.lua_isinteger(Oe,1)&&N.lua_isinteger(Oe,2)){let Ue=N.lua_tointeger(Oe,2);1>=_Mathabs(Ue)+1?(I.luaL_argcheck(Oe,0!==Ue,2,N.to_luastring('zero',!0)),N.lua_pushinteger(Oe,0)):N.lua_pushinteger(Oe,N.lua_tointeger(Oe,1)%Ue)}else{let Ue=I.luaL_checknumber(Oe,1),Ee=I.luaL_checknumber(Oe,2);N.lua_pushnumber(Oe,+(Ue-_Mathfloor(Ue/Ee)*Ee).toPrecision(8))}return 1},log:function(Oe){let Ue=I.luaL_checknumber(Oe,1),Ee;if(N.lua_isnoneornil(Oe,2))Ee=_Mathlog(Ue);else{let ke=I.luaL_checknumber(Oe,2);Ee=2===ke?Math.log2(Ue):10===ke?Math.log10(Ue):_Mathlog(Ue)/_Mathlog(ke)}return N.lua_pushnumber(Oe,Ee),1},max:function(Oe){let Ue=N.lua_gettop(Oe),Ee=1;I.luaL_argcheck(Oe,1<=Ue,1,N.to_luastring('value expected',!0));for(let ke=2;ke<=Ue;ke++)N.lua_compare(Oe,Ee,ke,N.LUA_OPLT)&&(Ee=ke);return N.lua_pushvalue(Oe,Ee),1},min:function(Oe){let Ue=N.lua_gettop(Oe),Ee=1;I.luaL_argcheck(Oe,1<=Ue,1,N.to_luastring('value expected',!0));for(let ke=2;ke<=Ue;ke++)N.lua_compare(Oe,ke,Ee,N.LUA_OPLT)&&(Ee=ke);return N.lua_pushvalue(Oe,Ee),1},modf:function(Oe){if(N.lua_isinteger(Oe,1))N.lua_settop(Oe,1),N.lua_pushnumber(Oe,0);else{let Ue=I.luaL_checknumber(Oe,1),Ee=0>Ue?_Mathceil(Ue):_Mathfloor(Ue);te(Oe,Ee),N.lua_pushnumber(Oe,Ue===Ee?0:Ue-Ee)}return 2},rad:function(Oe){return N.lua_pushnumber(Oe,I.luaL_checknumber(Oe,1)*(_MathPI/180)),1},random:function(Oe){let ke=K(),Ue,Ee;switch(N.lua_gettop(Oe)){case 0:return N.lua_pushnumber(Oe,ke),1;case 1:{Ue=1,Ee=I.luaL_checkinteger(Oe,1);break}case 2:{Ue=I.luaL_checkinteger(Oe,1),Ee=I.luaL_checkinteger(Oe,2);break}default:return I.luaL_error(Oe,N.to_luastring('wrong number of arguments',!0));}return I.luaL_argcheck(Oe,Ue<=Ee,1,N.to_luastring('interval is empty',!0)),I.luaL_argcheck(Oe,0<=Ue||Ee<=P.MAX_INT+Ue,1,N.to_luastring('interval too large',!0)),ke*=Ee-Ue+1,N.lua_pushinteger(Oe,_Mathfloor(ke)+Ue),1},randomseed:function(Oe){K=E(_Mathabs(I.luaL_checknumber(Oe,1)))},sin:function(Oe){return N.lua_pushnumber(Oe,Math.sin(I.luaL_checknumber(Oe,1))),1},sqrt:function(Oe){return N.lua_pushnumber(Oe,Math.sqrt(I.luaL_checknumber(Oe,1))),1},tan:function(Oe){return N.lua_pushnumber(Oe,Math.tan(I.luaL_checknumber(Oe,1))),1},tointeger:function(Oe){let Ue=N.lua_tointegerx(Oe,1);return!1===Ue?(I.luaL_checkany(Oe,1),N.lua_pushnil(Oe)):N.lua_pushinteger(Oe,Ue),1},type:function(Oe){return N.lua_type(Oe,1)===N.LUA_TNUMBER?N.lua_isinteger(Oe,1)?N.lua_pushliteral(Oe,'integer'):N.lua_pushliteral(Oe,'float'):(I.luaL_checkany(Oe,1),N.lua_pushnil(Oe)),1},ult:function(Oe){let Ue=I.luaL_checkinteger(Oe,1),Ee=I.luaL_checkinteger(Oe,2);return N.lua_pushboolean(Oe,_Mathabs(Ue)<_Mathabs(Ee)),1}};T.exports.luaopen_math=function(Oe){return I.luaL_newlib(Oe,he),N.lua_pushnumber(Oe,Math.PI),N.lua_setfield(Oe,-2,N.to_luastring('pi',!0)),N.lua_pushnumber(Oe,Infinity),N.lua_setfield(Oe,-2,N.to_luastring('huge',!0)),N.lua_pushinteger(Oe,P.MAX_INT),N.lua_setfield(Oe,-2,N.to_luastring('maxinteger',!0)),N.lua_pushinteger(Oe,P.MIN_INT),N.lua_setfield(Oe,-2,N.to_luastring('mininteger',!0)),1}},function(T,O,U){'use strict';(function(E){const N=U(2),I=U(6),P=['-'.charCodeAt(0)],M=N.to_luastring('__CLIBS__',!0),F=N.LUA_DIRSEP,H=N.LUA_DIRSEP,Y=N.to_luastring('luaopen_'),J=N.to_luastring('_'),W=[1],Q=function(Ie,Ce){try{return Ce=N.to_jsstring(Ce),Ce.startsWith('.')&&(Ce=`${E.env.PWD}/${Ce}`),!function(){var Me=new Error('Cannot find module "."');throw Me.code='MODULE_NOT_FOUND',Me}()}catch(Pe){return N.lua_pushstring(Ie,N.to_luastring(Pe.message)),null}},$=function(Ie,Ce,Pe){let Me=Ce[N.to_jsstring(Pe)];return Me&&'function'==typeof Me?Me:(N.lua_pushfstring(Ie,N.to_luastring('undefined symbol: %s'),Pe),null)},ee=function(Ie){N.lua_getfield(Ie,N.LUA_REGISTRYINDEX,N.to_luastring('LUA_NOENV'));let Ce=N.lua_toboolean(Ie,-1);return N.lua_pop(Ie,1),Ce};let te=function(){return!1};const ae=1,ue=2,se=function(Ie,Ce,Pe){let Me=_e(Ie,Ce);if(null===Me){if(Me=Q(Ie,Ce,Pe[0]==='*'.charCodeAt(0)),null===Me)return ae;pe(Ie,Ce,Me)}if(Pe[0]==='*'.charCodeAt(0))return N.lua_pushboolean(Ie,1),0;let ye=$(Ie,Me,Pe);return null===ye?ue:(N.lua_pushcfunction(Ie,ye),0)},oe=function(Ie,Ce,Pe,Me){let ye=N.lua_pushstring(Ie,N.to_luastring(`${Pe}${N.LUA_VERSUFFIX}`,!0)),De=E.env[ye];void 0===De&&(De=E.env[Pe]),void 0===De||ee(Ie)?N.lua_pushstring(Ie,N.to_luastring(Me,!0)):(De=I.luaL_gsub(Ie,N.to_luastring(De),N.to_luastring(N.LUA_PATH_SEP+N.LUA_PATH_SEP,!0),N.to_luastring(N.LUA_PATH_SEP,!0).concat(W).concat(N.to_luastring(N.LUA_PATH_SEP,!0))),I.luaL_gsub(Ie,De,W,N.to_luastring(Me)),N.lua_remove(Ie,-2)),N.lua_setfield(Ie,-3,Ce),N.lua_pop(Ie,1)},_e=function(Ie,Ce){N.lua_rawgetp(Ie,N.LUA_REGISTRYINDEX,M),N.lua_getfield(Ie,-1,Ce);let Pe=N.lua_touserdata(Ie,-1);return N.lua_pop(Ie,2),Pe},pe=function(Ie,Ce,Pe){N.lua_rawgetp(Ie,N.LUA_REGISTRYINDEX,M),N.lua_pushlightuserdata(Ie,Pe),N.lua_pushvalue(Ie,-1),N.lua_setfield(Ie,-3,Ce),N.lua_rawseti(Ie,-2,I.luaL_len(Ie,-2)+1),N.lua_pop(Ie,1)},ce=function(Ie,Ce){for(;Ce[0]===N.LUA_PATH_SEP.charCodeAt(0);)Ce=Ce.slice(1);if(0===Ce.length)return null;let Pe=Ce.indexOf(N.LUA_PATH_SEP.charCodeAt(0));return 0>Pe&&(Pe=Ce.length),N.lua_pushlstring(Ie,Ce,Pe),Ce.slice(Pe)},de=function(Ie,Ce,Pe,Me,ye){let De=[];for(0!==Me[0]&&(Ce=I.luaL_gsub(Ie,Ce,Me,ye));null!==(Pe=ce(Ie,Pe));){let Ke=I.luaL_gsub(Ie,N.lua_tostring(Ie,-1),N.to_luastring(N.LUA_PATH_MARK,!0),Ce);if(N.lua_remove(Ie,-2),te(Ke))return Ke;N.lua_remove(Ie,-1),De.push(...N.to_luastring(`\n\tno file '${N.to_jsstring(Ke)}'`))}return N.lua_pushstring(Ie,De),null},ge=function(Ie,Ce,Pe,Me){N.lua_getfield(Ie,N.lua_upvalueindex(1),Pe);let ye=N.lua_tostring(Ie,-1);return null===ye&&I.luaL_error(Ie,N.to_luastring('\'package.%s\' must be a string'),Pe),de(Ie,Ce,ye,['.'.charCodeAt(0)],Me)},Ae=function(Ie,Ce,Pe){return Ce?(N.lua_pushstring(Ie,Pe),2):I.luaL_error(Ie,N.to_luastring('error loading module \'%s\' from file \'%s\':\n\t%s'),N.lua_tostring(Ie,1),Pe,N.lua_tostring(Ie,-1))},Te=function(Ie){let Ce=I.luaL_checkstring(Ie,1),Pe=ge(Ie,Ce,N.to_luastring('path',!0),N.to_luastring(H,!0));return null===Pe?1:Ae(Ie,I.luaL_loadfile(Ie,Pe)===N.LUA_OK,Pe)},he=function(Ie,Ce,Pe){let Me;Pe=I.luaL_gsub(Ie,Pe,['.'.charCodeAt(0)],J);let ye=Pe.indexOf(P[0]);if(0<=ye){Me=N.lua_pushlstring(Ie,Pe,ye),Me=N.lua_pushfstring(Ie,N.to_luastring('%s%s'),Y,Me);let De=se(Ie,Ce,Me);if(De!==ue)return De;Pe=ye+1}return Me=N.lua_pushfstring(Ie,N.to_luastring('%s%s'),Y,Pe),se(Ie,Ce,Me)},xe=function(Ie){let Ce=I.luaL_checkstring(Ie,1),Pe=ge(Ie,Ce,N.to_luastring('cpath',!0),N.to_luastring(F,!0));return null===Pe?1:Ae(Ie,0===he(Ie,Pe,Ce),Pe)},Oe=function(Ie){let Ce=I.luaL_checkstring(Ie,1),Pe=Ce.indexOf('.'.charCodeAt(0)),Me;if(0>Pe)return 0;N.lua_pushlstring(Ie,Ce,Pe);let ye=ge(Ie,N.lua_tostring(Ie,-1),N.to_luastring('cpath',!0),N.to_luastring(F,!0));return null===ye?1:0===(Me=he(Ie,ye,Ce))?(N.lua_pushstring(Ie,ye),2):Me==ue?(N.lua_pushstring(Ie,N.to_luastring(`\n\tno module '${N.to_jsstring(Ce)}' in file '${N.to_jsstring(ye)}'`)),1):Ae(Ie,0,ye)},Ue=function(Ie){let Ce=I.luaL_checkstring(Ie,1);return N.lua_getfield(Ie,N.LUA_REGISTRYINDEX,N.to_luastring(I.LUA_PRELOAD_TABLE,!0)),N.lua_getfield(Ie,-1,Ce)===N.LUA_TNIL&&N.lua_pushliteral(Ie,`\n\tno field package.preload['${N.to_jsstring(Ce)}']`),1},Ee=function(Ie,Ce){let Pe=[];N.lua_getfield(Ie,N.lua_upvalueindex(1),N.to_luastring('searchers',!0))!==N.LUA_TTABLE&&I.luaL_error(Ie,N.to_luastring('\'package.searchers\' must be a table'));for(let Me=1;;Me++){if(N.lua_rawgeti(Ie,3,Me)===N.LUA_TNIL&&(N.lua_pop(Ie,1),N.lua_pushstring(Ie,Pe),I.luaL_error(Ie,N.to_luastring('module \'%s\' not found:%s'),Ce,N.lua_tostring(Ie,-1))),N.lua_pushstring(Ie,Ce),N.lua_call(Ie,1,2),N.lua_isfunction(Ie,-2))return;N.lua_isstring(Ie,-2)?(N.lua_pop(Ie,1),Pe.push(...N.lua_tostring(Ie,-1)),N.lua_remove(Ie,-1)):N.lua_pop(Ie,2)}},ve={loadlib:function(Ie){let Ce=I.luaL_checkstring(Ie,1),Pe=I.luaL_checkstring(Ie,2),Me=se(Ie,Ce,Pe);return 0===Me?1:(N.lua_pushnil(Ie),N.lua_insert(Ie,-2),N.lua_pushliteral(Ie,Me===ae?'open':'init'),3)},searchpath:function(Ie){let Ce=de(Ie,I.luaL_checkstring(Ie,1),I.luaL_checkstring(Ie,2),I.luaL_optstring(Ie,3,['.'.charCodeAt(0)]),I.luaL_optstring(Ie,4,[N.LUA_DIRSEP.charCodeAt(0)]));return null===Ce?(N.lua_pushnil(Ie),N.lua_insert(Ie,-2),2):1}},Re={require:function(Ie){let Ce=I.luaL_checkstring(Ie,1);return(N.lua_settop(Ie,1),N.lua_getfield(Ie,N.LUA_REGISTRYINDEX,N.to_luastring(I.LUA_LOADED_TABLE,!0)),N.lua_getfield(Ie,2,Ce),N.lua_toboolean(Ie,-1))?1:(N.lua_pop(Ie,1),Ee(Ie,Ce),N.lua_pushstring(Ie,Ce),N.lua_insert(Ie,-2),N.lua_call(Ie,2,1),N.lua_isnil(Ie,-1)||N.lua_setfield(Ie,2,Ce),N.lua_getfield(Ie,2,Ce)==N.LUA_TNIL&&(N.lua_pushboolean(Ie,1),N.lua_pushvalue(Ie,-1),N.lua_setfield(Ie,2,Ce)),1)}},be=function(Ie){let Ce=[Ue,Te,xe,Oe,null];N.lua_createtable(Ie);for(let Pe=0;Ce[Pe];Pe++)N.lua_pushvalue(Ie,-2),N.lua_pushcclosure(Ie,Ce[Pe],1),N.lua_rawseti(Ie,-2,Pe+1);N.lua_setfield(Ie,-2,N.to_luastring('searchers',!0))},Se=function(Ie){N.lua_newtable(Ie),N.lua_createtable(Ie,0,1),N.lua_setmetatable(Ie,-2),N.lua_rawsetp(Ie,N.LUA_REGISTRYINDEX,M)};T.exports.luaopen_package=function(Ie){return Se(Ie),I.luaL_newlib(Ie,ve),be(Ie),oe(Ie,N.to_luastring('path',!0),'LUA_PATH',N.LUA_PATH_DEFAULT),oe(Ie,N.to_luastring('cpath',!0),'LUA_CPATH',N.LUA_CPATH_DEFAULT),N.lua_pushliteral(Ie,N.LUA_DIRSEP+'\n'+N.LUA_PATH_SEP+'\n'+N.LUA_PATH_MARK+'\n'+N.LUA_EXEC_DIR+'\n'+P+'\n'),N.lua_setfield(Ie,-2,N.to_luastring('config',!0)),I.luaL_getsubtable(Ie,N.LUA_REGISTRYINDEX,N.to_luastring(I.LUA_LOADED_TABLE,!0)),N.lua_setfield(Ie,-2,N.to_luastring('loaded',!0)),I.luaL_getsubtable(Ie,N.LUA_REGISTRYINDEX,N.to_luastring(I.LUA_PRELOAD_TABLE,!0)),N.lua_setfield(Ie,-2,N.to_luastring('preload',!0)),N.lua_pushglobaltable(Ie),N.lua_pushvalue(Ie,-2),I.luaL_setfuncs(Ie,Re,1),N.lua_pop(Ie,1),1}}).call(O,U(19))},function(T,O,U){'use strict';(function(E){const N=U(2),I=U(6),P=U(3),M=U(54),K=N.to_luastring('aAbBcdHIjmMpSUwWxXyYZ%',!0),V=N.to_luastring('aAbBcCdDeFgGhHIjmMnprRStTuUVwWxXyYzZ%||EcECExEXEyEYOdOeOHOIOmOMOSOuOUOVOwOWOy',!0),F=N.to_luastring('aAbBcdHIjmMpSUwWxXyYzZ%||#c#x#d#H#I#j#m#M#S#U#w#W#y#Y',!0),Y=function(oe,_e,pe){N.lua_pushinteger(oe,pe),N.lua_setfield(oe,-2,N.to_luastring(_e,!0))},J=function(oe,_e,pe){Y(oe,'sec',pe?_e.getUTCSeconds():_e.getSeconds()),Y(oe,'min',pe?_e.getUTCMinutes():_e.getMinutes()),Y(oe,'hour',pe?_e.getUTCHours():_e.getHours()),Y(oe,'day',pe?_e.getUTCDate():_e.getDate()),Y(oe,'month',pe?_e.getUTCMonth():_e.getMonth()),Y(oe,'year',pe?_e.getUTCFullYear():_e.getFullYear()),Y(oe,'wday',pe?_e.getUTCDay():_e.getDay());let ce=new Date;Y(oe,'yday',_Mathfloor((ce-new Date(ce.getFullYear(),0,0))/86400000))},q=P.MAX_INT/2,W=function(oe,_e,pe,ce){let de=N.lua_getfield(oe,-1,N.to_luastring(_e,!0)),Le=N.lua_tointegerx(oe,-1);if(!1===Le){if(de!==N.LUA_TNIL)return I.luaL_error(oe,N.to_luastring(`field '${_e}' is not an integer`),!0);if(0>pe)return I.luaL_error(oe,N.to_luastring(`field '${_e}' missing in date table`),!0);Le=pe}else{if(!(-q<=Le&&Le<=q))return I.luaL_error(oe,N.to_luastring(`field '${_e}' is out-of-bound`),!0);Le-=ce}return N.lua_pop(oe,1),Le},Q=function(oe,_e,pe){for(let ce=K,de=1;0<ce.length&&de<=_e.length;ce=ce.slice(de))if(ce[0]==='|'.charCodeAt(0))de++;else if(N.to_jsstring(_e.slice(0,de))===N.to_jsstring(ce.slice(0,de)))return pe.push(..._e.slice(0,de)),_e.slice(de);I.luaL_argerror(oe,1,N.lua_pushliteral(oe,`invalid conversion specifier '%${_e}'`,_e))},ae=function(oe,_e){let pe=I.luaL_checkinteger(oe,_e);return pe},se={date:function(oe){let _e=I.luaL_optlstring(oe,1,'%c'),pe=1e3*I.luaL_opt(oe,ae,2,new Date().getTime()/1e3),ce=new Date(pe),de=!1;if(_e[0]==='!'.charCodeAt(0)&&(de=!0,_e=_e.slice(1)),null===ce&&I.luaL_error(oe,N.to_luastring('time result cannot be represented in this installation',!0)),'*t'===N.to_jsstring(_e))N.lua_createtable(oe,0,9),J(oe,ce,de);else{let ge=[],Le;for(;0<_e.length;)Le=['%'.charCodeAt(0)],_e[0]==='%'.charCodeAt(0)?(_e=_e.slice(1),_e=Q(oe,_e,Le),ge.push(...N.to_luastring(M(N.to_jsstring(Le),ce)))):(ge.push(_e[0]),_e=_e.slice(1));N.lua_pushstring(oe,ge)}return 1},difftime:function(oe){let _e=ae(oe,1),pe=ae(oe,2);return N.lua_pushnumber(oe,new Date(_e)-new Date(pe)),1},time:function(oe){let _e=new Date;return N.lua_isnoneornil(oe,1)||(I.luaL_checktype(oe,1,N.LUA_TTABLE),N.lua_settop(oe,1),_e.setSeconds(W(oe,'sec',0,0)),_e.setMinutes(W(oe,'min',0,0)),_e.setHours(W(oe,'hour',12,0)),_e.setDate(W(oe,'day',-1,0)),_e.setMonth(W(oe,'month',-1,1)),_e.setFullYear(W(oe,'year',-1,0)),J(oe,_e)),N.lua_pushinteger(oe,_Mathfloor(_e/1e3)),1}};E&&E.exit&&E.env&&E.uptime&&(se.clock=function(ce){return N.lua_pushnumber(ce,E.uptime()),1},se.exit=function(ce){let de;return de=N.lua_isboolean(ce,1)?N.lua_toboolean(ce,1)?0:1:I.luaL_optinteger(ce,1,0),N.lua_toboolean(ce,2)&&N.lua_close(ce),ce&&E.exit(de),0},se.getenv=function(ce){return N.lua_pushliteral(ce,E.env[N.to_jsstring(I.luaL_checkstring(ce,1))]),1}),T.exports.luaopen_os=function(oe){return I.luaL_newlib(oe,se),1}}).call(O,U(19))},function(T,O,U){'use strict';const E=U(0),N=U(1),I=U(41),P=U(11),M=U(27),K=U(3),V=U(4),F=U(18),H=U(7),Y=U(10),J=I.BinOpr,q=F.OpCodesI,W=P.Proto,Q=M.RESERVED,$=V.TValue,ee=I.UnOpr,te=N.char,ue=function(oa){return oa===oe.VCALL||oa===oe.VVARARG},se=function(oa,_a){return H.luaS_eqlngstr(oa,_a)};class ne{constructor(){this.previous=null,this.firstlabel=NaN,this.firstgoto=NaN,this.nactvar=NaN,this.upval=NaN,this.isloop=NaN}}const oe={VVOID:0,VNIL:1,VTRUE:2,VFALSE:3,VK:4,VKFLT:5,VKINT:6,VNONRELOC:7,VLOCAL:8,VUPVAL:9,VINDEXED:10,VJMP:11,VRELOCABLE:12,VCALL:13,VVARARG:14},_e=function(oa){return oe.VLOCAL<=oa&&oa<=oe.VINDEXED};class ce{constructor(){this.k=NaN,this.u={ival:NaN,nval:NaN,info:NaN,ind:{idx:NaN,t:NaN,vt:NaN}},this.t=NaN,this.f=NaN}to(oa){this.k=oa.k,this.u=oa.u,this.t=oa.t,this.f=oa.f}}class de{constructor(){this.f=null,this.prev=null,this.ls=null,this.bl=null,this.pc=NaN,this.lasttarget=NaN,this.jpc=NaN,this.nk=NaN,this.np=NaN,this.firstlocal=NaN,this.nlocvars=NaN,this.nactvar=NaN,this.nups=NaN,this.freereg=NaN}}class Le{constructor(){this.idx=NaN}}class ge{constructor(){this.name=null,this.pc=NaN,this.line=NaN,this.nactvar=NaN}}class Ae{constructor(){this.arr=[],this.n=NaN,this.size=NaN}}const he=function(oa,_a){oa.t.token=0,M.luaX_syntaxerror(oa,_a)},xe=function(oa,_a){M.luaX_syntaxerror(oa,V.luaO_pushfstring(oa.L,N.to_luastring('%s expected',!0),M.luaX_token2str(oa,_a)))},Oe=function(oa,_a,ia){let pa=oa.ls.L,ca=oa.f.linedefined,da=0===ca?'main function':`function at line ${ca}`,La=`too many ${ia} (limit is ${_a}) in ${da}`;M.luaX_syntaxerror(oa.ls,N.to_luastring(La))},Ue=function(oa,_a,ia,pa){_a>ia&&Oe(oa,ia,pa)},Ee=function(oa,_a){return oa.t.token===_a&&(M.luaX_next(oa),!0)},ke=function(oa,_a){oa.t.token!==_a&&xe(oa,_a)},ve=function(oa,_a){ke(oa,_a),M.luaX_next(oa)},Re=function(oa,_a,ia){_a||M.luaX_syntaxerror(oa,ia)},be=function(oa,_a,ia,pa){Ee(oa,_a)||(pa===oa.linenumber?xe(oa,_a):M.luaX_syntaxerror(oa,V.luaO_pushfstring(oa.L,N.to_luastring('%s expected (to close %s at line %d)'),M.luaX_token2str(oa,_a),M.luaX_token2str(oa,ia),pa)))},Se=function(oa){ke(oa,Q.TK_NAME);let _a=oa.t.seminfo.ts;return M.luaX_next(oa),_a},Ne=function(oa,_a,ia){oa.f=oa.t=I.NO_JUMP,oa.k=_a,oa.u.info=ia},Ie=function(oa,_a,ia){Ne(_a,oe.VK,I.luaK_stringK(oa.fs,ia))},Ce=function(oa,_a){Ie(oa,_a,Se(oa))},Pe=function(oa,_a){let ia=oa.fs,pa=ia.f;return pa.locvars[ia.nlocvars]=new V.LocVar,pa.locvars[ia.nlocvars].varname=_a,ia.nlocvars++},Me=function(oa,_a){let ia=oa.fs,pa=oa.dyd,ca=Pe(oa,_a);Ue(ia,pa.actvar.n+1-ia.firstlocal,200,N.to_luastring('local variables',!0)),pa.actvar.arr[pa.actvar.n]=new Le,pa.actvar.arr[pa.actvar.n].idx=ca,pa.actvar.n++},ye=function(oa,_a){Me(oa,M.luaX_newstring(oa,N.to_luastring(_a,!0)))},De=function(oa,_a){let ia=oa.ls.dyd.actvar.arr[oa.firstlocal+_a].idx;return E(ia<oa.nlocvars),oa.f.locvars[ia]},Ke=function(oa,_a){let ia=oa.fs;for(ia.nactvar+=_a;_a;_a--)De(ia,ia.nactvar-_a).startpc=ia.pc},Be=function(oa,_a){for(oa.ls.dyd.actvar.n-=oa.nactvar-_a;oa.nactvar>_a;)De(oa,--oa.nactvar).endpc=oa.pc},Ve=function(oa,_a){let ia=oa.f.upvalues;for(let pa=0;pa<oa.nups;pa++)if(se(ia[pa].name,_a))return pa;return-1},Ge=function(oa,_a,ia){let pa=oa.f;return Ue(oa,oa.nups+1,P.MAXUPVAL,N.to_luastring('upvalues',!0)),pa.upvalues[oa.nups]={instack:ia.k===oe.VLOCAL,idx:ia.u.info,name:_a},oa.nups++},we=function(oa,_a){for(let ia=oa.nactvar-1;0<=ia;ia--)if(se(_a,De(oa,ia).varname))return ia;return-1},Fe=function(oa,_a){let ia=oa.bl;for(;ia.nactvar>_a;)ia=ia.previous;ia.upval=1},He=function(oa,_a,ia,pa){if(null===oa)Ne(ia,oe.VVOID,0);else{let ca=we(oa,_a);if(0<=ca)Ne(ia,oe.VLOCAL,ca),pa||Fe(oa,ca);else{let da=Ve(oa,_a);if(0>da){if(He(oa.prev,_a,ia,0),ia.k===oe.VVOID)return;da=Ge(oa,_a,ia)}Ne(ia,oe.VUPVAL,da)}}},Xe=function(oa,_a){let ia=Se(oa),pa=oa.fs;if(He(pa,ia,_a,1),_a.k===oe.VVOID){let ca=new ce;He(pa,oa.envn,_a,1),E(_a.k!==oe.VVOID),Ie(oa,ca,ia),I.luaK_indexed(pa,_a,ca)}},je=function(oa,_a,ia,pa){let ca=oa.fs,da=_a-ia;if(ue(pa.k))da++,0>da&&(da=0),I.luaK_setreturns(ca,pa,da),1<da&&I.luaK_reserveregs(ca,da-1);else if(pa.k!==oe.VVOID&&I.luaK_exp2nextreg(ca,pa),0<da){let La=ca.freereg;I.luaK_reserveregs(ca,da),I.luaK_nil(ca,La,da)}ia>_a&&(oa.fs.freereg-=ia-_a)},ze=function(oa){let _a=oa.L;++_a.nCcalls,Ue(oa.fs,_a.nCcalls,K.LUAI_MAXCCALLS,N.to_luastring('JS levels',!0))},Ye=function(oa){return oa.L.nCcalls--},Je=function(oa,_a,ia){let pa=oa.fs,ca=oa.dyd.gt,da=ca.arr[_a];if(E(se(da.name,ia.name)),da.nactvar<ia.nactvar){let La=De(pa,da.nactvar).varname,ga=V.luaO_pushfstring(oa.L,N.to_luastring('<goto %s> at line %d jumps into the scope of local \'%s\''),da.name,da.line,La);he(oa,ga)}I.luaK_patchlist(pa,da.pc,ia.pc);for(let La=_a;La<ca.n-1;La++)ca.arr[La]=ca.arr[La+1];ca.n--},Ze=function(oa,_a){let ia=oa.fs.bl,pa=oa.dyd,ca=pa.gt.arr[_a];for(let da=ia.firstlabel,La;da<pa.label.n;da++)if(La=pa.label.arr[da],se(La.name,ca.name))return ca.nactvar>La.nactvar&&(ia.upval||pa.label.n>ia.firstlabel)&&I.luaK_patchclose(oa.fs,ca.pc,La.nactvar),Je(oa,_a,La),!0;return!1},qe=function(oa,_a,ia,pa,ca){let da=_a.n;return _a.arr[da]=new ge,_a.arr[da].name=ia,_a.arr[da].line=pa,_a.arr[da].nactvar=oa.fs.nactvar,_a.arr[da].pc=ca,_a.n=da+1,da},We=function(oa,_a){for(let ia=oa.dyd.gt,pa=oa.fs.bl.firstgoto;pa<ia.n;)se(ia.arr[pa].name,_a.name)?Je(oa,pa,_a):pa++},Qe=function(oa,_a){for(let ia=_a.firstgoto,pa=oa.ls.dyd.gt,ca;ia<pa.n;)ca=pa.arr[ia],ca.nactvar>_a.nactvar&&(_a.upval&&I.luaK_patchclose(oa,ca.pc,_a.nactvar),ca.nactvar=_a.nactvar),Ze(oa.ls,ia)||ia++},$e=function(oa,_a,ia){_a.isloop=ia,_a.nactvar=oa.nactvar,_a.firstlabel=oa.ls.dyd.label.n,_a.firstgoto=oa.ls.dyd.gt.n,_a.upval=0,_a.previous=oa.bl,oa.bl=_a,E(oa.freereg===oa.nactvar)},et=function(oa){let _a=H.luaS_newliteral(oa.L,'break'),ia=qe(oa,oa.dyd.label,_a,0,oa.fs.pc);We(oa,oa.dyd.label.arr[ia])},at=function(oa,_a){let ia=M.isreserved(_a.name)?'<%s> at line %d not inside a loop':'no visible label \'%s\' for <goto> at line %d';ia=V.luaO_pushfstring(oa.L,N.to_luastring(ia),_a.name,_a.line),he(oa,ia)},lt=function(oa){let _a=oa.L,ia=new W(_a),pa=oa.fs,ca=pa.f;return ca.p[pa.np++]=ia,ia},ut=function(oa,_a){let ia=oa.fs.prev;Ne(_a,oe.VRELOCABLE,I.luaK_codeABx(ia,q.OP_CLOSURE,0,ia.np-1)),I.luaK_exp2nextreg(ia,_a)},rt=function(oa,_a,ia){_a.prev=oa.fs,_a.ls=oa,oa.fs=_a,_a.pc=0,_a.lasttarget=0,_a.jpc=I.NO_JUMP,_a.freereg=0,_a.nk=0,_a.np=0,_a.nups=0,_a.nlocvars=0,_a.nactvar=0,_a.firstlocal=oa.dyd.actvar.n,_a.bl=null;let pa=new W(oa.L);pa=_a.f,pa.source=oa.source,pa.maxstacksize=2,$e(_a,ia,!1)},st=function(oa){let _a=oa.bl,ia=oa.ls;if(_a.previous&&_a.upval){let pa=I.luaK_jump(oa);I.luaK_patchclose(oa,pa,_a.nactvar),I.luaK_patchtohere(oa,pa)}_a.isloop&&et(ia),oa.bl=_a.previous,Be(oa,_a.nactvar),E(_a.nactvar===oa.nactvar),oa.freereg=oa.nactvar,ia.dyd.label.n=_a.firstlabel,_a.previous?Qe(oa,_a):_a.firstgoto<ia.dyd.gt.n&&at(ia,ia.dyd.gt.arr[_a.firstgoto])},nt=function(oa){let _a=oa.L,ia=oa.fs,pa=ia.f;I.luaK_ret(ia,0,0),st(ia),oa.fs=ia.prev},ot=function(oa,_a){switch(oa.t.token){case Q.TK_ELSE:case Q.TK_ELSEIF:case Q.TK_END:case Q.TK_EOS:return!0;case Q.TK_UNTIL:return _a;default:return!1;}},_t=function(oa){for(;!ot(oa,1);){if(oa.t.token===Q.TK_RETURN)return void ua(oa);ua(oa)}},it=function(oa,_a){let ia=oa.fs,pa=new ce;I.luaK_exp2anyregup(ia,_a),M.luaX_next(oa),Ce(oa,pa),I.luaK_indexed(ia,_a,pa)},pt=function(oa,_a){M.luaX_next(oa),Pt(oa,_a),I.luaK_exp2val(oa.fs,_a),ve(oa,te[']'])};class ct{constructor(){this.v=new ce,this.t=new ce,this.nh=NaN,this.na=NaN,this.tostore=NaN}}const dt=function(oa,_a){let ia=oa.fs,pa=oa.fs.freereg,ca=new ce,da=new ce;oa.t.token===Q.TK_NAME?(Ue(ia,_a.nh,K.MAX_INT,N.to_luastring('items in a constructor',!0)),Ce(oa,ca)):pt(oa,ca),_a.nh++,ve(oa,te['=']);let La=I.luaK_exp2RK(ia,ca);Pt(oa,da),I.luaK_codeABC(ia,q.OP_SETTABLE,_a.t.u.info,La,I.luaK_exp2RK(ia,da)),ia.freereg=pa},Lt=function(oa,_a){_a.v.k===oe.VVOID||(I.luaK_exp2nextreg(oa,_a.v),_a.v.k=oe.VVOID,_a.tostore===F.LFIELDS_PER_FLUSH&&(I.luaK_setlist(oa,_a.t.u.info,_a.na,_a.tostore),_a.tostore=0))},ft=function(oa,_a){0===_a.tostore||(ue(_a.v.k)?(I.luaK_setmultret(oa,_a.v),I.luaK_setlist(oa,_a.t.u.info,_a.na,N.LUA_MULTRET),_a.na--):(_a.v.k!==oe.VVOID&&I.luaK_exp2nextreg(oa,_a.v),I.luaK_setlist(oa,_a.t.u.info,_a.na,_a.tostore)))},At=function(oa,_a){Pt(oa,_a.v),Ue(oa.fs,_a.na,K.MAX_INT,N.to_luastring('items in a constructor',!0)),_a.na++,_a.tostore++},Tt=function(oa,_a){switch(oa.t.token){case Q.TK_NAME:{M.luaX_lookahead(oa)===te['=']?dt(oa,_a):At(oa,_a);break}case te['[']:{dt(oa,_a);break}default:{At(oa,_a);break}}},ht=function(oa,_a){let ia=oa.fs,pa=oa.linenumber,ca=I.luaK_codeABC(ia,q.OP_NEWTABLE,0,0,0),da=new ct;da.na=da.nh=da.tostore=0,da.t=_a,Ne(_a,oe.VRELOCABLE,ca),Ne(da.v,oe.VVOID,0),I.luaK_exp2nextreg(oa.fs,_a),ve(oa,te['{']);do{if(E(da.v.k===oe.VVOID||0<da.tostore),oa.t.token===te['}'])break;Lt(ia,da),Tt(oa,da)}while(Ee(oa,te[','])||Ee(oa,te[';']));be(oa,te['}'],te['{'],pa),ft(ia,da),F.SETARG_B(ia.f.code[ca],V.luaO_int2fb(da.na)),F.SETARG_C(ia.f.code[ca],V.luaO_int2fb(da.nh))},xt=function(oa){let _a=oa.fs,ia=_a.f,pa=0;if(ia.is_vararg=!1,oa.t.token!==te[')'])do switch(oa.t.token){case Q.TK_NAME:{Me(oa,Se(oa)),pa++;break}case Q.TK_DOTS:{M.luaX_next(oa),ia.is_vararg=!0;break}default:M.luaX_syntaxerror(oa,N.to_luastring('<name> or \'...\' expected',!0));}while(!ia.is_vararg&&Ee(oa,te[',']));Ke(oa,pa),ia.numparams=_a.nactvar,I.luaK_reserveregs(_a,_a.nactvar)},Ot=function(oa,_a,ia,pa){let ca=new de,da=new ne;ca.f=lt(oa),ca.f.linedefined=pa,rt(oa,ca,da),ve(oa,te['(']),ia&&(ye(oa,'self'),Ke(oa,1)),xt(oa),ve(oa,te[')']),_t(oa),ca.f.lastlinedefined=oa.linenumber,be(oa,Q.TK_END,Q.TK_FUNCTION,pa),ut(oa,_a),nt(oa)},Ut=function(oa,_a){let ia=1;for(Pt(oa,_a);Ee(oa,te[',']);)I.luaK_exp2nextreg(oa.fs,_a),Pt(oa,_a),ia++;return ia},Et=function(oa,_a,ia){let pa=oa.fs,ca=new ce;switch(oa.t.token){case te['(']:{M.luaX_next(oa),oa.t.token===te[')']?ca.k=oe.VVOID:(Ut(oa,ca),I.luaK_setmultret(pa,ca)),be(oa,te[')'],te['('],ia);break}case te['{']:{ht(oa,ca);break}case Q.TK_STRING:{Ie(oa,ca,oa.t.seminfo.ts),M.luaX_next(oa);break}default:M.luaX_syntaxerror(oa,N.to_luastring('function arguments expected',!0));}E(_a.k===oe.VNONRELOC);let La=_a.u.info,da;ue(ca.k)?da=N.LUA_MULTRET:(ca.k!==oe.VVOID&&I.luaK_exp2nextreg(pa,ca),da=pa.freereg-(La+1)),Ne(_a,oe.VCALL,I.luaK_codeABC(pa,q.OP_CALL,La,da+1,2)),I.luaK_fixline(pa,ia),pa.freereg=La+1},kt=function(oa,_a){switch(oa.t.token){case te['(']:{let ia=oa.linenumber;return M.luaX_next(oa),Pt(oa,_a),be(oa,te[')'],te['('],ia),void I.luaK_dischargevars(oa.fs,_a)}case Q.TK_NAME:return void Xe(oa,_a);default:M.luaX_syntaxerror(oa,N.to_luastring('unexpected symbol',!0));}},vt=function(oa,_a){let ia=oa.fs,pa=oa.linenumber;for(kt(oa,_a);;)switch(oa.t.token){case te['.']:{it(oa,_a);break}case te['[']:{let ca=new ce;I.luaK_exp2anyregup(ia,_a),pt(oa,ca),I.luaK_indexed(ia,_a,ca);break}case te[':']:{let ca=new ce;M.luaX_next(oa),Ce(oa,ca),I.luaK_self(ia,_a,ca),Et(oa,_a,pa);break}case te['(']:case Q.TK_STRING:case te['{']:{I.luaK_exp2nextreg(ia,_a),Et(oa,_a,pa);break}default:return;}},Rt=function(oa,_a){switch(oa.t.token){case Q.TK_FLT:{Ne(_a,oe.VKFLT,0),_a.u.nval=oa.t.seminfo.r;break}case Q.TK_INT:{Ne(_a,oe.VKINT,0),_a.u.ival=oa.t.seminfo.i;break}case Q.TK_STRING:{Ie(oa,_a,oa.t.seminfo.ts);break}case Q.TK_NIL:{Ne(_a,oe.VNIL,0);break}case Q.TK_TRUE:{Ne(_a,oe.VTRUE,0);break}case Q.TK_FALSE:{Ne(_a,oe.VFALSE,0);break}case Q.TK_DOTS:{let ia=oa.fs;Re(oa,ia.f.is_vararg,N.to_luastring('cannot use \'...\' outside a vararg function',!0)),Ne(_a,oe.VVARARG,I.luaK_codeABC(ia,q.OP_VARARG,0,1,0));break}case te['{']:return void ht(oa,_a);case Q.TK_FUNCTION:return M.luaX_next(oa),void Ot(oa,_a,0,oa.linenumber);default:return void vt(oa,_a);}M.luaX_next(oa)},bt=function(oa){return oa===Q.TK_NOT?ee.OPR_NOT:oa===te['-']?ee.OPR_MINUS:oa===te['~']?ee.OPR_BNOT:oa===te['#']?ee.OPR_LEN:ee.OPR_NOUNOPR},St=function(oa){return oa===te['+']?J.OPR_ADD:oa===te['-']?J.OPR_SUB:oa===te['*']?J.OPR_MUL:oa===te['%']?J.OPR_MOD:oa===te['^']?J.OPR_POW:oa===te['/']?J.OPR_DIV:oa===Q.TK_IDIV?J.OPR_IDIV:oa===te['&']?J.OPR_BAND:oa===te['|']?J.OPR_BOR:oa===te['~']?J.OPR_BXOR:oa===Q.TK_SHL?J.OPR_SHL:oa===Q.TK_SHR?J.OPR_SHR:oa===Q.TK_CONCAT?J.OPR_CONCAT:oa===Q.TK_NE?J.OPR_NE:oa===Q.TK_EQ?J.OPR_EQ:oa===te['<']?J.OPR_LT:oa===Q.TK_LE?J.OPR_LE:oa===te['>']?J.OPR_GT:oa===Q.TK_GE?J.OPR_GE:oa===Q.TK_AND?J.OPR_AND:oa===Q.TK_OR?J.OPR_OR:J.OPR_NOBINOPR},Nt=[{left:10,right:10},{left:10,right:10},{left:11,right:11},{left:11,right:11},{left:14,right:13},{left:11,right:11},{left:11,right:11},{left:6,right:6},{left:4,right:4},{left:5,right:5},{left:7,right:7},{left:7,right:7},{left:9,right:8},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:2,right:2},{left:1,right:1}],Ct=function(oa,_a,ia){ze(oa);let pa=bt(oa.t.token);if(pa!==ee.OPR_NOUNOPR){let da=oa.linenumber;M.luaX_next(oa),Ct(oa,_a,12),I.luaK_prefix(oa.fs,pa,_a,da)}else Rt(oa,_a);let ca=St(oa.t.token);for(;ca!==J.OPR_NOBINOPR&&Nt[ca].left>ia;){let da=new ce,La=oa.linenumber;M.luaX_next(oa),I.luaK_infix(oa.fs,ca,_a);let ga=Ct(oa,da,Nt[ca].right);I.luaK_posfix(oa.fs,ca,_a,da,La),ca=ga}return Ye(oa),ca},Pt=function(oa,_a){Ct(oa,_a,0)},Mt=function(oa){let _a=oa.fs,ia=new ne;$e(_a,ia,0),_t(oa),st(_a)};class yt{constructor(){this.prev=null,this.v=new ce}}const Dt=function(oa,_a,ia){let pa=oa.fs,ca=pa.freereg,da=!1;for(;_a;_a=_a.prev)_a.v.k===oe.VINDEXED&&(_a.v.u.ind.vt===ia.k&&_a.v.u.ind.t===ia.u.info&&(da=!0,_a.v.u.ind.vt=oe.VLOCAL,_a.v.u.ind.t=ca),ia.k===oe.VLOCAL&&_a.v.u.ind.idx===ia.u.info&&(da=!0,_a.v.u.ind.idx=ca));if(da){let La=ia.k===oe.VLOCAL?q.OP_MOVE:q.OP_GETUPVAL;I.luaK_codeABC(pa,La,ca,ia.u.info,0),I.luaK_reserveregs(pa,1)}},Kt=function(oa,_a,ia){let pa=new ce;if(Re(oa,_e(_a.v.k),N.to_luastring('syntax error',!0)),Ee(oa,te[','])){let ca=new yt;ca.prev=_a,vt(oa,ca.v),ca.v.k!==oe.VINDEXED&&Dt(oa,_a,ca.v),Ue(oa.fs,ia+oa.L.nCcalls,K.LUAI_MAXCCALLS,N.to_luastring('JS levels',!0)),Kt(oa,ca,ia+1)}else{ve(oa,te['=']);let ca=Ut(oa,pa);if(ca!==ia)je(oa,ia,ca,pa);else return I.luaK_setoneret(oa.fs,pa),void I.luaK_storevar(oa.fs,_a.v,pa)}Ne(pa,oe.VNONRELOC,oa.fs.freereg-1),I.luaK_storevar(oa.fs,_a.v,pa)},Bt=function(oa){let _a=new ce;return Pt(oa,_a),_a.k===oe.VNIL&&(_a.k=oe.VFALSE),I.luaK_goiftrue(oa.fs,_a),_a.f},Vt=function(oa,_a){let ia=oa.linenumber,pa;Ee(oa,Q.TK_GOTO)?pa=Se(oa):(M.luaX_next(oa),pa=H.luaS_newliteral(oa.L,'break'));let ca=qe(oa,oa.dyd.gt,pa,ia,_a);Ze(oa,ca)},Gt=function(oa,_a,ia){for(let pa=oa.bl.firstlabel;pa<_a.n;pa++)se(ia,_a.arr[pa].name)&&he(oa.ls,N.to_luastring(`label '${ia.jsstring()}' already defined on line ${_a.arr[pa].line}`))},wt=function(oa){for(;oa.t.token===te[';']||oa.t.token===Q.TK_DBCOLON;)ua(oa)},Ft=function(oa,_a,ia){let pa=oa.fs,ca=oa.dyd.label,da;Gt(pa,ca,_a),ve(oa,Q.TK_DBCOLON),da=qe(oa,ca,_a,ia,I.luaK_getlabel(pa)),wt(oa),ot(oa,0)&&(ca.arr[da].nactvar=pa.bl.nactvar),We(oa,ca.arr[da])},Ht=function(oa,_a){let ia=oa.fs,pa=new ne;M.luaX_next(oa);let ca=I.luaK_getlabel(ia),da=Bt(oa);$e(ia,pa,1),ve(oa,Q.TK_DO),Mt(oa),I.luaK_jumpto(ia,ca),be(oa,Q.TK_END,Q.TK_WHILE,_a),st(ia),I.luaK_patchtohere(ia,da)},Xt=function(oa,_a){let ia=oa.fs,pa=I.luaK_getlabel(ia),ca=new ne,da=new ne;$e(ia,ca,1),$e(ia,da,0),M.luaX_next(oa),_t(oa),be(oa,Q.TK_UNTIL,Q.TK_REPEAT,_a);let La=Bt(oa);da.upval&&I.luaK_patchclose(ia,La,da.nactvar),st(ia),I.luaK_patchlist(ia,La,pa),st(ia)},jt=function(oa){let _a=new ce;Pt(oa,_a),I.luaK_exp2nextreg(oa.fs,_a),E(_a.k===oe.VNONRELOC);let ia=_a.u.info;return ia},zt=function(oa,_a,ia,pa,ca){let da=new ne,La=oa.fs,ga;Ke(oa,3),ve(oa,Q.TK_DO);let fa=ca?I.luaK_codeAsBx(La,q.OP_FORPREP,_a,I.NO_JUMP):I.luaK_jump(La);$e(La,da,0),Ke(oa,pa),I.luaK_reserveregs(La,pa),Mt(oa),st(La),I.luaK_patchtohere(La,fa),ca?ga=I.luaK_codeAsBx(La,q.OP_FORLOOP,_a,I.NO_JUMP):(I.luaK_codeABC(La,q.OP_TFORCALL,_a,0,pa),I.luaK_fixline(La,ia),ga=I.luaK_codeAsBx(La,q.OP_TFORLOOP,_a+2,I.NO_JUMP)),I.luaK_patchlist(La,ga,fa+1),I.luaK_fixline(La,ia)},Yt=function(oa,_a,ia){let pa=oa.fs,ca=pa.freereg;ye(oa,'(for index)'),ye(oa,'(for limit)'),ye(oa,'(for step)'),Me(oa,_a),ve(oa,te['=']),jt(oa),ve(oa,te[',']),jt(oa),Ee(oa,te[','])?jt(oa):(I.luaK_codek(pa,pa.freereg,I.luaK_intK(pa,1)),I.luaK_reserveregs(pa,1)),zt(oa,ca,ia,1,1)},Jt=function(oa,_a){let ia=oa.fs,pa=new ce,ca=4,da=ia.freereg;for(ye(oa,'(for generator)'),ye(oa,'(for state)'),ye(oa,'(for control)'),Me(oa,_a);Ee(oa,te[',']);)Me(oa,Se(oa)),ca++;ve(oa,Q.TK_IN);let La=oa.linenumber;je(oa,3,Ut(oa,pa),pa),I.luaK_checkstack(ia,3),zt(oa,da,La,ca-3,0)},Zt=function(oa,_a){let ia=oa.fs,pa=new ne;$e(ia,pa,1),M.luaX_next(oa);let ca=Se(oa);switch(oa.t.token){case te['=']:Yt(oa,ca,_a);break;case te[',']:case Q.TK_IN:Jt(oa,ca);break;default:M.luaX_syntaxerror(oa,N.to_luastring('\'=\' or \'in\' expected',!0));}be(oa,Q.TK_END,Q.TK_FOR,_a),st(ia)},qt=function(oa,_a){let ia=new ne,pa=oa.fs,ca=new ce,da;if(M.luaX_next(oa),Pt(oa,ca),ve(oa,Q.TK_THEN),oa.t.token===Q.TK_GOTO||oa.t.token===Q.TK_BREAK){if(I.luaK_goiffalse(oa.fs,ca),$e(pa,ia,!1),Vt(oa,ca.t),wt(oa),ot(oa,0))return void st(pa);da=I.luaK_jump(pa)}else I.luaK_goiftrue(oa.fs,ca),$e(pa,ia,!1),da=ca.f;return _t(oa),st(pa),(oa.t.token===Q.TK_ELSE||oa.t.token===Q.TK_ELSEIF)&&(_a=I.luaK_concat(pa,_a,I.luaK_jump(pa))),I.luaK_patchtohere(pa,da),_a},Wt=function(oa,_a){let ia=oa.fs,pa=I.NO_JUMP;for(pa=qt(oa,pa);oa.t.token===Q.TK_ELSEIF;)pa=qt(oa,pa);Ee(oa,Q.TK_ELSE)&&Mt(oa),be(oa,Q.TK_END,Q.TK_IF,_a),I.luaK_patchtohere(ia,pa)},Qt=function(oa){let _a=new ce,ia=oa.fs;Me(oa,Se(oa)),Ke(oa,1),Ot(oa,_a,0,oa.linenumber),De(ia,_a.u.info).startpc=ia.pc},$t=function(oa){let _a=0,pa=new ce,ia;do Me(oa,Se(oa)),_a++;while(Ee(oa,te[',']));Ee(oa,te['='])?ia=Ut(oa,pa):(pa.k=oe.VVOID,ia=0),je(oa,_a,ia,pa),Ke(oa,_a)},ea=function(oa,_a){let ia=0;for(Xe(oa,_a);oa.t.token===te['.'];)it(oa,_a);return oa.t.token===te[':']&&(ia=1,it(oa,_a)),ia},ta=function(oa,_a){let ia=new ce,pa=new ce;M.luaX_next(oa);let ca=ea(oa,ia);Ot(oa,pa,ca,_a),I.luaK_storevar(oa.fs,ia,pa),I.luaK_fixline(oa.fs,_a)},aa=function(oa){let _a=oa.fs,ia=new yt;vt(oa,ia.v),oa.t.token===te['=']||oa.t.token===te[',']?(ia.prev=null,Kt(oa,ia,1)):(Re(oa,ia.v.k===oe.VCALL,N.to_luastring('syntax error',!0)),F.SETARG_C(I.getinstruction(_a,ia.v),1))},la=function(oa){let _a=oa.fs,ia=new ce,pa,ca;ot(oa,1)||oa.t.token===te[';']?pa=ca=0:(ca=Ut(oa,ia),ue(ia.k)?(I.luaK_setmultret(_a,ia),ia.k===oe.VCALL&&1===ca&&(F.SET_OPCODE(I.getinstruction(_a,ia),q.OP_TAILCALL),E(I.getinstruction(_a,ia).A===_a.nactvar)),pa=_a.nactvar,ca=N.LUA_MULTRET):1===ca?pa=I.luaK_exp2anyreg(_a,ia):(I.luaK_exp2nextreg(_a,ia),pa=_a.nactvar,E(ca==_a.freereg-pa))),I.luaK_ret(_a,pa,ca),Ee(oa,te[';'])},ua=function(oa){let _a=oa.linenumber;switch(ze(oa),oa.t.token){case te[';']:{M.luaX_next(oa);break}case Q.TK_IF:{Wt(oa,_a);break}case Q.TK_WHILE:{Ht(oa,_a);break}case Q.TK_DO:{M.luaX_next(oa),Mt(oa),be(oa,Q.TK_END,Q.TK_DO,_a);break}case Q.TK_FOR:{Zt(oa,_a);break}case Q.TK_REPEAT:{Xt(oa,_a);break}case Q.TK_FUNCTION:{ta(oa,_a);break}case Q.TK_LOCAL:{M.luaX_next(oa),Ee(oa,Q.TK_FUNCTION)?Qt(oa):$t(oa);break}case Q.TK_DBCOLON:{M.luaX_next(oa),Ft(oa,Se(oa),_a);break}case Q.TK_RETURN:{M.luaX_next(oa),la(oa);break}case Q.TK_BREAK:case Q.TK_GOTO:{Vt(oa,I.luaK_jump(oa.fs));break}default:{aa(oa);break}}E(oa.fs.f.maxstacksize>=oa.fs.freereg&&oa.fs.freereg>=oa.fs.nactvar),oa.fs.freereg=oa.fs.nactvar,Ye(oa)},sa=function(oa,_a){let ia=new ne,pa=new ce;rt(oa,_a,ia),_a.f.is_vararg=!0,Ne(pa,oe.VLOCAL,0),Ge(_a,oa.envn,pa),M.luaX_next(oa),_t(oa),ke(oa,Q.TK_EOS),nt(oa)};T.exports.Dyndata=class{constructor(){this.actvar={arr:[],n:NaN,size:NaN},this.gt=new Ae,this.label=new Ae}},T.exports.expkind=oe,T.exports.expdesc=ce,T.exports.luaY_parser=function(oa,_a,ia,pa,ca,da){let La=new M.LexState,ga=new de,fa=P.luaF_newLclosure(oa,1);return oa.stack[oa.top++]=new $(N.CT.LUA_TLCL,fa),La.h=Y.luaH_new(oa),oa.stack[oa.top++]=La.h,ga.f=fa.p=new W(oa),ga.f.source=H.luaS_new(oa,ca),La.buff=ia,La.dyd=pa,pa.actvar.n=pa.gt.n=pa.label.n=0,M.luaX_setinput(oa,La,_a,ga.f.source,da),sa(La,ga),E(!ga.prev&&1===ga.nups&&!La.fs),E(0===pa.actvar.n&&0===pa.gt.n&&0===pa.label.n),oa.top--,fa},T.exports.vkisinreg=function(oa){return oa===oe.VNONRELOC||oa===oe.VLOCAL}},function(T,O,U){'use strict';const E=U(0),N=U(53).sprintf,I=U(6),P=U(2),M=U(13),K=U(3),V='%',F=V.charCodeAt(0),Y=2147483647,J=function(Ft){let Ht=Ft.indexOf(0);return-1<Ht?Ht:Ft.length},q=function(Ft,Ht){return 0<=Ft?Ft:0-Ft>Ht?0:Ht+Ft+1},ee=function(Ft,Ht,Xt,jt){return E(Array.isArray(Ht)),jt.push(...Ht.slice(0,Xt)),0},ae=M.LUA_NUMBER_FRMLEN.length+1,ue=1,se=function(Ft,Ht,Xt){let jt=_Mathfloor(Xt);return Ft[Ht]=10>jt?jt+'0'.charCodeAt(0):jt-10+'a'.charCodeAt(0),Xt-jt},ne=function(Ft){let Ht=[];if(Object.is(Ft,Infinity))return P.to_luastring('inf',!0);if(Object.is(Ft,-Infinity))return P.to_luastring('-inf',!0);if(_NumberisNaN(Ft))return P.to_luastring('nan',!0);if(0===Ft){let Xt=N(M.LUA_NUMBER_FMT+'x0p+0',Ft).split('').map((jt)=>jt.charCodeAt(0));return Object.is(Ft,-0)?['-'.charCodeAt(0)].concat(Xt):Xt}let Xt=M.frexp(Ft),jt=Xt[0],zt=Xt[1],Yt=0;if(0>jt&&(Ht[Yt++]='-'.charCodeAt(0),jt=-jt),Ht[Yt++]='0'.charCodeAt(0),Ht[Yt++]='x'.charCodeAt(0),jt=se(Ht,Yt++,jt*(1<<ue)),zt-=ue,0<jt){Ht[Yt++]=M.lua_getlocaledecpoint().charCodeAt(0);do jt=se(Ht,Yt++,16*jt);while(0<jt)}let Jt=N('p%+d',zt).split('').map((Zt)=>Zt.charCodeAt(0));return Ht.slice(0,Yt+1).concat(Jt).concat(Ht.slice(Yt))},oe=function(Ft,Ht,Xt){let jt=ne(Xt);if(Ht[ae]==='A'.charCodeAt(0))for(let zt=0;zt<jt.length;zt++)jt[zt]=_StringfromCharCode(jt[zt]).toUpperCase().charCodeAt(0);else Ht[ae]!=='a'.charCodeAt(0)&&I.luaL_error(Ft,P.to_luastring('modifiers for format \'%%a\'/\'%%A\' not implemented'));return jt},pe=['-'.charCodeAt(0),'+'.charCodeAt(0),' '.charCodeAt(0),'#'.charCodeAt(0),'0'.charCodeAt(0)],de=(Ft)=>'a'.charCodeAt(0)<=Ft&&Ft<='z'.charCodeAt(0)||Ft>='A'.charCodeAt(0)&&Ft<='Z'.charCodeAt(0),Le=(Ft)=>'0'.charCodeAt(0)<=Ft&&Ft<='9'.charCodeAt(0),ge=(Ft)=>0<=Ft&&31>=Ft||127===Ft,Ae=(Ft)=>32<Ft&&127>Ft,Te=(Ft)=>/^(?![A-Z]).*$/.test(_StringfromCharCode(Ft)),he=(Ft)=>/^(?![a-z]).*$/.test(_StringfromCharCode(Ft)),xe=(Ft)=>/^[a-zA-Z0-9]$/.test(_StringfromCharCode(Ft)),Oe=(Ft)=>Ae(Ft)&&!xe(Ft),Ue=(Ft)=>/^\s$/.test(_StringfromCharCode(Ft)),Ee=(Ft)=>/^[0-9A-Fa-f]$/.test(_StringfromCharCode(Ft)),ke=function(Ft,Ht){for(let Xt=0;Xt<Ht.length;Xt++)Ft.push(Ht[Xt])},ve=function(Ft,Ht){Ft.push('"'.charCodeAt(0));for(let Xt=Ht.length;Xt--;){if(Ht[0]==='"'.charCodeAt(0)||Ht[0]==='\\'.charCodeAt(0)||Ht[0]==='\n'.charCodeAt(0))Ft.push('\\'.charCodeAt(0)),Ft.push(Ht[0]);else if(ge(Ht[0])){let jt=[];jt=Le(Ht[1])?P.to_luastring(N('\\%03d',Ht[0])):P.to_luastring(N('\\%d',Ht[0])),ke(Ft,jt)}else Ft.push(Ht[0]);Ht=Ht.slice(1)}Ft.push('"'.charCodeAt(0))},Re=function(Ft){if(0>Ft.indexOf('.'.charCodeAt(0))){let Ht=M.lua_getlocaledecpoint().charCodeAt(0),Xt=Ft.indexOf(Ht);Xt&&(Ft[Xt]='.')}},be=function(Ft,Ht,Xt){switch(P.lua_type(Ft,Xt)){case P.LUA_TSTRING:{let jt=P.lua_tostring(Ft,Xt);ve(Ht,jt,jt.length);break}case P.LUA_TNUMBER:{if(!P.lua_isinteger(Ft,Xt)){let jt=P.lua_tonumber(Ft,Xt);ke(Ht,oe(Ft,P.to_luastring(`%${M.LUA_INTEGER_FRMLEN}a`),jt)),Re(Ht)}else{let jt=P.lua_tointeger(Ft,Xt);ke(Ht,P.to_luastring(N('%d',jt)))}break}case P.LUA_TNIL:case P.LUA_TBOOLEAN:{ke(Ht,I.luaL_tolstring(Ft,Xt));break}default:I.luaL_argerror(Ft,Xt,P.to_luastring('value has no literal form',!0));}},Se=function(Ft,Ht,Xt){let jt=Ht;for(;0!==jt[0]&&0<=pe.indexOf(jt[0]);)jt=jt.slice(1);Ht.length-jt.length>=pe.length&&I.luaL_error(Ft,P.to_luastring('invalid format (repeated flags)',!0)),Le(jt[0])&&(jt=jt.slice(1)),Le(jt[0])&&(jt=jt.slice(1)),jt[0]==='.'.charCodeAt(0)&&(jt=jt.slice(1),Le(jt[0])&&(jt=jt.slice(1)),Le(jt[0])&&(jt=jt.slice(1))),Le(jt[0])&&I.luaL_error(Ft,P.to_luastring('invalid format (width or precision too long)',!0)),Xt[0]='%'.charCodeAt(0);for(let zt=0;zt<Ht.length-jt.length+1;zt++)Xt[zt+1]=Ht[zt];return{form:Xt,p:jt}},Ne=function(Ft,Ht){let Xt=Ft.length,jt=Ht.length,zt=Ft[Xt-1];for(let Yt=0;Yt<Ht.length;Yt++)Ft[Yt+Xt-1]=Ht[Yt];return Ft[Xt+jt-1]=zt,Ft},Ce=0,Pe=16,Me=4,ye=8,De=(1<<ye)-1;class Be{constructor(Ft){this.L=Ft,this.islittle=!0,this.maxalign=1}}const Ve={Kint:0,Kuint:1,Kfloat:2,Kchar:3,Kstring:4,Kzstr:5,Kpadding:6,Kpaddalign:7,Knop:8},Ge=function(Ft){return'0'.charCodeAt(0)<=Ft&&Ft<='9'.charCodeAt(0)},we=function(Ft,Ht){if(Ft.off>=Ft.s.length||!Ge(Ft.s[Ft.off]))return Ht;let Xt=0;do Xt=10*Xt+(Ft.s[Ft.off++]-'0'.charCodeAt(0));while(Ft.off<Ft.s.length&&Ge(Ft.s[Ft.off])&&Xt<=(Y-9)/10);return Xt},Fe=function(Ft,Ht,Xt){let jt=we(Ht,Xt);return(jt>Pe||0>=jt)&&I.luaL_error(Ft.L,P.to_luastring('integral size (%d) out of limits [1,%d]'),jt,Pe),jt},He=function(Ft,Ht){let Xt={opt:NaN,size:NaN,opt:Ht.s[Ht.off++],size:0};switch(Xt.opt){case'b'.charCodeAt(0):return Xt.size=1,Xt.opt=Ve.Kint,Xt;case'B'.charCodeAt(0):return Xt.size=1,Xt.opt=Ve.Kuint,Xt;case'h'.charCodeAt(0):return Xt.size=2,Xt.opt=Ve.Kint,Xt;case'H'.charCodeAt(0):return Xt.size=2,Xt.opt=Ve.Kuint,Xt;case'l'.charCodeAt(0):return Xt.size=8,Xt.opt=Ve.Kint,Xt;case'L'.charCodeAt(0):return Xt.size=8,Xt.opt=Ve.Kuint,Xt;case'j'.charCodeAt(0):return Xt.size=4,Xt.opt=Ve.Kint,Xt;case'J'.charCodeAt(0):return Xt.size=8,Xt.opt=Ve.Kuint,Xt;case'T'.charCodeAt(0):return Xt.size=8,Xt.opt=Ve.Kuint,Xt;case'f'.charCodeAt(0):return Xt.size=4,Xt.opt=Ve.Kfloat,Xt;case'd'.charCodeAt(0):return Xt.size=8,Xt.opt=Ve.Kfloat,Xt;case'n'.charCodeAt(0):return Xt.size=8,Xt.opt=Ve.Kfloat,Xt;case'i'.charCodeAt(0):return Xt.size=Fe(Ft,Ht,4),Xt.opt=Ve.Kint,Xt;case'I'.charCodeAt(0):return Xt.size=Fe(Ft,Ht,4),Xt.opt=Ve.Kuint,Xt;case's'.charCodeAt(0):return Xt.size=Fe(Ft,Ht,8),Xt.opt=Ve.Kstring,Xt;case'c'.charCodeAt(0):return Xt.size=we(Ht,-1),-1===Xt.size&&I.luaL_error(Ft.L,P.to_luastring('missing size for format option \'c\'')),Xt.opt=Ve.Kchar,Xt;case'z'.charCodeAt(0):return Xt.opt=Ve.Kzstr,Xt;case'x'.charCodeAt(0):return Xt.size=1,Xt.opt=Ve.Kpadding,Xt;case'X'.charCodeAt(0):return Xt.opt=Ve.Kpaddalign,Xt;case' '.charCodeAt(0):break;case'<'.charCodeAt(0):Ft.islittle=!0;break;case'>'.charCodeAt(0):Ft.islittle=!1;break;case'='.charCodeAt(0):Ft.islittle=!0;break;case'!'.charCodeAt(0):Ft.maxalign=Fe(Ft,Ht,8);break;default:I.luaL_error(Ft.L,P.to_luastring('invalid format option \'%c\''),Xt.opt);}return Xt.opt=Ve.Knop,Xt},Xe=function(Ft,Ht,Xt){let jt={opt:NaN,size:NaN,ntoalign:NaN},zt=He(Ft,Xt);jt.size=zt.size,jt.opt=zt.opt;let Yt=jt.size;if(jt.opt===Ve.Kpaddalign)if(Xt.off>=Xt.s.length||0===Xt.s[Xt.off])I.luaL_argerror(Ft.L,1,P.to_luastring('invalid next option for option \'X\'',!0));else{let Jt=He(Ft,Xt);Yt=Jt.size,Jt=Jt.opt,(Jt===Ve.Kchar||0===Yt)&&I.luaL_argerror(Ft.L,1,P.to_luastring('invalid next option for option \'X\'',!0))}return 1>=Yt||jt.opt===Ve.Kchar?jt.ntoalign=0:(Yt>Ft.maxalign&&(Yt=Ft.maxalign),0!=(Yt&Yt-1)&&I.luaL_argerror(Ft.L,1,P.to_luastring('format asks for alignment not power of 2',!0)),jt.ntoalign=Yt-(Ht&Yt-1)&Yt-1),jt},je=function(Ft,Ht,Xt,jt,zt){let Yt=Array(jt);Yt[Xt?0:jt-1]=Ht&De;for(let Jt=1;Jt<jt;Jt++)Ht>>=ye,Yt[Xt?Jt:jt-1-Jt]=Ht&De;if(zt&&jt>Me)for(let Jt=Me;Jt<jt;Jt++)Yt[Xt?Jt:jt-1-Jt]=De;Ft.push(...Yt)},ze=function(Ft,Ht,Xt,jt){let zt=new DataView(new ArrayBuffer(jt));zt.setFloat64(0,Ht,Xt);for(let Yt=0;8>Yt;Yt++)Ft.push(zt.getUint8(Yt,Xt))},et=function(Ft,Ht,Xt,jt,zt){let Yt=0,Jt=jt<=Me?jt:Me;for(let Zt=Jt-1;0<=Zt;Zt--)Yt<<=ye,Yt|=Ht[Xt?Zt:jt-1-Zt];if(jt<Me){if(zt){let Zt=1<<jt*ye-1;Yt=(Yt^Zt)-Zt}}else if(jt>Me){let Zt=zt||0<=Yt?0:De;for(let qt=Jt;qt<jt;qt++)Ht[Xt?qt:jt-1-qt]!==Zt&&I.luaL_error(Ft,P.to_luastring('%d-byte integer does not fit into Lua Integer'),jt)}return Yt},at=function(Ft,Ht,Xt,jt){E(Ht.length>=jt);let zt=new DataView(new ArrayBuffer(jt));return Ht.forEach((Yt,Jt)=>zt.setUint8(Jt,Yt,Xt)),zt.getFloat64(0,Xt)},ut=-1,rt=-2,st=200,nt=['^'.charCodeAt(0),'$'.charCodeAt(0),'*'.charCodeAt(0),'+'.charCodeAt(0),'?'.charCodeAt(0),'.'.charCodeAt(0),'('.charCodeAt(0),'['.charCodeAt(0),'%'.charCodeAt(0),'-'.charCodeAt(0)];class ot{constructor(Ft){this.src=null,this.src_init=null,this.src_end=null,this.p=null,this.p_end=null,this.L=Ft,this.matchdepth=NaN,this.level=NaN,this.capture=[]}}const _t=function(Ft,Ht){return Ht-='1'.charCodeAt(0),0>Ht||Ht>=Ft.level||Ft.capture[Ht].len===ut?I.luaL_error(Ft.L,P.to_luastring('invalid capture index %%%d'),Ht+1):Ht},it=function(Ft){let Ht=Ft.level;for(Ht--;0<=Ht;Ht--)if(Ft.capture[Ht].len===ut)return Ht;return I.luaL_error(Ft.L,P.to_luastring('invalid pattern capture'))},pt=function(Ft,Ht){switch(Ft.p[Ht++]){case F:return Ht===Ft.p_end&&I.luaL_error(Ft.L,P.to_luastring('malformed pattern (ends with \'%%\')')),Ht+1;case'['.charCodeAt(0):{Ft.p[Ht]==='^'.charCodeAt(0)&&Ht++;do Ht===Ft.p_end&&I.luaL_error(Ft.L,P.to_luastring('malformed pattern (missing \']\')')),Ft.p[Ht++]===F&&Ht<Ft.p_end&&Ht++;while(Ft.p[Ht]!==']'.charCodeAt(0));return Ht+1}default:return Ht;}},ct=function(Ft,Ht){let Xt;switch(_StringfromCharCode(Ht).toLowerCase().charCodeAt(0)){case'a'.charCodeAt(0):Xt=de(Ft);break;case'c'.charCodeAt(0):Xt=ge(Ft);break;case'd'.charCodeAt(0):Xt=Le(Ft);break;case'g'.charCodeAt(0):Xt=Ae(Ft);break;case'l'.charCodeAt(0):Xt=Te(Ft);break;case'p'.charCodeAt(0):Xt=Oe(Ft);break;case's'.charCodeAt(0):Xt=Ue(Ft);break;case'u'.charCodeAt(0):Xt=he(Ft);break;case'w'.charCodeAt(0):Xt=xe(Ft);break;case'x'.charCodeAt(0):Xt=Ee(Ft);break;case'z'.charCodeAt(0):Xt=0===Ft;break;default:return Ht===Ft;}return Te(Ht)?Xt:!Xt},dt=function(Ft,Ht,Xt,jt){let zt=!0;for(Ft.p[Xt+1]==='^'.charCodeAt(0)&&(zt=!1,Xt++);++Xt<jt;)if(Ft.p[Xt]===F){if(Xt++,ct(Ht,Ft.p[Xt]))return zt;}else if(Ft.p[Xt+1]==='-'.charCodeAt(0)&&Xt+2<jt){if(Xt+=2,Ft.p[Xt-2]<=Ht&&Ht<=Ft.p[Xt])return zt;}else if(Ft.p[Xt]===Ht)return zt;return!zt},Lt=function(Ft,Ht,Xt,jt){if(Ht>=Ft.src_end)return!1;let zt=Ft.src[Ht];switch(Ft.p[Xt]){case'.'.charCodeAt(0):return!0;case F:return ct(zt,Ft.p[Xt+1]);case'['.charCodeAt(0):return dt(Ft,zt,Xt,jt-1);default:return Ft.p[Xt]===zt;}},ft=function(Ft,Ht,Xt){if(Xt>=Ft.p_end-1&&I.luaL_error(Ft.L,P.to_luastring('malformed pattern (missing arguments to \'%%b\'')),Ft.src[Ht]!==Ft.p[Xt])return null;for(let jt=Ft.p[Xt],zt=Ft.p[Xt+1],Yt=1;++Ht<Ft.src_end;)if(Ft.src[Ht]!==zt)Ht===jt&&Yt++;else if(0==--Yt)return Ht+1;return null},At=function(Ft,Ht,Xt,jt){let zt=0;for(;Lt(Ft,Ht+zt,Xt,jt);)zt++;for(;0<=zt;){let Yt=Ut(Ft,Ht+zt,jt+1);if(Yt)return Yt;zt--}return null},Tt=function(Ft,Ht,Xt,jt){for(;;){let zt=Ut(Ft,Ht,jt+1);if(null!==zt)return zt;if(Lt(Ft,Ht,Xt,jt))Ht++;else return null}},ht=function(Ft,Ht,Xt,jt){let zt=Ft.level;32<=zt&&I.luaL_error(Ft.L,P.to_luastring('too many captures',!0)),Ft.capture[zt]=Ft.capture[zt]?Ft.capture[zt]:{},Ft.capture[zt].init=Ht,Ft.capture[zt].len=jt,Ft.level=zt+1;let Yt;return null===(Yt=Ut(Ft,Ht,Xt))&&Ft.level--,Yt},xt=function(Ft,Ht,Xt){let jt=it(Ft);Ft.capture[jt].len=Ht-Ft.capture[jt].init;let zt;return null===(zt=Ut(Ft,Ht,Xt))&&(Ft.capture[jt].len=ut),zt},Ot=function(Ft,Ht,Xt){Xt=_t(Ft,Xt);let jt=Ft.capture[Xt].len;return Ft.src_end>=jt&&Ft.src.slice(Ft.capture[Xt].init,Ft.capture[Xt].init+jt)===Ft.src.slice(Ht,Ht+jt)?Ht+jt:null},Ut=function(Ft,Ht,Xt){let jt=!1,zt=!0;for(0==Ft.matchdepth--&&I.luaL_error(Ft.L,P.to_luastring('pattern too complex',!0));zt||jt;)if(zt=!1,Xt!==Ft.p_end)switch(jt?'x'.charCodeAt(0):Ft.p[Xt]){case'('.charCodeAt(0):{Ht=Ft.p[Xt+1]===')'.charCodeAt(0)?ht(Ft,Ht,Xt+2,rt):ht(Ft,Ht,Xt+1,ut);break}case')'.charCodeAt(0):{Ht=xt(Ft,Ht,Xt+1);break}case'$'.charCodeAt(0):{if(Xt+1!==Ft.p_end){jt=!0;break}Ht=0===Ft.src.slice(Ht).length?Ht:null;break}case F:{switch(Ft.p[Xt+1]){case'b'.charCodeAt(0):{Ht=ft(Ft,Ht,Xt+2),null!==Ht&&(Xt=Xt.slice(4),zt=!0);break}case'f'.charCodeAt(0):{Xt+=2,'['!==Ft.p[Xt]&&I.luaL_error(Ft.L,P.to_luastring('missing \'[\' after \'%%f\' in pattern'));let Yt=pt(Ft,Xt),Jt=Ht===Ft.src_init?0:Ft.s[Ht-1];if(!dt(Ft,Jt,Xt,Yt-1)&&dt(Ft,Ft.src[Ht],Xt,Yt-1)){Xt=Yt,zt=!0;break}Ht=null;break}case'0'.charCodeAt(0):case'1'.charCodeAt(0):case'2'.charCodeAt(0):case'3'.charCodeAt(0):case'4'.charCodeAt(0):case'5'.charCodeAt(0):case'6'.charCodeAt(0):case'7'.charCodeAt(0):case'8'.charCodeAt(0):case'9'.charCodeAt(0):{Ht=Ot(Ft,Ht,Ft.p[Xt+1]),null!==Ht&&(Xt+=2,zt=!0);break}default:jt=!0;}break}default:{jt=!1;let Yt=pt(Ft,Xt);if(!!Lt(Ft,Ht,Xt,Yt))switch(Ft.p[Yt]){case'?'.charCodeAt(0):{let Jt;null===(Jt=Ut(Ft,Ht+1,Yt+1))?(Xt=Yt+1,zt=!0):Ht=Jt;break}case'+'.charCodeAt(0):Ht++;case'*'.charCodeAt(0):Ht=At(Ft,Ht,Xt,Yt);break;case'-'.charCodeAt(0):Ht=Tt(Ft,Ht,Xt,Yt);break;default:Ht++,Xt=Yt,zt=!0;}else if(Ft.p[Yt]==='*'.charCodeAt(0)||Ft.p[Yt]==='?'.charCodeAt(0)||Ft.p[Yt]==='-'.charCodeAt(0)){Xt=Yt+1,zt=!0;break}else Ht=null;break}}return Ft.matchdepth++,Ht},Et=function(Ft,Ht,Xt,jt){if(Ht>=Ft.level)0===Ht?P.lua_pushlstring(Ft.L,Ft.src.slice(Xt),jt-Xt):I.luaL_error(Ft.L,P.to_luastring(`invalid capture index %${Ht+1}`));else{let zt=Ft.capture[Ht].len;zt===ut&&I.luaL_error(Ft.L,P.to_luastring('unfinished capture',!0)),zt===rt?P.lua_pushinteger(Ft.L,Ft.src_init+1):P.lua_pushlstring(Ft.L,Ft.src.slice(Ft.capture[Ht].init),zt)}},kt=function(Ft,Ht,Xt){let jt=0===Ft.level&&Ft.src.slice(Ht)?1:Ft.level;I.luaL_checkstack(Ft.L,jt,P.to_luastring('too many catpures',!0));for(let zt=0;zt<jt;zt++)Et(Ft,zt,Ht,Xt);return jt},vt=function(Ft,Ht){let Xt=0;do{let jt=!1,zt=Ft.slice(Xt);for(let Yt=0;Yt<nt.length;Yt++)if(-1<zt.indexOf(nt[Yt])){jt=!0;break}if(jt)return!1;++Xt}while(Xt<=Ht);return!0},Rt=function(Ft,Ht,Xt,jt,zt,Yt){Ft.L=Ht,Ft.matchdepth=st,Ft.src=Xt,Ft.src_init=0,Ft.src_end=jt,Ft.p=zt,Ft.p_end=Yt},bt=function(Ft){Ft.level=0,E(Ft.matchdepth===st)},St=function(Ft,Ht,Xt){var jt=Xt>>>0,zt=Ht.length,Yt=Ft.length+1-zt;loop:for(;jt<Yt;jt++){for(let Jt=0;Jt<zt;Jt++)if(Ft[jt+Jt]!==Ht[Jt])continue loop;return jt}return-1},Nt=function(Ft,Ht){let Xt=I.luaL_checkstring(Ft,1),jt=I.luaL_checkstring(Ft,2),zt=Xt.length,Yt=jt.length,Jt=q(I.luaL_optinteger(Ft,3,1),zt);if(1>Jt)Jt=1;else if(Jt>zt+1)return P.lua_pushnil(Ft),1;if(Ht&&(P.lua_toboolean(Ft,4)||vt(jt,Yt))){let Zt=St(Xt.slice(Jt-1),jt,0);if(-1<Zt)return P.lua_pushinteger(Ft,Jt+Zt),P.lua_pushinteger(Ft,Jt+Zt+Yt-1),2}else{let Zt=new ot(Ft),qt=Jt-1,Wt=jt[0]==='^'.charCodeAt(0);Wt&&(jt=jt.slice(1),Yt--),Rt(Zt,Ft,Xt,zt,jt,Yt);do{let Qt;if(bt(Zt),null!==(Qt=Ut(Zt,qt,0)))return Ht?(P.lua_pushinteger(Ft,qt+1),P.lua_pushinteger(Ft,Qt),kt(Zt,null,0)+2):kt(Zt,qt,Qt)}while(qt++<Zt.src_end&&!Wt)}return P.lua_pushnil(Ft),1};class Pt{constructor(){this.src=NaN,this.p=NaN,this.lastmatch=NaN,this.ms=new ot}}const Mt=function(Ft){let Ht=P.lua_touserdata(Ft,P.lua_upvalueindex(3));Ht.ms.L=Ft;for(let Xt=Ht.src;Xt<Ht.ms.src_end;Xt++){bt(Ht.ms);let jt;if(null!==(jt=Ut(Ht.ms,Xt,Ht.p))&&jt!==Ht.lastmatch)return Ht.src=Ht.lastmatch=jt,kt(Ht.ms,Xt,jt)}return 0},Dt=function(Ft,Ht,Xt,jt){let zt=Ft.L,Yt=P.lua_tostring(zt,3),Jt=Yt.length;for(let Zt=0;Zt<Jt;Zt++)Yt[Zt]===F?(Zt++,Le(Yt[Zt])?Yt[Zt]==='0'.charCodeAt(0)?I.luaL_addlstring(Ht,Ft.src.slice(Xt),jt-Xt):(Et(Ft,Yt[Zt]-'1'.charCodeAt(0),Xt,jt),I.luaL_tolstring(zt,-1),P.lua_remove(zt,-2),I.luaL_addvalue(Ht)):(Yt[Zt]!==F&&I.luaL_error(zt,P.to_luastring('invalid use of \'%c\' in replacement string'),V),I.luaL_addchar(Ht,Yt[Zt]))):I.luaL_addchar(Ht,Yt[Zt])},Kt=function(Ft,Ht,Xt,jt,zt){let Yt=Ft.L;switch(zt){case P.LUA_TFUNCTION:{P.lua_pushvalue(Yt,3);let Jt=kt(Ft,Xt,jt);P.lua_call(Yt,Jt,1);break}case P.LUA_TTABLE:{Et(Ft,0,Xt,jt),P.lua_gettable(Yt,3);break}default:return void Dt(Ft,Ht,Xt,jt);}P.lua_toboolean(Yt,-1)?!P.lua_isstring(Yt,-1)&&I.luaL_error(Yt,P.to_luastring('invalid replacement value (a %s)'),I.luaL_typename(Yt,-1)):(P.lua_pop(Yt,1),P.lua_pushlstring(Yt,Xt,jt-Xt)),I.luaL_addvalue(Ht)},Vt={byte:function(Ft){let Ht=I.luaL_checkstring(Ft,1),Xt=Ht.length,jt=q(I.luaL_optinteger(Ft,2,1),Xt),zt=q(I.luaL_optinteger(Ft,3,jt),Xt);if(1>jt&&(jt=1),zt>Xt&&(zt=Xt),jt>zt)return 0;if(zt-jt>=K.MAX_INT)return I.luaL_error(Ft,P.to_luastring('string slice too long',!0));let Yt=zt-jt+1;I.luaL_checkstack(Ft,Yt,P.to_luastring('string slice too long',!0));for(let Jt=0;Jt<Yt;Jt++)P.lua_pushinteger(Ft,Ht[jt+Jt-1]);return Yt},char:function(Ft){let Ht=P.lua_gettop(Ft),Xt=[];for(let jt=1,zt;jt<=Ht;jt++)zt=I.luaL_checkinteger(Ft,jt),I.luaL_argcheck(Ft,0<=zt&&255>=zt,'value out of range'),Xt.push(zt);return P.lua_pushstring(Ft,Xt),1},dump:function(Ft){let Ht=[],Xt=P.lua_toboolean(Ft,2);return(I.luaL_checktype(Ft,1,P.LUA_TFUNCTION),P.lua_settop(Ft,1),0!==P.lua_dump(Ft,ee,Ht,Xt))?I.luaL_error(Ft,P.to_luastring('unable to dump given function')):(P.lua_pushstring(Ft,Ht),1)},find:function(Ft){return Nt(Ft,1)},format:function(Ft){let Ht=P.lua_gettop(Ft),Xt=1,jt=I.luaL_checkstring(Ft,Xt),zt=[];for(;0<jt.length;)if(jt[0]!==F)zt.push(jt[0]),jt=jt.slice(1);else if((jt=jt.slice(1))[0]===F)zt.push(jt[0]),jt=jt.slice(1);else{let Yt=[];++Xt>Ht&&I.luaL_argerror(Ft,Xt,P.to_luastring('no value',!0));let Jt=Se(Ft,jt,Yt);switch(jt=Jt.p,Yt=Jt.form,_StringfromCharCode(jt[0])){case'c':{jt=jt.slice(1),zt.push(I.luaL_checkinteger(Ft,Xt));break}case'd':case'i':case'o':case'u':case'x':case'X':{jt=jt.slice(1);let Zt=I.luaL_checkinteger(Ft,Xt);Yt=Ne(Yt,M.LUA_INTEGER_FRMLEN.split('').map((qt)=>qt.charCodeAt(0))),ke(zt,P.to_luastring(N(_StringfromCharCode(...Yt),Zt)));break}case'a':case'A':{jt=jt.slice(1),Yt=Ne(Yt,M.LUA_INTEGER_FRMLEN.split('').map((Zt)=>Zt.charCodeAt(0))),ke(zt,oe(Ft,Yt,I.luaL_checknumber(Ft,Xt)));break}case'e':case'E':case'f':case'g':case'G':{jt=jt.slice(1);let Zt=I.luaL_checknumber(Ft,Xt);Yt=Ne(Yt,M.LUA_INTEGER_FRMLEN.split('').map((qt)=>qt.charCodeAt(0))),ke(zt,P.to_luastring(N(_StringfromCharCode(...Yt),Zt)));break}case'q':{jt=jt.slice(1),be(Ft,zt,Xt);break}case's':{jt=jt.slice(1);let Zt=I.luaL_tolstring(Ft,Xt);2>=Yt.length||0===Yt[2]?(ke(zt,Zt),P.lua_pop(Ft,1)):(I.luaL_argcheck(Ft,Zt.length===J(Zt),Xt,P.to_luastring('string contains zeros',!0)),0>Yt.indexOf('.'.charCodeAt(0))&&100<=Zt.length?(ke(zt,Zt),P.lua_pop(Ft,1)):(ke(zt,P.to_luastring(N(_StringfromCharCode(...Yt),P.to_jsstring(Zt)))),P.lua_pop(Ft,1)));break}default:return I.luaL_error(Ft,P.to_luastring('invalid option \'%%%c\' to \'format\''),jt[0]);}}return P.lua_pushstring(Ft,zt),1},gmatch:function(Ft){let Ht=I.luaL_checkstring(Ft,1),Xt=I.luaL_checkstring(Ft,2),jt=Ht.length,zt=Xt.length;P.lua_settop(Ft,2);let Yt=new Pt;return P.lua_pushlightuserdata(Ft,Yt),Rt(Yt.ms,Ft,Ht,jt,Xt,zt),Yt.src=0,Yt.p=0,Yt.lastmatch=null,P.lua_pushcclosure(Ft,Mt,3),1},gsub:function(Ft){let Ht=I.luaL_checkstring(Ft,1),Xt=Ht.length,jt=I.luaL_checkstring(Ft,2),zt=jt.length,Yt=null,Jt=P.lua_type(Ft,3),Zt=I.luaL_optinteger(Ft,4,Xt+1),qt=jt[0]==='^'.charCodeAt(0),Wt=0,Qt=new ot(Ft),$t=new I.luaL_Buffer;for(I.luaL_argcheck(Ft,Jt===P.LUA_TNUMBER||Jt===P.LUA_TSTRING||Jt===P.LUA_TFUNCTION||Jt===P.LUA_TTABLE,3,P.to_luastring('string/function/table expected',!0)),I.luaL_buffinit(Ft,$t),qt&&(jt=jt.slice(1),zt--),Rt(Qt,Ft,Ht,Xt,jt,zt),Ht=0,jt=0;Wt<Zt;){let ea;if(bt(Qt),null!==(ea=Ut(Qt,Ht,jt))&&ea!==Yt)Wt++,Kt(Qt,$t,Ht,ea,Jt),Ht=Yt=ea;else if(Ht<Qt.src_end)I.luaL_addchar($t,Qt.src[Ht++]);else break;if(qt)break}return I.luaL_addlstring($t,Qt.src.slice(Ht),Qt.src_end-Ht),I.luaL_pushresult($t),P.lua_pushinteger(Ft,Wt),2},len:function(Ft){return P.lua_pushinteger(Ft,I.luaL_checkstring(Ft,1).length),1},lower:function(Ft){return P.lua_pushstring(Ft,P.to_luastring(P.to_jsstring(I.luaL_checkstring(Ft,1)).toLowerCase())),1},match:function(Ft){return Nt(Ft,0)},pack:function(Ft){let Ht=[],Xt=new Be(Ft),jt={s:I.luaL_checkstring(Ft,1),off:0},zt=1,Yt=0;for(P.lua_pushnil(Ft);jt.off<jt.s.length;){let Jt=Xe(Xt,Yt,jt),Zt=Jt.opt,qt=Jt.size,Wt=Jt.ntoalign;for(Yt+=Wt+qt;0<Wt--;)Ht.push(Ce);switch(zt++,Zt){case Ve.Kint:{let Qt=I.luaL_checkinteger(Ft,zt);if(qt<Me){let $t=1<<8*qt-1;I.luaL_argcheck(Ft,-$t<=Qt&&Qt<$t,zt,P.to_luastring('integer overflow',!0))}je(Ht,Qt,Xt.islittle,qt,0>Qt);break}case Ve.Kuint:{let Qt=I.luaL_checkinteger(Ft,zt);qt<Me&&I.luaL_argcheck(Ft,Qt<1<<qt*ye,zt,P.to_luastring('unsigned overflow',!0)),je(Ht,Qt,Xt.islittle,qt,!1);break}case Ve.Kfloat:{let Qt=I.luaL_checknumber(Ft,zt);ze(Ht,Qt,Xt.islittle,qt);break}case Ve.Kchar:{let Qt=I.luaL_checkstring(Ft,zt),$t=Qt.length;for(I.luaL_argcheck(Ft,$t<=qt,zt,P.to_luastring('string long than given size',!0)),Ht.push(...Qt);$t++<qt;)Ht.push(Ce);break}case Ve.Kstring:{let Qt=I.luaL_checkstring(Ft,zt),$t=Qt.length;I.luaL_argcheck(Ft,qt>=ye||$t<1<<qt*ye,zt,P.to_luastring('string length does not fit in given size',!0)),je(Ht,$t,Xt.islittle,qt,0),Ht.push(...Qt),Yt+=$t;break}case Ve.Kzstr:{let Qt=I.luaL_checkstring(Ft,zt),$t=Qt.length;I.luaL_argcheck(Ft,Qt.length===_StringfromCharCode(...Qt).length,zt,P.to_luastring('strings contains zeros',!0)),Ht.push(...Qt),Ht.push(0),Yt+=$t+1;break}case Ve.Kpadding:Ht.push(Ce);case Ve.Kpaddalign:case Ve.Knop:zt--;}}return P.lua_pushstring(Ft,Ht),1},packsize:function(Ft){let Ht=new Be(Ft),Xt={s:I.luaL_checkstring(Ft,1),off:0},jt=0;for(;Xt.off<Xt.s.length;){let zt=Xe(Ht,jt,Xt),Yt=zt.opt,Jt=zt.size,Zt=zt.ntoalign;switch(Jt+=Zt,I.luaL_argcheck(Ft,jt<=Y-Jt-1,P.to_luastring('format result too large',!0)),jt+=Jt,Yt){case Ve.Kstring:case Ve.Kzstr:I.luaL_argerror(Ft,1,P.to_luastring('variable-length format',!0));default:}}return P.lua_pushinteger(Ft,jt),1},rep:function(Ft){let Ht=I.luaL_checkstring(Ft,1),Xt=I.luaL_checkinteger(Ft,2),jt=I.luaL_optstring(Ft,3,[]);if(Ht.length+jt.length<Ht.length||Ht.length+jt.length>Y/Xt)return I.luaL_error(Ft,P.to_luastring('resulting string too large',!0));let zt=[];for(let Yt=0;Yt<Xt-1;Yt++)zt=zt.concat(Ht.concat(jt));return zt=zt.concat(Ht),P.lua_pushstring(Ft,0<Xt?zt:[]),1},reverse:function(Ft){return P.lua_pushstring(Ft,I.luaL_checkstring(Ft,1).slice(0).reverse()),1},sub:function(Ft){let Ht=I.luaL_checkstring(Ft,1),Xt=Ht.length,jt=q(I.luaL_checkinteger(Ft,2),Xt),zt=q(I.luaL_optinteger(Ft,3,-1),Xt);return 1>jt&&(jt=1),zt>Xt&&(zt=Xt),jt<=zt?P.lua_pushstring(Ft,Ht.slice(jt-1,jt-1+(zt-jt+1))):P.lua_pushliteral(Ft,''),1},unpack:function(Ft){let Ht=new Be(Ft),Xt={s:I.luaL_checkstring(Ft,1),off:0},jt=I.luaL_checkstring(Ft,2),zt=jt.length,Yt=q(I.luaL_optinteger(Ft,3,1),zt)-1,Jt=0;for(I.luaL_argcheck(Ft,Yt<=zt,3,P.to_luastring('initial position out of string',!0));Xt.off<Xt.s.length;){let Zt=Xe(Ht,Yt,Xt),qt=Zt.opt,Wt=Zt.size,Qt=Zt.ntoalign;switch(Yt+Qt+Wt>zt&&I.luaL_argerror(Ft,2,P.to_luastring('data string too short',!0)),Yt+=Qt,I.luaL_checkstack(Ft,2,P.to_luastring('too many results',!0)),Jt++,qt){case Ve.Kint:case Ve.Kuint:{let $t=et(Ft,jt.slice(Yt),Ht.islittle,Wt,qt===Ve.Kint);P.lua_pushinteger(Ft,$t);break}case Ve.Kfloat:{let $t=at(Ft,jt.slice(Yt),Ht.islittle,Wt);P.lua_pushnumber(Ft,$t);break}case Ve.Kchar:{P.lua_pushstring(Ft,jt.slice(Yt,Yt+Wt));break}case Ve.Kstring:{let $t=et(Ft,jt.slice(Yt),Ht.islittle,Wt,0);I.luaL_argcheck(Ft,Yt+$t+Wt<=zt,2,P.to_luastring('data string too short',!0)),P.lua_pushstring(Ft,jt.slice(Yt+Wt,Yt+Wt+$t)),Yt+=$t;break}case Ve.Kzstr:{let $t=jt.slice(Yt).indexOf(0);P.lua_pushstring(Ft,jt.slice(Yt,Yt+$t)),Yt+=$t+1;break}case Ve.Kpaddalign:case Ve.Kpadding:case Ve.Knop:Jt--;}Yt+=Wt}return P.lua_pushinteger(Ft,Yt+1),Jt+1},upper:function(Ft){return P.lua_pushstring(Ft,P.to_luastring(P.to_jsstring(I.luaL_checkstring(Ft,1)).toUpperCase())),1}},Gt=function(Ft){P.lua_createtable(Ft,0,1),P.lua_pushliteral(Ft,''),P.lua_pushvalue(Ft,-2),P.lua_setmetatable(Ft,-2),P.lua_pop(Ft,1),P.lua_pushvalue(Ft,-2),P.lua_setfield(Ft,-2,P.to_luastring('__index',!0)),P.lua_pop(Ft,1)};T.exports.luaopen_string=function(Ft){return I.luaL_newlib(Ft,Vt),Gt(Ft),1}},function(T,O,U){'use strict';const E=U(0),N=U(2),I=U(6),P=U(3),M=1,K=2,V=4,F=M|K,H=function(Ae,Te,he){return N.lua_pushstring(Ae,Te),N.lua_rawget(Ae,-he)!==N.LUA_TNIL},Y=function(Ae,Te,he){if(N.lua_type(Ae,Te)!==N.LUA_TTABLE){let xe=1;N.lua_getmetatable(Ae,Te)&&(!(he&M)||H(Ae,N.to_luastring('__index',!0),++xe))&&(!(he&K)||H(Ae,N.to_luastring('__newindex',!0),++xe))&&(!(he&V)||H(Ae,N.to_luastring('__len',!0),++xe))?N.lua_pop(Ae,xe):I.luaL_checktype(Ae,Te,N.LUA_TTABLE)}},J=function(Ae,Te,he){return Y(Ae,Te,he|V),I.luaL_len(Ae,Te)},q=function(Ae,Te,he){N.lua_geti(Ae,1,he),N.lua_isstring(Ae,-1)||I.luaL_error(Ae,N.to_luastring('invalid value (%s) at index %d in table for \'concat\''),I.luaL_typename(Ae,-1),he),I.luaL_addvalue(Te)},ue=function(){return _Mathfloor(1*Math.random()<<32)},ne=function(Ae,Te,he){N.lua_seti(Ae,1,Te),N.lua_seti(Ae,1,he)},oe=function(Ae,Te,he){if(N.lua_isnil(Ae,2))return N.lua_compare(Ae,Te,he,N.LUA_OPLT);N.lua_pushvalue(Ae,2),N.lua_pushvalue(Ae,Te-1),N.lua_pushvalue(Ae,he-2),N.lua_call(Ae,2,1);let xe=N.lua_toboolean(Ae,-1);return N.lua_pop(Ae,1),xe},_e=function(Ae,Te,he){for(let xe=Te,Oe=he-1;;){for(;N.lua_geti(Ae,1,++xe),oe(Ae,-1,-2);)xe==he-1&&I.luaL_error(Ae,N.to_luastring('invalid order function for sorting')),N.lua_pop(Ae,1);for(;N.lua_geti(Ae,1,--Oe),oe(Ae,-3,-1);)Oe<xe&&I.luaL_error(Ae,N.to_luastring('invalid order function for sorting')),N.lua_pop(Ae,1);if(Oe<xe)return N.lua_pop(Ae,1),ne(Ae,he-1,xe),xe;ne(Ae,xe,Oe)}},pe=function(Ae,Te,he){let xe=_Mathfloor((Te-Ae)/4),Oe=he%(2*xe)+(Ae+xe);return E(Ae+xe<=Oe&&Oe<=Te-xe),Oe},ce=function(Ae,Te,he,xe){for(;Te<he;){if(N.lua_geti(Ae,1,Te),N.lua_geti(Ae,1,he),oe(Ae,-1,-2)?ne(Ae,Te,he):N.lua_pop(Ae,2),1==he-Te)return;let Oe;if(Oe=100>he-Te||0===xe?_Mathfloor((Te+he)/2):pe(Te,he,xe),N.lua_geti(Ae,1,Oe),N.lua_geti(Ae,1,Te),oe(Ae,-2,-1)?ne(Ae,Oe,Te):(N.lua_pop(Ae,1),N.lua_geti(Ae,1,he),oe(Ae,-1,-2)?ne(Ae,Oe,he):N.lua_pop(Ae,2)),2==he-Te)return;N.lua_geti(Ae,1,Oe),N.lua_pushvalue(Ae,-1),N.lua_geti(Ae,1,he-1),ne(Ae,Oe,he-1),Oe=_e(Ae,Te,he);let Ue;Oe-Te<he-Oe?(ce(Ae,Te,Oe-1,xe),Ue=Oe-Te,Te=Oe+1):(ce(Ae,Oe+1,he,xe),Ue=he-Oe,he=Oe-1),(he-Te)/128>Ue&&(xe=ue())}},Le={concat:function(Ae){let Te=J(Ae,1,M),he=I.luaL_optlstring(Ae,2,[]),xe=I.luaL_optinteger(Ae,3,1);Te=I.luaL_optinteger(Ae,4,Te);let Oe=new I.luaL_Buffer;for(I.luaL_buffinit(Ae,Oe);xe<Te;xe++)q(Ae,Oe,xe),I.luaL_addlstring(Oe,he);return xe===Te&&q(Ae,Oe,xe),I.luaL_pushresult(Oe),1},insert:function(Ae){let Te=J(Ae,1,F)+1,he;switch(N.lua_gettop(Ae)){case 2:he=Te;break;case 3:{he=I.luaL_checkinteger(Ae,2),I.luaL_argcheck(Ae,1<=he&&he<=Te,2,N.to_luastring('position out of bounds',!0));for(let xe=Te;xe>he;xe--)N.lua_geti(Ae,1,xe-1),N.lua_seti(Ae,1,xe);break}default:return I.luaL_error(Ae,N.to_luastring('wrong number of arguments to \'insert\'',!0));}return N.lua_seti(Ae,1,he),0},move:function(Ae){let Te=I.luaL_checkinteger(Ae,2),he=I.luaL_checkinteger(Ae,3),xe=I.luaL_checkinteger(Ae,4),Oe=N.lua_isnoneornil(Ae,5)?1:5;if(Y(Ae,1,M),Y(Ae,Oe,K),he>=Te){I.luaL_argcheck(Ae,0<Te||he<P.LUA_MAXINTEGER+Te,3,N.to_luastring('too many elements to move',!0));let Ue=he-Te+1;if(I.luaL_argcheck(Ae,xe<=P.LUA_MAXINTEGER-Ue+1,4,N.to_luastring('destination wrap around',!0)),xe>he||xe<=Te||1!=Oe&&1!==N.lua_compare(Ae,1,Oe,N.LUA_OPEQ))for(let Ee=0;Ee<Ue;Ee++)N.lua_geti(Ae,1,Te+Ee),N.lua_seti(Ae,Oe,xe+Ee);else for(let Ee=Ue-1;0<=Ee;Ee--)N.lua_geti(Ae,1,Te+Ee),N.lua_seti(Ae,Oe,xe+Ee)}return N.lua_pushvalue(Ae,Oe),1},pack:function(Ae){let Te=N.lua_gettop(Ae);N.lua_createtable(Ae,Te,1),N.lua_insert(Ae,1);for(let he=Te;1<=he;he--)N.lua_seti(Ae,1,he);return N.lua_pushinteger(Ae,Te),N.lua_setfield(Ae,1,['n'.charCodeAt(0)]),1},remove:function(Ae){let Te=J(Ae,1,F),he=I.luaL_optinteger(Ae,2,Te);for(he!==Te&&I.luaL_argcheck(Ae,1<=he&&he<=Te+1,1,N.to_luastring('position out of bounds',!0)),N.lua_geti(Ae,1,he);he<Te;he++)N.lua_geti(Ae,1,he+1),N.lua_seti(Ae,1,he);return N.lua_pushnil(Ae),N.lua_seti(Ae,1,he),1},sort:function(Ae){let Te=J(Ae,1,F);return 1<Te&&(I.luaL_argcheck(Ae,Te<P.MAX_INT,1,N.to_luastring('array too big',!0)),!N.lua_isnoneornil(Ae,2)&&I.luaL_checktype(Ae,2,N.LUA_TFUNCTION),N.lua_settop(Ae,2),ce(Ae,1,Te,0)),0},unpack:function(Ae){let Te=I.luaL_optinteger(Ae,2,1),he=I.luaL_opt(Ae,I.luaL_checkinteger,3,I.luaL_len(Ae,1));if(Te>he)return 0;let xe=he-Te;if(xe>=P.MAX_INT||!N.lua_checkstack(Ae,++xe))return I.luaL_error(Ae,N.to_luastring('too many results to unpack',!0));for(;Te<he;Te++)N.lua_geti(Ae,1,Te);return N.lua_geti(Ae,1,he),xe}};T.exports.luaopen_table=function(Ae){return I.luaL_newlib(Ae,Le),1}},function(T,O,U){'use strict';const E=U(2),N=U(43),I='_'+E.LUA_VERSION_MAJOR+'_'+E.LUA_VERSION_MINOR;T.exports.LUA_VERSUFFIX=I,T.exports.LUA_COLIBNAME='coroutine',T.exports.luaopen_coroutine=U(24).luaopen_coroutine,T.exports.LUA_TABLIBNAME='table',T.exports.luaopen_table=U(33).luaopen_table,T.exports.LUA_OSLIBNAME='os',T.exports.luaopen_os=U(30).luaopen_os,T.exports.LUA_STRLIBNAME='string',T.exports.luaopen_string=U(32).luaopen_string,T.exports.LUA_UTF8LIBNAME='utf8',T.exports.luaopen_utf8=U(35).luaopen_utf8,T.exports.LUA_BITLIBNAME='bit32',T.exports.LUA_MATHLIBNAME='math',T.exports.luaopen_math=U(28).luaopen_math,T.exports.LUA_DBLIBNAME='debug',T.exports.luaopen_debug=U(25).luaopen_debug,T.exports.LUA_LOADLIBNAME='package',T.exports.luaopen_package=U(29).luaopen_package,T.exports.luaL_openlibs=N.luaL_openlibs},function(T,O,U){'use strict';const E=U(2),N=U(6),I=U(3),P=1114111,M=function(ae){return 128==(192&ae)},K=function(ae,ue){return 0<=ae?ae:0-ae>ue?0:ue+ae+1},V=function(ae){let ne=ae[0],oe=0,_e=0;if(128>ne)oe=ne;else{let pe=0;for(;64&ne;){let ce=ae[++pe];if(128!=(192&ce))return null;oe=oe<<6|63&ce,ne<<=1}if(oe|=(127&ne)<<5*pe,3<pe||oe>P||oe<=[255,127,2047,65535][pe])return null;ae=ae.slice(pe),_e+=pe}return{string:ae.slice(1),code:oe,pos:_e+1}},H=function(ae,ue){let se=N.luaL_checkinteger(ae,ue);N.luaL_argcheck(ae,0<=se&&se<=P,ue,E.to_luastring('value out of range',!0)),E.lua_pushstring(ae,E.to_luastring(_StringfromCharCode(se)))},W=function(ae){let ue=N.luaL_checkstring(ae,1),se=ue.length,ne=E.lua_tointeger(ae,2)-1;if(0>ne)ne=0;else if(ne<se)for(ne++;M(ue[ne]);)ne++;if(ne>=se)return 0;let oe=V(ue.slice(ne)),_e=oe?oe.code:null,pe=oe?oe.string:null;return null===pe||M(pe[0])?N.luaL_error(ae,E.to_luastring('invalid UTF-8 code',!0)):(E.lua_pushinteger(ae,ne+1),E.lua_pushinteger(ae,_e),2)},$={char:function(ae){let ue=E.lua_gettop(ae);if(1===ue)H(ae,1);else{let se=new N.luaL_Buffer;N.luaL_buffinit(ae,se);for(let ne=1;ne<=ue;ne++)H(ae,ne),N.luaL_addvalue(se);N.luaL_pushresult(se)}return 1},codepoint:function(ae){let ue=N.luaL_checkstring(ae,1),se=K(N.luaL_optinteger(ae,2,1),ue.length),ne=K(N.luaL_optinteger(ae,3,se),ue.length);if(N.luaL_argcheck(ae,1<=se,2,E.to_luastring('out of range',!0)),N.luaL_argcheck(ae,ne<=ue.length,3,E.to_luastring('out of range',!0)),se>ne)return 0;if(ne-se>=I.MAX_INT)return N.luaL_error(ae,E.to_luastring('string slice too long',!0));let oe=ne-se+1;for(N.luaL_checkstack(ae,oe,E.to_luastring('string slice too long',!0)),oe=0,ue=ue.slice(se-1);oe<ne-se;){let _e=V(ue);if(null===_e)return N.luaL_error(ae,E.to_luastring('invalid UTF-8 code',!0));ue=_e.string;let pe=_e.code;E.lua_pushinteger(ae,pe),oe++}return oe},codes:function(ae){return N.luaL_checkstring(ae,1),E.lua_pushcfunction(ae,W),E.lua_pushvalue(ae,1),E.lua_pushinteger(ae,0),3},len:function(ae){let ue=0,se=N.luaL_checkstring(ae,1),ne=se.length,oe=K(N.luaL_optinteger(ae,2,1),ne),_e=K(N.luaL_optinteger(ae,3,-1),ne);for(N.luaL_argcheck(ae,1<=oe&&--oe<=ne,2,'initial position out of string'),N.luaL_argcheck(ae,--_e<ne,3,'final position out of string');oe<=_e;){let pe=V(se.slice(oe)),ce=pe?pe.string:null;if(null===ce)return E.lua_pushnil(ae),E.lua_pushinteger(ae,oe+1),2;oe=se.length-ce.length,ue++}return E.lua_pushinteger(ae,ue),1},offset:function(ae){let ue=N.luaL_checkstring(ae,1),se=N.luaL_checkinteger(ae,2),ne=0<=se?1:ue.length+1;if(ne=K(N.luaL_optinteger(ae,3,ne),ue.length),N.luaL_argcheck(ae,1<=ne&&--ne<=ue.length,3,E.to_luastring('position out of range',!0)),0===se)for(;0<ne&&M(ue[ne]);)ne--;else if(M(ue[ne])&&N.luaL_error(ae,E.to_luastring('initial position is a continuation byte',!0)),0>se)for(;0>se&&0<ne;){do ne--;while(0<ne&&M(ue[ne]));se++}else for(se--;0<se&&ne<ue.length;){do ne++;while(M(ue[ne]));se--}return 0===se?E.lua_pushinteger(ae,ne+1):E.lua_pushnil(ae),1}};T.exports.luaopen_utf8=function(ae){return N.luaL_newlib(ae,$),E.lua_pushstring(ae,E.to_luastring('[\0-\x7F\xC2-\xF4][\x80-\xBF]*')),E.lua_setfield(ae,-2,E.to_luastring('charpattern',!0)),1}},function(T,O,U){(function(E,N){function I(Ee,ke){var ve={seen:[],stylize:M};return 3<=arguments.length&&(ve.depth=arguments[2]),4<=arguments.length&&(ve.colors=arguments[3]),Q(ke)?ve.showHidden=ke:ke&&O._extend(ve,ke),se(ve.showHidden)&&(ve.showHidden=!1),se(ve.depth)&&(ve.depth=2),se(ve.colors)&&(ve.colors=!1),se(ve.customInspect)&&(ve.customInspect=!0),ve.colors&&(ve.stylize=P),V(ve,Ee,ve.depth)}function P(Ee,ke){var ve=I.styles[ke];return ve?'\x1B['+I.colors[ve][0]+'m'+Ee+'\x1B['+I.colors[ve][1]+'m':Ee}function M(Ee){return Ee}function K(Ee){var ke={};return Ee.forEach(function(ve){ke[ve]=!0}),ke}function V(Ee,ke,ve){if(Ee.customInspect&&ke&&ce(ke.inspect)&&ke.inspect!==O.inspect&&!(ke.constructor&&ke.constructor.prototype===ke)){var Re=ke.inspect(ve,Ee);return ae(Re)||(Re=V(Ee,Re,ve)),Re}var be=F(Ee,ke);if(be)return be;var Se=Object.keys(ke),Ne=K(Se);if(Ee.showHidden&&(Se=Object.getOwnPropertyNames(ke)),pe(ke)&&(0<=Se.indexOf('message')||0<=Se.indexOf('description')))return H(ke);if(0===Se.length){if(ce(ke)){var Ie=ke.name?': '+ke.name:'';return Ee.stylize('[Function'+Ie+']','special')}if(ne(ke))return Ee.stylize(RegExp.prototype.toString.call(ke),'regexp');if(_e(ke))return Ee.stylize(Date.prototype.toString.call(ke),'date');if(pe(ke))return H(ke)}var Ce='',Pe=!1,Me=['{','}'];if(W(ke)&&(Pe=!0,Me=['[',']']),ce(ke)){var ye=ke.name?': '+ke.name:'';Ce=' [Function'+ye+']'}if(ne(ke)&&(Ce=' '+RegExp.prototype.toString.call(ke)),_e(ke)&&(Ce=' '+Date.prototype.toUTCString.call(ke)),pe(ke)&&(Ce=' '+H(ke)),0===Se.length&&(!Pe||0==ke.length))return Me[0]+Ce+Me[1];if(0>ve)return ne(ke)?Ee.stylize(RegExp.prototype.toString.call(ke),'regexp'):Ee.stylize('[Object]','special');Ee.seen.push(ke);var De;return De=Pe?Y(Ee,ke,ve,Ne,Se):Se.map(function(Ke){return J(Ee,ke,ve,Ne,Ke,Pe)}),Ee.seen.pop(),q(De,Ce,Me)}function F(Ee,ke){if(se(ke))return Ee.stylize('undefined','undefined');if(ae(ke)){var ve='\''+JSON.stringify(ke).replace(/^"|"$/g,'').replace(/'/g,'\\\'').replace(/\\"/g,'"')+'\'';return Ee.stylize(ve,'string')}return te(ke)?Ee.stylize(''+ke,'number'):Q(ke)?Ee.stylize(''+ke,'boolean'):$(ke)?Ee.stylize('null','null'):void 0}function H(Ee){return'['+Error.prototype.toString.call(Ee)+']'}function Y(Ee,ke,ve,Re,be){for(var Se=[],Ne=0,Ie=ke.length;Ne<Ie;++Ne)Te(ke,Ne+'')?Se.push(J(Ee,ke,ve,Re,Ne+'',!0)):Se.push('');return be.forEach(function(Ce){Ce.match(/^\d+$/)||Se.push(J(Ee,ke,ve,Re,Ce,!0))}),Se}function J(Ee,ke,ve,Re,be,Se){var Ne,Ie,Ce;if(Ce=Object.getOwnPropertyDescriptor(ke,be)||{value:ke[be]},Ce.get?Ce.set?Ie=Ee.stylize('[Getter/Setter]','special'):Ie=Ee.stylize('[Getter]','special'):Ce.set&&(Ie=Ee.stylize('[Setter]','special')),Te(Re,be)||(Ne='['+be+']'),Ie||(0>Ee.seen.indexOf(Ce.value)?(Ie=$(ve)?V(Ee,Ce.value,null):V(Ee,Ce.value,ve-1),-1<Ie.indexOf('\n')&&(Se?Ie=Ie.split('\n').map(function(Pe){return'  '+Pe}).join('\n').substr(2):Ie='\n'+Ie.split('\n').map(function(Pe){return'   '+Pe}).join('\n'))):Ie=Ee.stylize('[Circular]','special')),se(Ne)){if(Se&&be.match(/^\d+$/))return Ie;Ne=JSON.stringify(''+be),Ne.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Ne=Ne.substr(1,Ne.length-2),Ne=Ee.stylize(Ne,'name')):(Ne=Ne.replace(/'/g,'\\\'').replace(/\\"/g,'"').replace(/(^"|"$)/g,'\''),Ne=Ee.stylize(Ne,'string'))}return Ne+': '+Ie}function q(Ee,ke,ve){var Re=0,be=Ee.reduce(function(Se,Ne){return Re++,0<=Ne.indexOf('\n')&&Re++,Se+Ne.replace(/\u001b\[\d\d?m/g,'').length+1},0);return 60<be?ve[0]+(''===ke?'':ke+'\n ')+' '+Ee.join(',\n  ')+' '+ve[1]:ve[0]+ke+' '+Ee.join(', ')+' '+ve[1]}function W(Ee){return Array.isArray(Ee)}function Q(Ee){return'boolean'==typeof Ee}function $(Ee){return null===Ee}function te(Ee){return'number'==typeof Ee}function ae(Ee){return'string'==typeof Ee}function se(Ee){return void 0===Ee}function ne(Ee){return oe(Ee)&&'[object RegExp]'===Le(Ee)}function oe(Ee){return'object'==typeof Ee&&null!==Ee}function _e(Ee){return oe(Ee)&&'[object Date]'===Le(Ee)}function pe(Ee){return oe(Ee)&&('[object Error]'===Le(Ee)||Ee instanceof Error)}function ce(Ee){return'function'==typeof Ee}function Le(Ee){return Object.prototype.toString.call(Ee)}function ge(Ee){return 10>Ee?'0'+Ee.toString(10):Ee.toString(10)}function Ae(){var Ee=new Date,ke=[ge(Ee.getHours()),ge(Ee.getMinutes()),ge(Ee.getSeconds())].join(':');return[Ee.getDate(),Ue[Ee.getMonth()],ke].join(' ')}function Te(Ee,ke){return Object.prototype.hasOwnProperty.call(Ee,ke)}var he=/%[sdj%]/g;O.format=function(Ee){if(!ae(Ee)){for(var ke=[],ve=0;ve<arguments.length;ve++)ke.push(I(arguments[ve]));return ke.join(' ')}for(var ve=1,Re=arguments,be=Re.length,Se=(Ee+'').replace(he,function(Ie){if('%%'===Ie)return'%';if(ve>=be)return Ie;switch(Ie){case'%s':return Re[ve++]+'';case'%d':return+Re[ve++];case'%j':try{return JSON.stringify(Re[ve++])}catch(Ce){return'[Circular]'}default:return Ie;}}),Ne=Re[ve];ve<be;Ne=Re[++ve])Se+=$(Ne)||!oe(Ne)?' '+Ne:' '+I(Ne);return Se},O.deprecate=function(Ee,ke){if(se(E.process))return function(){return O.deprecate(Ee,ke).apply(this,arguments)};if(!0===N.noDeprecation)return Ee;var Re=!1;return function(){if(!Re){if(N.throwDeprecation)throw new Error(ke);else N.traceDeprecation?console.trace(ke):console.error(ke);Re=!0}return Ee.apply(this,arguments)}};var xe={},Oe;O.debuglog=function(Ee){if(se(Oe)&&(Oe=N.env.NODE_DEBUG||''),Ee=Ee.toUpperCase(),!xe[Ee])if(new RegExp('\\b'+Ee+'\\b','i').test(Oe)){var ke=N.pid;xe[Ee]=function(){var ve=O.format.apply(O,arguments);console.error('%s %d: %s',Ee,ke,ve)}}else xe[Ee]=function(){};return xe[Ee]},O.inspect=I,I.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},I.styles={special:'cyan',number:'yellow',boolean:'yellow',undefined:'grey','null':'bold',string:'green',date:'magenta',regexp:'red'},O.isArray=W,O.isBoolean=Q,O.isNull=$,O.isNullOrUndefined=function(Ee){return null==Ee},O.isNumber=te,O.isString=ae,O.isSymbol=function(Ee){return'symbol'==typeof Ee},O.isUndefined=se,O.isRegExp=ne,O.isObject=oe,O.isDate=_e,O.isError=pe,O.isFunction=ce,O.isPrimitive=function(Ee){return null===Ee||'boolean'==typeof Ee||'number'==typeof Ee||'string'==typeof Ee||'symbol'==typeof Ee||'undefined'==typeof Ee},O.isBuffer=U(56);var Ue=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];O.log=function(){console.log('%s - %s',Ae(),O.format.apply(O,arguments))},O.inherits=U(55),O._extend=function(Ee,ke){if(!ke||!oe(ke))return Ee;for(var ve=Object.keys(ke),Re=ve.length;Re--;)Ee[ve[Re]]=ke[ve[Re]];return Ee}}).call(O,U(22),U(19))},function(T,O,U){'use strict';(function(E){const N=U(36),I=U(23),P=I.lua,M=I.lauxlib,K=I.lualib,V=Reflect.apply,F=Reflect.construct,H=function(Ee){return'object'==typeof Ee?null!==Ee:'function'==typeof Ee},Y=P.to_luastring('js object'),J=function(Ee,ke){let ve=M.luaL_testudata(Ee,ke,Y);return ve?ve.data:void 0},q=function(Ee,ke){return M.luaL_checkudata(Ee,ke,Y).data},W=function(Ee,ke){let ve=P.lua_newuserdata(Ee);ve.data=ke,M.luaL_setmetatable(Ee,Y)},Q=function(Ee){P.lua_rawgeti(Ee,P.LUA_REGISTRYINDEX,P.LUA_RIDX_MAINTHREAD);let ke=P.lua_tothread(Ee,-1);return P.lua_pop(Ee,1),ke},$=new WeakMap,ee=function(Ee){let ke=P.lua_touserdata(Ee,1);return te(Ee,ke),1},te=function(Ee,ke){switch(typeof ke){case'undefined':P.lua_pushnil(Ee);break;case'number':P.lua_pushnumber(Ee,ke);break;case'string':P.lua_pushstring(Ee,P.to_luastring(ke));break;case'boolean':P.lua_pushboolean(Ee,ke);break;case'symbol':P.lua_pushlightuserdata(Ee,ke);break;case'function':if(P.lua_isproxy(ke,Ee)){ke(Ee);break}case'object':if(null===ke){P.lua_rawgetp(Ee,P.LUA_REGISTRYINDEX,null);break}default:let ve=$.get(Q(Ee)),Re=ve.get(ke);Re?Re(Ee):(W(Ee,ke),Re=P.lua_toproxy(Ee,-1),ve.set(ke,Re));}},ae=function(Ee,ke){switch(P.lua_type(Ee,ke)){case P.LUA_TNONE:case P.LUA_TNIL:return;case P.LUA_TBOOLEAN:return P.lua_toboolean(Ee,ke);case P.LUA_TLIGHTUSERDATA:return P.lua_touserdata(Ee,ke);case P.LUA_TNUMBER:return P.lua_tonumber(Ee,ke);case P.LUA_TSTRING:return P.lua_tojsstring(Ee,ke);case P.LUA_TUSERDATA:let ve=J(Ee,ke);if(void 0!==ve)return ve;case P.LUA_TTABLE:case P.LUA_TFUNCTION:case P.LUA_TTHREAD:default:return Le(Q(Ee),P.lua_toproxy(Ee,ke));}},ue=function(Ee,ke,ve,Re,be){M.luaL_checkstack(Ee,2+Re.length),(void 0===be||null===be)&&(be=P.LUA_MULTRET);let Se=P.lua_gettop(Ee);ke(Ee),te(Ee,ve);for(let Ce=0;Ce<Re.length;Ce++)te(Ee,Re[Ce]);P.lua_call(Ee,1+Re.length,be);let Ne=P.lua_gettop(Ee)-Se,Ie=Array(Ne);for(let Ce=0;Ce<Ne;Ce++)Ie[Ce]=ae(Ee,Se+Ce+1);return P.lua_settop(Ee,Se),Ie},se=function(Ee,ke,ve){M.luaL_checkstack(Ee,2),ke(Ee),te(Ee,ve),P.lua_gettable(Ee,-2);let Re=ae(Ee,-1);return P.lua_pop(Ee,2),Re},ne=function(Ee,ke,ve){M.luaL_checkstack(Ee,2),ke(Ee),te(Ee,ve),P.lua_gettable(Ee,-2);let Re=P.lua_isnil(Ee,-1);return P.lua_pop(Ee,2),Re},oe=function(Ee,ke,ve,Re){M.luaL_checkstack(Ee,3),ke(Ee),te(Ee,ve),te(Ee,Re),P.lua_settable(Ee,-3),P.lua_pop(Ee,1)},_e=function(Ee,ke,ve){M.luaL_checkstack(Ee,3),ke(Ee),te(Ee,ve),P.lua_pushnil(Ee),P.lua_settable(Ee,-3),P.lua_pop(Ee,1)},pe=function(Ee,ke){M.luaL_checkstack(Ee,1),ke(Ee);let ve=M.luaL_tolstring(Ee,-1);return P.lua_pop(Ee,2),P.to_jsstring(ve)},ce=function(){M.luaL_checkstack(this.L,3);let Ee=P.lua_gettop(this.L);this.iter(this.L),this.state(this.L),this.last(this.L),P.lua_call(this.L,2,P.LUA_MULTRET),this.last=P.lua_toproxy(this.L,Ee+1);let ke;if(P.lua_isnil(this.L,-1))ke={done:!0,value:void 0};else{let ve=P.lua_gettop(this.L)-Ee,Re=Array(ve);for(let be=0;be<ve;be++)Re[be]=ae(this.L,Ee+be+1);ke={done:!1,value:Re}}return P.lua_settop(this.L,Ee),ke},de=function(Ee,ke){M.luaL_requiref(Ee,P.to_luastring('_G'),K.luaopen_base,0),P.lua_getfield(Ee,-1,P.to_luastring('pairs')),P.lua_remove(Ee,-2),ke(Ee),P.lua_call(Ee,1,3);let ve=P.lua_toproxy(Ee,-3),Re=P.lua_toproxy(Ee,-2),be=P.lua_toproxy(Ee,-1);return P.lua_pop(Ee,3),{L:Ee,iter:ve,state:Re,last:be,next:ce}},Le=function(Ee,ke){let ve=function(){return ue(Ee,ke,this,arguments,1)[0]};return ve.apply=function(Re,be){return ue(Ee,ke,Re,be,1)[0]},ve.invoke=function(Re,be){return ue(Ee,ke,Re,be,P.LUA_MULTRET)},ve.get=function(Re){return se(Ee,ke,Re)},ve.has=function(Re){return ne(Ee,ke,Re)},ve.set=function(Re,be){return oe(Ee,ke,Re,be)},ve.delete=function(Re){return _e(Ee,ke,Re)},ve.toString=function(){return pe(Ee,ke)},ve[Symbol.toStringTag]='Fengari object',ve[Symbol.iterator]=function(){return de(Ee,ke)},ve[N.inspect.custom]=ve.toString,ve},ge={apply:function(Ee,ke,ve){return ue(Ee.L,Ee.p,ke,ve,1)[0]},get:function(Ee,ke){return se(Ee.L,Ee.p,ke)},has:function(Ee,ke){return ne(Ee.L,Ee.p,ke)},set:function(Ee,ke,ve){return oe(Ee.L,Ee.p,ke,ve)},deleteProperty:function(Ee,ke){return _e(Ee.L,Ee.p,ke)}},Ae=function(Ee,ke){let ve=function(){return ke(Ee)};ve.p=ke,ve.L=Ee;let Re=new Proxy(ve,ge);return Re},Te=function(Ee,ke){let ve=q(Ee,ke),Re=ve[Symbol.iterator];Re||M.luaL_argerror(Ee,ke,P.to_luastring('object not iterable'));let be=V(Re,ve,[]);return H(be)||M.luaL_argerror(Ee,ke,P.to_luastring('Result of the Symbol.iterator method is not an object')),be},he=function(Ee){let ke=q(Ee,1),ve=ke.next();return ve.done?0:(te(Ee,ve.value),1)};let xe={'new':function(Ee){let ke=q(Ee,1),ve=P.lua_gettop(Ee)-1,Re=Array(ve);for(let be=0;be<ve;be++)Re[be]=ae(Ee,be+2);return te(Ee,F(ke,Re)),1},of:function(Ee){let ke=Te(Ee,1);return P.lua_pushcfunction(Ee,he),te(Ee,ke),2},createproxy:function(Ee){M.luaL_checkany(Ee,1);let ke=Ae(Q(Ee),P.lua_toproxy(Ee,1));return te(Ee,ke),1}},Oe={__index:function(Ee){let ke=q(Ee,1),ve=ae(Ee,2);return te(Ee,ke[ve]),1},__newindex:function(Ee){let ke=q(Ee,1),ve=ae(Ee,2),Re=ae(Ee,3);return void 0==Re?delete ke[ve]:ke[ve]=Re,0},__tostring:function(Ee){let ke=q(Ee,1),ve=N.inspect(ke);return P.lua_pushstring(Ee,P.to_luastring(ve)),1},__call:function(Ee){let ke=q(Ee,1),ve=P.lua_gettop(Ee)-1,Re,be;if(0<ve&&(Re=ae(Ee,2),0<ve--)){be=Array(ve);for(let Se=0;Se<ve;Se++)be[Se]=ae(Ee,Se+3)}return te(Ee,V(ke,Re,be)),1}};T.exports.checkjs=q,T.exports.pushjs=W,T.exports.push=te,T.exports.tojs=ae,T.exports.luaopen_js=function(Ee){return $.set(Q(Ee),new WeakMap),P.lua_atnativeerror(Ee,ee),M.luaL_newlib(Ee,xe),M.luaL_newmetatable(Ee,Y),M.luaL_setfuncs(Ee,Oe,0),P.lua_pop(Ee,1),W(Ee,null),P.lua_pushvalue(Ee,-1),P.lua_rawsetp(Ee,P.LUA_REGISTRYINDEX,null),P.lua_setfield(Ee,-2,P.to_luastring('null')),te(Ee,E),P.lua_setfield(Ee,-2,P.to_luastring('global')),1}}).call(O,U(22))},function(T,O,U){'use strict';window.WEB=!0;const E=U(23),N=E.lua,I=E.lauxlib,P=E.lualib,M=U(37),K=N.to_luastring('=stdin'),V=N.to_luastring('_PROMPT'),F=N.to_luastring('_PROMPT2'),H=document.getElementById('fengari-console'),Y=document.getElementById('fengari-input'),J=document.getElementById('fengari-prompt'),q=function(se,ne){var oe=document.createEvent('HTMLEvents');oe.initEvent(ne,!1,!0),se.dispatchEvent(oe)},W=function(se){H.innerHTML+=se,H.scrollTop=H.scrollHeight},Q=function(se){let ne=N.lua_gettop(se),oe=[];N.lua_getglobal(se,N.to_luastring('tostring',!0));for(let _e=1;_e<=ne;_e++){N.lua_pushvalue(se,-1),N.lua_pushvalue(se,_e),N.lua_call(se,1,1);let pe=N.lua_tolstring(se,-1);if(null===pe)return I.luaL_error(se,N.to_luastring('\'tostring\' must return a string to \'print\'',!0));1<_e&&(pe=['\t'.charCodeAt(0)].concat(pe)),oe=oe.concat(pe),N.lua_pop(se,1)}return W(N.to_jsstring(oe)+'\n'),0},$=function(se,ne){return ne!==N.LUA_OK&&(W(`${N.lua_tojsstring(se,-1)}\n`),N.lua_pop(se,1)),ne},ee=function(se){let ne=N.lua_tostring(se,1);if(null===ne){if(I.luaL_callmeta(se,1,'__tostring')&&N.lua_type(se,-1)==N.LUA_TSTRING)return 1;ne=N.lua_pushstring(se,N.to_luastring(`(error object is a ${N.to_jsstring(I.luaL_typename(se,1))} value)`))}return I.luaL_traceback(se,se,ne,1),W(N.lua_tojsstring(se,-1)),1},te=function(se,ne,oe){let _e=N.lua_gettop(se)-ne;N.lua_pushcfunction(se,ee),N.lua_insert(se,_e);let pe=N.lua_pcall(se,ne,oe,_e);return N.lua_remove(se,_e),pe},ae=function(se){if(N.lua_getglobal(se,V),J.innerHTML='>',W('\n> '+Y.value+'\n'),N.lua_pop(se,1),0===Y.value.length)return;let ne;{let oe=N.to_luastring('return '+Y.value);ne=I.luaL_loadbuffer(se,oe,oe.length,K)}if(ne!==N.LUA_OK){N.lua_pop(se,1);let oe=N.to_luastring(Y.value);I.luaL_loadbuffer(se,oe,oe.length,K)===N.LUA_OK&&(ne=N.LUA_OK)}if(ne===N.LUA_OK&&(ne=te(se,0,N.LUA_MULTRET)),ne===N.LUA_OK){let oe=N.lua_gettop(se);0<oe&&Q(se)}else $(se,ne);N.lua_settop(se,0),Y.value='',q(H,'change')},ue=I.luaL_newstate();H.innerHTML+=N.FENGARI_COPYRIGHT+'\n',P.luaL_openlibs(ue),I.luaL_requiref(ue,N.to_luastring('js'),M.luaopen_js,1),N.lua_pop(ue,1),N.lua_register(ue,N.to_luastring('print'),Q),Y.onkeypress=function(se){se||(se=window.event);var ne=se.keyCode||se.which;if('13'==ne)return ae(ue),!1}},function(T){function U(E){throw new Error('Cannot find module \''+E+'\'.')}U.keys=function(){return[]},U.resolve=U,T.exports=U,U.id=39},function(T,O,U){'use strict';(function(E){const N=U(2),I=U(6),W=function(he,xe,Oe,Ue){return I.luaL_checkany(he,1),I.luaL_getmetafield(he,1,xe)===N.LUA_TNIL?(N.lua_pushcfunction(he,Ue),N.lua_pushvalue(he,1),Oe?N.lua_pushinteger(he,0):N.lua_pushnil(he)):(N.lua_pushvalue(he,1),N.lua_call(he,1,3)),3},Q=function(he){return I.luaL_checktype(he,1,N.LUA_TTABLE),N.lua_settop(he,2),N.lua_next(he,1)?2:(N.lua_pushnil(he),1)},ee=function(he){let xe=I.luaL_checkinteger(he,2)+1;return N.lua_pushinteger(he,xe),N.lua_geti(he,1,xe)===N.LUA_TNIL?1:2},ue=function(he){let xe=I.luaL_optinteger(he,2,1);return N.lua_settop(he,1),N.lua_type(he,1)===N.LUA_TSTRING&&0<xe&&(I.luaL_where(he,xe),N.lua_pushvalue(he,1),N.lua_concat(he,2)),N.lua_error(he)},oe=function(he,xe,Oe){return xe!==N.LUA_OK&&xe!==N.LUA_YIELD?(N.lua_pushboolean(he,0),N.lua_pushvalue(he,-2),2):N.lua_gettop(he)-Oe},ce=function(he,xe,Oe){return xe===N.LUA_OK?(0!==Oe&&(N.lua_pushvalue(he,Oe),!N.lua_setupvalue(he,-2,1)&&N.lua_pop(he,1)),1):(N.lua_pushnil(he),N.lua_insert(he,-2),2)},de=5,Le=function(he){return(I.luaL_checkstack(he,2,N.to_luastring('too many nested functions',!0)),N.lua_pushvalue(he,1),N.lua_call(he,0,1),N.lua_isnil(he,-1))?(N.lua_pop(he,1),null):(N.lua_isstring(he,-1)||I.luaL_error(he,N.to_luastring('reader function must return a string',!0)),N.lua_replace(he,de),N.lua_tostring(he,de))},Ae={collectgarbage:function(){return 0},assert:function(he){return N.lua_toboolean(he,1)?N.lua_gettop(he):(I.luaL_checkany(he,1),N.lua_remove(he,1),N.lua_pushliteral(he,'assertion failed!'),N.lua_settop(he,1),ue(he))},error:ue,getmetatable:function(he){return(I.luaL_checkany(he,1),!N.lua_getmetatable(he,1))?(N.lua_pushnil(he),1):(I.luaL_getmetafield(he,1,N.to_luastring('__metatable',!0)),1)},ipairs:function(he){return I.luaL_checkany(he,1),N.lua_pushcfunction(he,ee),N.lua_pushvalue(he,1),N.lua_pushinteger(he,0),3},load:function(he){let xe=N.lua_tostring(he,1),Oe=I.luaL_optstring(he,3,N.to_luastring('bt',!0)),Ue=N.lua_isnone(he,4)?0:4,Ee;if(null!==xe){let ke=I.luaL_optstring(he,2,xe);Ee=I.luaL_loadbufferx(he,xe,xe.length,ke,Oe)}else{let ke=I.luaL_optstring(he,2,N.to_luastring('=(load)',!0));I.luaL_checktype(he,1,N.LUA_TFUNCTION),N.lua_settop(he,de),Ee=N.lua_load(he,Le,null,ke,Oe)}return ce(he,Ee,Ue)},next:Q,pairs:function(he){return W(he,N.to_luastring('__pairs',!0),0,Q)},pcall:function(he){I.luaL_checkany(he,1),N.lua_pushboolean(he,1),N.lua_insert(he,1);let xe=N.lua_pcallk(he,N.lua_gettop(he)-2,N.LUA_MULTRET,0,0,oe);return oe(he,xe,0)},print:function(he){let xe=N.lua_gettop(he),Oe=[];N.lua_getglobal(he,N.to_luastring('tostring',!0));for(let Ue=1;Ue<=xe;Ue++){N.lua_pushvalue(he,-1),N.lua_pushvalue(he,Ue),N.lua_call(he,1,1);let Ee=N.lua_tolstring(he,-1);if(null===Ee)return I.luaL_error(he,N.to_luastring('\'tostring\' must return a string to \'print\'',!0));1<Ue&&(Ee=['\t'.charCodeAt(0)].concat(Ee)),Oe=Oe.concat(Ee),N.lua_pop(he,1)}return E.stdout?E.stdout.write(N.to_jsstring(Oe)+'\n'):console.log(N.to_jsstring(Oe)),0},rawequal:function(he){return I.luaL_checkany(he,1),I.luaL_checkany(he,2),N.lua_pushboolean(he,N.lua_rawequal(he,1,2)),1},rawget:function(he){return I.luaL_checktype(he,1,N.LUA_TTABLE),I.luaL_checkany(he,2),N.lua_settop(he,2),N.lua_rawget(he,1),1},rawlen:function(he){let xe=N.lua_type(he,1);return I.luaL_argcheck(he,xe===N.LUA_TTABLE||xe===N.LUA_TSTRING,1,N.to_luastring('table or string expected',!0)),N.lua_pushinteger(he,N.lua_rawlen(he,1)),1},rawset:function(he){return I.luaL_checktype(he,1,N.LUA_TTABLE),I.luaL_checkany(he,2),I.luaL_checkany(he,3),N.lua_settop(he,3),N.lua_rawset(he,1),1},select:function(he){let xe=N.lua_gettop(he);if(N.lua_type(he,1)===N.LUA_TSTRING&&N.lua_tostring(he,1)[0]==='#'.charCodeAt(0))return N.lua_pushinteger(he,xe-1),1;let Oe=I.luaL_checkinteger(he,1);return 0>Oe?Oe=xe+Oe:Oe>xe&&(Oe=xe),I.luaL_argcheck(he,1<=Oe,1,N.to_luastring('index out of range',!0)),xe-Oe},setmetatable:function(he){let xe=N.lua_type(he,2);return(I.luaL_checktype(he,1,N.LUA_TTABLE),I.luaL_argcheck(he,xe===N.LUA_TNIL||xe===N.LUA_TTABLE,2,N.to_luastring('nil or table expected',!0)),I.luaL_getmetafield(he,1,N.to_luastring('__metatable',!0))!==N.LUA_TNIL)?I.luaL_error(he,N.to_luastring('cannot change a protected metatable',!0)):(N.lua_settop(he,2),N.lua_setmetatable(he,1),1)},tonumber:function(he){if(0>=N.lua_type(he,2)){if(I.luaL_checkany(he,1),N.lua_type(he,1)===N.LUA_TNUMBER)return N.lua_settop(he,1),1;let xe=N.lua_tostring(he,1);if(null!==xe&&N.lua_stringtonumber(he,xe)===xe.length)return 1}else{let xe=I.luaL_checkinteger(he,2);I.luaL_checktype(he,1,N.LUA_TSTRING);let Oe=N.lua_tostring(he,1);I.luaL_argcheck(he,2<=xe&&36>=xe,2,N.to_luastring('base out of range',!0));let Ue=parseInt(N.to_jsstring(Oe),xe);if(!isNaN(Ue))return N.lua_pushinteger(he,Ue),1}return N.lua_pushnil(he),1},tostring:function(he){return I.luaL_checkany(he,1),I.luaL_tolstring(he,1),1},type:function(he){let xe=N.lua_type(he,1);return I.luaL_argcheck(he,xe!==N.LUA_TNONE,1,N.to_luastring('value expected',!0)),N.lua_pushstring(he,N.lua_typename(he,xe)),1},xpcall:function(he){let xe=N.lua_gettop(he);I.luaL_checktype(he,2,N.LUA_TFUNCTION),N.lua_pushboolean(he,1),N.lua_pushvalue(he,1),N.lua_rotate(he,3,2);let Oe=N.lua_pcallk(he,xe-2,N.LUA_MULTRET,2,2,oe);return oe(he,Oe,2)}};T.exports.luaopen_base=function(he){return N.lua_pushglobaltable(he),I.luaL_setfuncs(he,Ae,0),N.lua_pushvalue(he,-1),N.lua_setfield(he,-2,N.to_luastring('_G',!0)),N.lua_pushliteral(he,N.LUA_VERSION),N.lua_setfield(he,-2,N.to_luastring('_VERSION',!0)),1}}).call(O,U(19))},function(T,O,U){'use strict';const E=U(0),N=U(1),I=U(27),P=U(4),M=U(18),K=U(31),V=U(7),F=U(10),H=U(12),Y=U(15),J=N.CT,q=M.OpCodesI,W=P.TValue,$=-1,ee={OPR_ADD:0,OPR_SUB:1,OPR_MUL:2,OPR_MOD:3,OPR_POW:4,OPR_DIV:5,OPR_IDIV:6,OPR_BAND:7,OPR_BOR:8,OPR_BXOR:9,OPR_SHL:10,OPR_SHR:11,OPR_CONCAT:12,OPR_EQ:13,OPR_LT:14,OPR_LE:15,OPR_NE:16,OPR_GT:17,OPR_GE:18,OPR_AND:19,OPR_OR:20,OPR_NOBINOPR:21},te={OPR_MINUS:0,OPR_BNOT:1,OPR_NOT:2,OPR_LEN:3,OPR_NOUNOPR:4},ae=function(kt){return kt.t!==kt.f},ue=function(kt,vt){let Rt=K.expkind;if(ae(kt))return!1;switch(kt.k){case Rt.VKINT:return vt&&(vt.type=J.LUA_TNUMINT,vt.value=kt.u.ival),!0;case Rt.VKFLT:return vt&&(vt.type=J.LUA_TNUMFLT,vt.value=kt.u.nval),!0;default:return!1;}},se=function(kt,vt,Rt){let St=vt+Rt-1,bt;if(kt.pc>kt.lasttarget&&(bt=kt.f.code[kt.pc-1],bt.opcode===q.OP_LOADNIL)){let Nt=bt.A,It=Nt+bt.B;if(Nt<=vt&&vt<=It+1||vt<=Nt&&Nt<=St+1)return Nt<vt&&(vt=Nt),It>St&&(St=It),M.SETARG_A(bt,vt),void M.SETARG_B(bt,St-vt)}be(kt,q.OP_LOADNIL,vt,Rt-1,0)},ne=function(kt,vt){return kt.f.code[vt.u.info]},oe=function(kt,vt){let Rt=kt.f.code[vt].sBx;return Rt===$?$:vt+1+Rt},_e=function(kt,vt,Rt){let bt=kt.f.code[vt],St=Rt-(vt+1);E(Rt!==$),_Mathabs(St)>M.MAXARG_sBx&&I.luaX_syntaxerror(kt.ls,N.to_luastring('control structure too long',!0)),M.SETARG_sBx(bt,St)},pe=function(kt,vt,Rt){if(Rt===$)return vt;if(vt===$)vt=Rt;else{let bt=vt,St=oe(kt,bt);for(;St!==$;)bt=St,St=oe(kt,bt);_e(kt,bt,Rt)}return vt},ce=function(kt){let vt=kt.jpc;kt.jpc=$;let Rt=Ne(kt,q.OP_JMP,0,$);return Rt=pe(kt,Rt,vt),Rt},ge=function(kt,vt,Rt,bt,St){return be(kt,vt,Rt,bt,St),ce(kt)},Ae=function(kt){return kt.lasttarget=kt.pc,kt.pc},Te=function(kt,vt){return 1<=vt&&M.testTMode(kt.f.code[vt-1].opcode)?kt.f.code[vt-1]:kt.f.code[vt]},he=function(kt,vt,Rt){let bt=Te(kt,vt);return bt.opcode===q.OP_TESTSET&&(Rt!==M.NO_REG&&Rt!==bt.B?M.SETARG_A(bt,Rt):bt=M.CREATE_ABC(q.OP_TEST,bt.B,0,bt.C),!0)},xe=function(kt,vt){for(;vt!==$;vt=oe(kt,vt))he(kt,vt,M.NO_REG)},Oe=function(kt,vt,Rt,bt,St){for(;vt!==$;){let Nt=oe(kt,vt);he(kt,vt,bt)?_e(kt,vt,Rt):_e(kt,vt,St),vt=Nt}},Ue=function(kt){Oe(kt,kt.jpc,kt.pc,M.NO_REG,kt.pc),kt.jpc=$},Ee=function(kt,vt){Ae(kt),kt.jpc=pe(kt,kt.jpc,vt)},ke=function(kt,vt,Rt){Rt===kt.pc?Ee(kt,vt):(E(Rt<kt.pc),Oe(kt,vt,Rt,M.NO_REG,Rt))},Re=function(kt,vt){let Rt=kt.f;return Ue(kt),Rt.code[kt.pc]=vt,Rt.lineinfo[kt.pc]=kt.ls.lastline,kt.pc++},be=function(kt,vt,Rt,bt,St){return E(M.getOpMode(vt)===M.iABC),E(M.getBMode(vt)!==M.OpArgN||0===bt),E(M.getCMode(vt)!==M.OpArgN||0===St),E(Rt<=M.MAXARG_A&&bt<=M.MAXARG_B&&St<=M.MAXARG_C),Re(kt,M.CREATE_ABC(vt,Rt,bt,St))},Se=function(kt,vt,Rt,bt){return E(M.getOpMode(vt)===M.iABx||M.getOpMode(vt)===M.iAsBx),E(M.getCMode(vt)===M.OpArgN),E(Rt<=M.MAXARG_A&&bt<=M.MAXARG_Bx),Re(kt,M.CREATE_ABx(vt,Rt,bt))},Ne=function(kt,vt,Rt,bt){return Se(kt,vt,Rt,bt+M.MAXARG_sBx)},Ie=function(kt,vt){return E(vt<=M.MAXARG_Ax),Re(kt,M.CREATE_Ax(q.OP_EXTRAARG,vt))},Ce=function(kt,vt,Rt){if(Rt<=M.MAXARG_Bx)return Se(kt,q.OP_LOADK,vt,Rt);let bt=Se(kt,q.OP_LOADKX,vt,0);return Ie(kt,Rt),bt},Pe=function(kt,vt){let Rt=kt.freereg+vt;Rt>kt.f.maxstacksize&&(255<=Rt&&I.luaX_syntaxerror(kt.ls,N.to_luastring('function or expression needs to many registers',!0)),kt.f.maxstacksize=Rt)},Me=function(kt,vt){Pe(kt,vt),kt.freereg+=vt},ye=function(kt,vt){!M.ISK(vt)&&vt>=kt.nactvar&&(kt.freereg--,E(vt===kt.freereg))},De=function(kt,vt){vt.k===K.expkind.VNONRELOC&&ye(kt,vt.u.info)},Ke=function(kt,vt,Rt){let bt=vt.k===K.expkind.VNONRELOC?vt.u.info:-1,St=Rt.k===K.expkind.VNONRELOC?Rt.u.info:-1;bt>St?(ye(kt,bt),ye(kt,St)):(ye(kt,St),ye(kt,bt))},Be=function(kt,vt,Rt){let bt=kt.f,St=F.luaH_set(kt.ls.h,vt);if(St.ttisinteger()){let It=St.value;if(It<kt.nk&&bt.k[It].ttype()===Rt.ttype()&&bt.k[It].value===Rt.value)return It}let Nt=kt.nk;return St.setivalue(Nt),bt.k[Nt]=Rt,kt.nk++,Nt},Ge=function(kt,vt){let Rt=new W(J.LUA_TLNGSTR,V.luaS_bless(kt.L,N.to_luastring(`${vt}`))),bt=new W(J.LUA_TNUMINT,vt);return Be(kt,Rt,bt)},we=function(kt,vt){let Rt=new W(J.LUA_TNUMFLT,vt);return Be(kt,Rt,Rt)},Fe=function(kt,vt){let Rt=new W(J.LUA_TBOOLEAN,vt);return Be(kt,Rt,Rt)},He=function(kt){let vt=new W(J.LUA_TNIL,null),Rt=new W(J.LUA_TTABLE,kt.ls.h);return Be(kt,Rt,vt)},Xe=function(kt,vt,Rt){let bt=K.expkind;if(vt.k===bt.VCALL)M.SETARG_C(ne(kt,vt),Rt+1);else if(vt.k===bt.VVARARG){let St=ne(kt,vt);M.SETARG_B(St,Rt+1),M.SETARG_A(St,kt.freereg),Me(kt,1)}else E(Rt===N.LUA_MULTRET)},ze=function(kt,vt){let Rt=K.expkind;vt.k===Rt.VCALL?(E(2===ne(kt,vt).C),vt.k=Rt.VNONRELOC,vt.u.info=ne(kt,vt).A):vt.k===Rt.VVARARG&&(M.SETARG_B(ne(kt,vt),2),vt.k=Rt.VRELOCABLE)},Ye=function(kt,vt){let Rt=K.expkind;switch(vt.k){case Rt.VLOCAL:{vt.k=Rt.VNONRELOC;break}case Rt.VUPVAL:{vt.u.info=be(kt,q.OP_GETUPVAL,0,vt.u.info,0),vt.k=Rt.VRELOCABLE;break}case Rt.VINDEXED:{let bt;ye(kt,vt.u.ind.idx),vt.u.ind.vt===Rt.VLOCAL?(ye(kt,vt.u.ind.t),bt=q.OP_GETTABLE):(E(vt.u.ind.vt===Rt.VUPVAL),bt=q.OP_GETTABUP),vt.u.info=be(kt,bt,0,vt.u.ind.t,vt.u.ind.idx),vt.k=Rt.VRELOCABLE;break}case Rt.VVARARG:case Rt.VCALL:{ze(kt,vt);break}default:}},Je=function(kt,vt,Rt,bt){return Ae(kt),be(kt,q.OP_LOADBOOL,vt,Rt,bt)},Ze=function(kt,vt,Rt){let bt=K.expkind;switch(Ye(kt,vt),vt.k){case bt.VNIL:{se(kt,Rt,1);break}case bt.VFALSE:case bt.VTRUE:{be(kt,q.OP_LOADBOOL,Rt,vt.k===bt.VTRUE,0);break}case bt.VK:{Ce(kt,Rt,vt.u.info);break}case bt.VKFLT:{Ce(kt,Rt,we(kt,vt.u.nval));break}case bt.VKINT:{Ce(kt,Rt,Ge(kt,vt.u.ival));break}case bt.VRELOCABLE:{let St=ne(kt,vt);M.SETARG_A(St,Rt);break}case bt.VNONRELOC:{Rt!==vt.u.info&&be(kt,q.OP_MOVE,Rt,vt.u.info,0);break}default:return void E(vt.k===bt.VJMP);}vt.u.info=Rt,vt.k=bt.VNONRELOC},qe=function(kt,vt){vt.k!==K.expkind.VNONRELOC&&(Me(kt,1),Ze(kt,vt,kt.freereg-1))},We=function(kt,vt){for(;vt!==$;vt=oe(kt,vt)){let Rt=Te(kt,vt);if(Rt.opcode!==q.OP_TESTSET)return!0}return!1},Qe=function(kt,vt,Rt){let bt=K.expkind;if(Ze(kt,vt,Rt),vt.k===bt.VJMP&&(vt.t=pe(kt,vt.t,vt.u.info)),ae(vt)){let Nt=$,It=$,St;if(We(kt,vt.t)||We(kt,vt.f)){let Ct=vt.k===bt.VJMP?$:ce(kt);Nt=Je(kt,Rt,0,1),It=Je(kt,Rt,1,0),Ee(kt,Ct)}St=Ae(kt),Oe(kt,vt.f,St,Rt,Nt),Oe(kt,vt.t,St,Rt,It)}vt.f=vt.t=$,vt.u.info=Rt,vt.k=bt.VNONRELOC},$e=function(kt,vt){Ye(kt,vt),De(kt,vt),Me(kt,1),Qe(kt,vt,kt.freereg-1)},et=function(kt,vt){if(Ye(kt,vt),vt.k===K.expkind.VNONRELOC){if(!ae(vt))return vt.u.info;if(vt.u.info>=kt.nactvar)return Qe(kt,vt,vt.u.info),vt.u.info}return $e(kt,vt),vt.u.info},lt=function(kt,vt){ae(vt)?et(kt,vt):Ye(kt,vt)},ut=function(kt,vt){let Rt=K.expkind,bt=!1;switch(lt(kt,vt),vt.k){case Rt.VTRUE:vt.u.info=Fe(kt,!0),bt=!0;break;case Rt.VFALSE:vt.u.info=Fe(kt,!1),bt=!0;break;case Rt.VNIL:vt.u.info=He(kt),bt=!0;break;case Rt.VKINT:vt.u.info=Ge(kt,vt.u.ival),bt=!0;break;case Rt.VKFLT:vt.u.info=we(kt,vt.u.nval),bt=!0;break;case Rt.VK:bt=!0;break;default:}return bt&&(vt.k=Rt.VK,vt.u.info<=M.MAXINDEXRK)?M.RKASK(vt.u.info):et(kt,vt)},nt=function(kt,vt){let Rt=Te(kt,vt.u.info);E(M.testTMode(Rt.opcode)&&Rt.opcode!==q.OP_TESTSET&&Rt.opcode!==q.OP_TEST),M.SETARG_A(Rt,!Rt.A)},ot=function(kt,vt,Rt){if(vt.k===K.expkind.VRELOCABLE){let bt=ne(kt,vt);if(bt.opcode===q.OP_NOT)return kt.pc--,ge(kt,q.OP_TEST,bt.B,0,!Rt)}return qe(kt,vt),De(kt,vt),ge(kt,q.OP_TESTSET,M.NO_REG,vt.u.info,Rt)},_t=function(kt,vt){let Rt=K.expkind,bt;switch(Ye(kt,vt),vt.k){case Rt.VJMP:{nt(kt,vt),bt=vt.u.info;break}case Rt.VK:case Rt.VKFLT:case Rt.VKINT:case Rt.VTRUE:{bt=$;break}default:{bt=ot(kt,vt,0);break}}vt.f=pe(kt,vt.f,bt),Ee(kt,vt.t),vt.t=$},it=function(kt,vt){let Rt=K.expkind,bt;switch(Ye(kt,vt),vt.k){case Rt.VJMP:{bt=vt.u.info;break}case Rt.VNIL:case Rt.VFALSE:{bt=$;break}default:{bt=ot(kt,vt,1);break}}vt.t=pe(kt,vt.t,bt),Ee(kt,vt.f),vt.f=$},pt=function(kt,vt){let Rt=K.expkind;switch(Ye(kt,vt),vt.k){case Rt.VNIL:case Rt.VFALSE:{vt.k=Rt.VTRUE;break}case Rt.VK:case Rt.VKFLT:case Rt.VKINT:case Rt.VTRUE:{vt.k=Rt.VFALSE;break}case Rt.VJMP:{nt(kt,vt);break}case Rt.VRELOCABLE:case Rt.VNONRELOC:{qe(kt,vt),De(kt,vt),vt.u.info=be(kt,q.OP_NOT,0,vt.u.info,0),vt.k=Rt.VRELOCABLE;break}}{let bt=vt.f;vt.f=vt.t,vt.t=bt}xe(kt,vt.f),xe(kt,vt.t)},dt=function(kt,vt,Rt){return kt===N.LUA_OPBAND||kt===N.LUA_OPBOR||kt===N.LUA_OPBXOR||kt===N.LUA_OPSHL||kt===N.LUA_OPSHR||kt===N.LUA_OPBNOT?Y.tointeger(vt)&&Y.tointeger(Rt):kt===N.LUA_OPDIV||kt===N.LUA_OPIDIV||kt===N.LUA_OPMOD?0!==Rt.value:1},Lt=function(kt,vt,Rt,bt){let St=K.expkind,Nt=new W,It=new W,Ct=new W;if(!ue(Rt,Nt)||!ue(bt,It)||!dt(vt,Nt,It))return 0;if(P.luaO_arith(kt.ls.L,vt,Nt,It,Ct),Ct.ttisinteger())Rt.k=St.VKINT,Rt.u.ival=Ct.value;else{let Pt=Ct.value;if(isNaN(Pt)||0===Pt)return!1;Rt.k=St.VKFLT,Rt.u.nval=Pt}return!0},ft=function(kt,vt,Rt,bt){let St=et(kt,Rt);De(kt,Rt),Rt.u.info=be(kt,vt,0,St,0),Rt.k=K.expkind.VRELOCABLE,Ut(kt,bt)},At=function(kt,vt,Rt,bt,St){let Nt=ut(kt,bt),It=ut(kt,Rt);Ke(kt,Rt,bt),Rt.u.info=be(kt,vt,0,It,Nt),Rt.k=K.expkind.VRELOCABLE,Ut(kt,St)},Tt=function(kt,vt,Rt,bt){let St=K.expkind,Nt;Rt.k===St.VK?Nt=M.RKASK(Rt.u.info):(E(Rt.k===St.VNONRELOC),Nt=Rt.u.info);let It=ut(kt,bt);switch(Ke(kt,Rt,bt),vt){case ee.OPR_NE:{Rt.u.info=ge(kt,q.OP_EQ,0,Nt,It);break}case ee.OPR_GT:case ee.OPR_GE:{let Ct=vt-ee.OPR_NE+q.OP_EQ;Rt.u.info=ge(kt,Ct,1,It,Nt);break}default:{let Ct=vt-ee.OPR_EQ+q.OP_EQ;Rt.u.info=ge(kt,Ct,1,Nt,It);break}}Rt.k=St.VJMP},Ut=function(kt,vt){kt.f.lineinfo[kt.pc-1]=vt};T.exports.BinOpr=ee,T.exports.NO_JUMP=$,T.exports.UnOpr=te,T.exports.getinstruction=ne,T.exports.luaK_checkstack=Pe,T.exports.luaK_code=Re,T.exports.luaK_codeABC=be,T.exports.luaK_codeABx=Se,T.exports.luaK_codeAsBx=Ne,T.exports.luaK_codek=Ce,T.exports.luaK_concat=pe,T.exports.luaK_dischargevars=Ye,T.exports.luaK_exp2RK=ut,T.exports.luaK_exp2anyreg=et,T.exports.luaK_exp2anyregup=function(kt,vt){(vt.k!==K.expkind.VUPVAL||ae(vt))&&et(kt,vt)},T.exports.luaK_exp2nextreg=$e,T.exports.luaK_exp2val=lt,T.exports.luaK_fixline=Ut,T.exports.luaK_getlabel=Ae,T.exports.luaK_goiffalse=it,T.exports.luaK_goiftrue=_t,T.exports.luaK_indexed=function(kt,vt,Rt){let bt=K.expkind;E(!ae(vt)&&(K.vkisinreg(vt.k)||vt.k===bt.VUPVAL)),vt.u.ind.t=vt.u.info,vt.u.ind.idx=ut(kt,Rt),vt.u.ind.vt=vt.k===bt.VUPVAL?bt.VUPVAL:bt.VLOCAL,vt.k=bt.VINDEXED},T.exports.luaK_infix=function(kt,vt,Rt){switch(vt){case ee.OPR_AND:{_t(kt,Rt);break}case ee.OPR_OR:{it(kt,Rt);break}case ee.OPR_CONCAT:{$e(kt,Rt);break}case ee.OPR_ADD:case ee.OPR_SUB:case ee.OPR_MUL:case ee.OPR_DIV:case ee.OPR_IDIV:case ee.OPR_MOD:case ee.OPR_POW:case ee.OPR_BAND:case ee.OPR_BOR:case ee.OPR_BXOR:case ee.OPR_SHL:case ee.OPR_SHR:{ue(Rt,null)||ut(kt,Rt);break}default:{ut(kt,Rt);break}}},T.exports.luaK_intK=Ge,T.exports.luaK_jump=ce,T.exports.luaK_jumpto=function(kt,vt){return ke(kt,ce(kt),vt)},T.exports.luaK_nil=se,T.exports.luaK_numberK=we,T.exports.luaK_patchclose=function(kt,vt,Rt){for(Rt++;vt!==$;vt=oe(kt,vt)){let bt=kt.f.code[vt];E(bt.opcode===q.OP_JMP&&(0===bt.A||bt.A>=Rt)),M.SETARG_A(bt,Rt)}},T.exports.luaK_patchlist=ke,T.exports.luaK_patchtohere=Ee,T.exports.luaK_posfix=function(kt,vt,Rt,bt,St){let Nt=K.expkind;switch(vt){case ee.OPR_AND:{E(Rt.t===$),Ye(kt,bt),bt.f=pe(kt,bt.f,Rt.f),Rt.to(bt);break}case ee.OPR_OR:{E(Rt.f===$),Ye(kt,bt),bt.t=pe(kt,bt.t,Rt.t),Rt.to(bt);break}case ee.OPR_CONCAT:{let It=ne(kt,bt);lt(kt,bt),bt.k===Nt.VRELOCABLE&&It.opcode===q.OP_CONCAT?(E(Rt.u.info===It.B-1),De(kt,Rt),M.SETARG_B(It,Rt.u.info),Rt.k=Nt.VRELOCABLE,Rt.u.info=bt.u.info):($e(kt,bt),At(kt,q.OP_CONCAT,Rt,bt,St));break}case ee.OPR_ADD:case ee.OPR_SUB:case ee.OPR_MUL:case ee.OPR_DIV:case ee.OPR_IDIV:case ee.OPR_MOD:case ee.OPR_POW:case ee.OPR_BAND:case ee.OPR_BOR:case ee.OPR_BXOR:case ee.OPR_SHL:case ee.OPR_SHR:{Lt(kt,vt+N.LUA_OPADD,Rt,bt)||At(kt,vt+q.OP_ADD,Rt,bt,St);break}case ee.OPR_EQ:case ee.OPR_LT:case ee.OPR_LE:case ee.OPR_NE:case ee.OPR_GT:case ee.OPR_GE:{Tt(kt,vt,Rt,bt);break}}return Rt},T.exports.luaK_prefix=function(kt,vt,Rt,bt){let St=new K.expdesc;switch(St.k=K.expkind.VKINT,St.u.ival=St.u.nval=St.u.info=0,St.t=$,St.f=$,vt){case te.OPR_MINUS:case te.OPR_BNOT:if(Lt(kt,vt+N.LUA_OPUNM,Rt,St))break;case te.OPR_LEN:ft(kt,vt+q.OP_UNM,Rt,bt);break;case te.OPR_NOT:pt(kt,Rt);}},T.exports.luaK_reserveregs=Me,T.exports.luaK_ret=function(kt,vt,Rt){be(kt,q.OP_RETURN,vt,Rt+1,0)},T.exports.luaK_self=function(kt,vt,Rt){et(kt,vt);let bt=vt.u.info;De(kt,vt),vt.u.info=kt.freereg,vt.k=K.expkind.VNONRELOC,Me(kt,2),be(kt,q.OP_SELF,vt.u.info,bt,ut(kt,Rt)),De(kt,Rt)},T.exports.luaK_setlist=function(kt,vt,Rt,bt){let St=(Rt-1)/M.LFIELDS_PER_FLUSH+1,Nt=bt===N.LUA_MULTRET?0:bt;E(0!==bt&&bt<=M.LFIELDS_PER_FLUSH),St<=M.MAXARG_C?be(kt,q.OP_SETLIST,vt,Nt,St):St<=M.MAXARG_Ax?(be(kt,q.OP_SETLIST,vt,Nt,0),Ie(kt,St)):I.luaX_syntaxerror(kt.ls,N.to_luastring('constructor too long',!0)),kt.freereg=vt+1},T.exports.luaK_setmultret=function(kt,vt){Xe(kt,vt,N.LUA_MULTRET)},T.exports.luaK_setoneret=ze,T.exports.luaK_setreturns=Xe,T.exports.luaK_storevar=function(kt,vt,Rt){let bt=K.expkind;switch(vt.k){case bt.VLOCAL:return De(kt,Rt),void Qe(kt,Rt,vt.u.info);case bt.VUPVAL:{let St=et(kt,Rt);be(kt,q.OP_SETUPVAL,St,vt.u.info,0);break}case bt.VINDEXED:{let St=vt.u.ind.vt===bt.VLOCAL?q.OP_SETTABLE:q.OP_SETTABUP,Nt=ut(kt,Rt);be(kt,St,vt.u.ind.t,vt.u.ind.idx,Nt);break}}De(kt,Rt)},T.exports.luaK_stringK=function(kt,vt){let Rt=new W(J.LUA_TLNGSTR,vt);return Be(kt,Rt,Rt)}},function(T,O,U){'use strict';const E=U(1),N=E.constant_types,K=16*_NumberparseInt(E.LUA_VERSION_MAJOR)+_NumberparseInt(E.LUA_VERSION_MINOR);class F{constructor(){this.L=null,this.write=null,this.data=null,this.strip=NaN,this.status=NaN}}const H=function(pe,ce,de){0===de.status&&0<ce&&(de.status=de.writer(de.L,pe,ce,de.data))},Y=function(pe,ce){pe=E.to_luastring(pe),H(pe,pe.length,ce)},J=function(pe,ce){H([pe],1,ce)},q=function(pe,ce){let de=new DataView(new ArrayBuffer(4));de.setInt32(0,pe,!0);let Le=[];for(let ge=0;4>ge;ge++)Le.push(de.getUint8(ge,!0));H(Le,4,ce)},W=function(pe,ce){let de=new DataView(new ArrayBuffer(4));de.setInt32(0,pe,!0);let Le=[];for(let ge=0;4>ge;ge++)Le.push(de.getUint8(ge,!0));H(Le,8,ce)},Q=function(pe,ce){let de=new DataView(new ArrayBuffer(8));de.setFloat64(0,pe,!0);let Le=[];for(let ge=0;8>ge;ge++)Le.push(de.getUint8(ge,!0));H(Le,8,ce)},$=function(pe,ce){if(null===pe)J(0,ce);else{let de=pe.tsslen()+1,Le=pe.getstr();255>de?J(de,ce):(J(255,ce),W(de,ce)),H(Le,de-1,ce)}},ee=function(pe,ce){let de=pe.code.map((Le)=>Le.code);q(de.length,ce);for(let Le=0;Le<de.length;Le++)q(de[Le],ce)},te=function(pe,ce){let de=pe.k.length;q(de,ce);for(let Le=0,ge;Le<de;Le++)switch(ge=pe.k[Le],J(ge.ttype(),ce),ge.ttype()){case N.LUA_TNIL:break;case N.LUA_TBOOLEAN:J(ge.value?1:0,ce);break;case N.LUA_TNUMFLT:Q(ge.value,ce);break;case N.LUA_TNUMINT:W(ge.value,ce);break;case N.LUA_TSHRSTR:case N.LUA_TLNGSTR:$(ge.tsvalue(),ce);}},ae=function(pe,ce){let de=pe.p.length;q(de,ce);for(let Le=0;Le<de;Le++)ne(pe.p[Le],pe.source,ce)},ue=function(pe,ce){let de=pe.upvalues.length;q(de,ce);for(let Le=0;Le<de;Le++)J(pe.upvalues[Le].instack?1:0,ce),J(pe.upvalues[Le].idx,ce)},se=function(pe,ce){let de=ce.strip?0:pe.lineinfo.length;q(de,ce);for(let Le=0;Le<de;Le++)q(pe.lineinfo[Le],ce);de=ce.strip?0:pe.locvars.length,q(de,ce);for(let Le=0;Le<de;Le++)$(pe.locvars[Le].varname,ce),q(pe.locvars[Le].startpc,ce),q(pe.locvars[Le].endpc,ce);de=ce.strip?0:pe.upvalues.length,q(de,ce);for(let Le=0;Le<de;Le++)$(pe.upvalues[Le].name,ce)},ne=function(pe,ce,de){de.strip||pe.source===ce?$(null,de):$(pe.source,de),q(pe.linedefined,de),q(pe.lastlinedefined,de),J(pe.numparams,de),J(pe.is_vararg?1:0,de),J(pe.maxstacksize,de),ee(pe,de),te(pe,de),ue(pe,de),ae(pe,de),se(pe,de)},oe=function(pe){Y(E.LUA_SIGNATURE,pe),J(K,pe),J(0,pe);let ce='\x19\x93\r\n\x1A\n'.split('').map((de)=>de.charCodeAt(0));H(ce,ce.length,pe),J(4,pe),J(8,pe),J(4,pe),J(4,pe),J(8,pe),W(22136,pe),Q(370.5,pe)};T.exports.luaU_dump=function(pe,ce,de,Le,ge){let Ae=new F;return Ae.L=pe,Ae.writer=de,Ae.data=Le,Ae.strip=ge,Ae.status=0,oe(Ae),J(ce.upvalues.length,Ae),ne(ce,null,Ae),Ae.status}},function(T,O,U){'use strict';const E=U(2),N=U(6),I=U(40),P=U(24),M=U(28),K=U(32),V=U(33),F=U(35),H=U(25),Y=U(30),J=U(29),q=U(34);T.exports.luaL_openlibs=function(Q){const $={[q.LUA_LOADLIBNAME]:J.luaopen_package,[q.LUA_COLIBNAME]:P.luaopen_coroutine,[q.LUA_DBLIBNAME]:H.luaopen_debug,[q.LUA_MATHLIBNAME]:M.luaopen_math,[q.LUA_OSLIBNAME]:Y.luaopen_os,[q.LUA_STRLIBNAME]:K.luaopen_string,[q.LUA_TABLIBNAME]:V.luaopen_table,[q.LUA_UTF8LIBNAME]:F.luaopen_utf8,_G:I.luaopen_base};for(let ee in!1,$)N.luaL_requiref(Q,E.to_luastring(ee),$[ee],1),E.lua_pop(Q,1)}},function(T,O,U){'use strict';const E=U(0),N=U(1),I=U(9),P=U(11),M=U(4),K=U(18),V=U(7),F=U(20);let H=[25,147,N.char['\r'],N.char['\n'],26,N.char['\n']];class Y{constructor(q,W,Q){this.intSize=4,this.size_tSize=8,this.instructionSize=4,this.integerSize=4,this.numberSize=8,E(W instanceof F.ZIO,'BytecodeParser only operates on a ZIO'),E(Array.isArray(Q)),this.name=Q[0]==N.char['@']||Q[0]==N.char['=']?Q.slice(1):Q[0]==N.LUA_SIGNATURE.charCodeAt(0)?N.to_luastring('binary string',!0):Q,this.L=q,this.Z=W,this.arraybuffer=new ArrayBuffer(_Mathmax(this.intSize,this.size_tSize,this.instructionSize,this.integerSize,this.numberSize)),this.dv=new DataView(this.arraybuffer),this.u8=new Uint8Array(this.arraybuffer)}read(q){let W=new Uint8Array(q);return 0!==F.luaZ_read(this.Z,W,0,q)&&this.error('truncated'),Array.from(W)}readByte(){return 0!==F.luaZ_read(this.Z,this.u8,0,1)&&this.error('truncated'),this.u8[0]}readInteger(){return 0!==F.luaZ_read(this.Z,this.u8,0,this.integerSize)&&this.error('truncated'),this.dv.getInt32(0,!0)}readSize_t(){return this.readInteger()}readInt(){return 0!==F.luaZ_read(this.Z,this.u8,0,this.intSize)&&this.error('truncated'),this.dv.getInt32(0,!0)}readNumber(){return 0!==F.luaZ_read(this.Z,this.u8,0,this.numberSize)&&this.error('truncated'),this.dv.getFloat64(0,!0)}readString(){let q=_Mathmax(this.readByte()-1,0);return 255===q+1&&(q=this.readSize_t()-1),0===q?null:V.luaS_bless(this.L,this.read(q))}static MASK1(q,W){return~(-1<<q)<<W}static MASK0(q,W){return~Y.MASK1(q,W)}readInstruction(){return 0!==F.luaZ_read(this.Z,this.u8,0,this.instructionSize)&&this.error('truncated'),this.dv.getUint32(0,!0)}readCode(q){let W=this.readInt(),Q=K,$=Y;for(let ee=0,te;ee<W;ee++)te=this.readInstruction(),q.code[ee]={code:te,opcode:te>>Q.POS_OP&$.MASK1(Q.SIZE_OP,0),A:te>>Q.POS_A&$.MASK1(Q.SIZE_A,0),B:te>>Q.POS_B&$.MASK1(Q.SIZE_B,0),C:te>>Q.POS_C&$.MASK1(Q.SIZE_C,0),Bx:te>>Q.POS_Bx&$.MASK1(Q.SIZE_Bx,0),Ax:te>>Q.POS_Ax&$.MASK1(Q.SIZE_Ax,0),sBx:(te>>Q.POS_Bx&$.MASK1(Q.SIZE_Bx,0))-Q.MAXARG_sBx}}readUpvalues(q){let W=this.readInt();for(let Q=0;Q<W;Q++)q.upvalues[Q]={name:null,instack:this.readByte(),idx:this.readByte()}}readConstants(q){let W=this.readInt();for(let Q=0,$;Q<W;Q++)$=this.readByte(),$===N.CT.LUA_TNIL?q.k.push(new M.TValue(N.CT.LUA_TNIL,null)):$===N.CT.LUA_TBOOLEAN?q.k.push(new M.TValue(N.CT.LUA_TBOOLEAN,0!==this.readByte())):$===N.CT.LUA_TNUMFLT?q.k.push(new M.TValue(N.CT.LUA_TNUMFLT,this.readNumber())):$===N.CT.LUA_TNUMINT?q.k.push(new M.TValue(N.CT.LUA_TNUMINT,this.readInteger())):$===N.CT.LUA_TSHRSTR||$===N.CT.LUA_TLNGSTR?q.k.push(new M.TValue(N.CT.LUA_TLNGSTR,this.readString())):this.error(`unrecognized constant '${$}'`)}readProtos(q){let W=this.readInt();for(let Q=0;Q<W;Q++)q.p[Q]=new P.Proto(this.L),this.readFunction(q.p[Q],q.source)}readDebug(q){let W=this.readInt();for(let Q=0;Q<W;Q++)q.lineinfo[Q]=this.readInt();W=this.readInt();for(let Q=0;Q<W;Q++)q.locvars[Q]={varname:this.readString(),startpc:this.readInt(),endpc:this.readInt()};W=this.readInt();for(let Q=0;Q<W;Q++)q.upvalues[Q].name=this.readString()}readFunction(q,W){q.source=this.readString(),null===q.source&&(q.source=W),q.linedefined=this.readInt(),q.lastlinedefined=this.readInt(),q.numparams=this.readByte(),q.is_vararg=0!==this.readByte(),q.maxstacksize=this.readByte(),this.readCode(q),this.readConstants(q),this.readUpvalues(q),this.readProtos(q),this.readDebug(q)}checkliteral(q,W){let Q=this.read(q.length);Q.join()!==q.join()&&this.error(W)}checkHeader(){this.checkliteral(N.to_luastring(N.LUA_SIGNATURE.substring(1)),'not a'),83!==this.readByte()&&this.error('version mismatch in'),0!==this.readByte()&&this.error('format mismatch in'),this.checkliteral(H,'corrupted'),this.intSize=this.readByte(),this.size_tSize=this.readByte(),this.instructionSize=this.readByte(),this.integerSize=this.readByte(),this.numberSize=this.readByte(),this.checksize(this.intSize,4,'int'),this.checksize(this.size_tSize,8,'size_t'),this.checksize(this.instructionSize,4,'instruction'),this.checksize(this.integerSize,4,'integer'),this.checksize(this.numberSize,8,'number'),22136!==this.readInteger()&&this.error('endianness mismatch in'),370.5!==this.readNumber()&&this.error('float format mismatch in')}error(q){M.luaO_pushfstring(this.L,N.to_luastring('%s: %s precompiled chunk'),this.name,N.to_luastring(q)),I.luaD_throw(this.L,N.thread_status.LUA_ERRSYNTAX)}checksize(q,W,Q){q!==W&&this.error(`${Q} size mismatch in`)}}T.exports.luaU_undump=function(q,W,Q){let $=new Y(q,W,Q);$.checkHeader();let ee=P.luaF_newLclosure(q,$.readByte());return q.stack[q.top++]=new M.TValue(N.CT.LUA_TLCL,ee),ee.p=new P.Proto(q),$.readFunction(ee.p,null),E(ee.nupvalues===ee.p.upvalues.length),ee}},function(T,O,U){var E=U(46),N=U(48),I=U(51),P=U(50),M=U(49),K=U(47),V=U(52);V.alea=E,V.xor128=N,V.xorwow=I,V.xorshift7=P,V.xor4096=M,V.tychei=K,T.exports=V},function(T,O,U){(function(E){var N;(function(I,P){function K(Y){var J=this,q=H();J.next=function(){var W=2091639*J.s0+2.3283064365386963e-10*J.c;return J.s0=J.s1,J.s1=J.s2,J.s2=W-(J.c=0|W)},J.c=1,J.s0=q(' '),J.s1=q(' '),J.s2=q(' '),J.s0-=q(Y),0>J.s0&&(J.s0+=1),J.s1-=q(Y),0>J.s1&&(J.s1+=1),J.s2-=q(Y),0>J.s2&&(J.s2+=1),q=null}function V(Y,J){return J.c=Y.c,J.s0=Y.s0,J.s1=Y.s1,J.s2=Y.s2,J}function F(Y,J){var q=new K(Y),W=J&&J.state,Q=q.next;return Q.int32=function(){return 0|4294967296*q.next()},Q.double=function(){return Q()+1.1102230246251565e-16*(0|2097152*Q())},Q.quick=Q,W&&('object'==typeof W&&V(W,q),Q.state=function(){return V(q,{})}),Q}function H(){var Y=4022871197;return function(q){q=q.toString();for(var W=0;W<q.length;W++){Y+=q.charCodeAt(W);var Q=0.02519603282416938*Y;Y=Q>>>0,Q-=Y,Q*=Y,Y=Q>>>0,Q-=Y,Y+=4294967296*Q}return 2.3283064365386963e-10*(Y>>>0)}}P&&P.exports?P.exports=F:U(5)&&U(16)?(N=function(){return F}.call(O,U,O,P),!(void 0!==N&&(P.exports=N))):this.alea=F})(this,'object'==typeof E&&E,U(5))}).call(O,U(17)(T))},function(T,O,U){(function(E){var N;(function(I,P){function K(H){var Y=this,J='';Y.next=function(){var W=Y.b,Q=Y.c,$=Y.d,ee=Y.a;return W=W<<25^W>>>7^Q,Q=0|Q-$,$=$<<24^$>>>8^ee,ee=0|ee-W,Y.b=W=W<<20^W>>>12^Q,Y.c=Q=0|Q-$,Y.d=$<<16^Q>>>16^ee,Y.a=0|ee-W},Y.a=0,Y.b=0,Y.c=-1640531527,Y.d=1367130551,H===_Mathfloor(H)?(Y.a=0|H/4294967296,Y.b=0|H):J+=H;for(var q=0;q<J.length+20;q++)Y.b^=0|J.charCodeAt(q),Y.next()}function V(H,Y){return Y.a=H.a,Y.b=H.b,Y.c=H.c,Y.d=H.d,Y}function F(H,Y){var J=new K(H),q=Y&&Y.state,W=function(){return(J.next()>>>0)/4294967296};return W.double=function(){do var Q=J.next()>>>11,$=(J.next()>>>0)/4294967296,ee=(Q+$)/2097152;while(0===ee);return ee},W.int32=J.next,W.quick=W,q&&('object'==typeof q&&V(q,J),W.state=function(){return V(J,{})}),W}P&&P.exports?P.exports=F:U(5)&&U(16)?(N=function(){return F}.call(O,U,O,P),!(void 0!==N&&(P.exports=N))):this.tychei=F})(this,'object'==typeof E&&E,U(5))}).call(O,U(17)(T))},function(T,O,U){(function(E){var N;(function(I,P){function K(H){var Y=this,J='';Y.x=0,Y.y=0,Y.z=0,Y.w=0,Y.next=function(){var W=Y.x^Y.x<<11;return Y.x=Y.y,Y.y=Y.z,Y.z=Y.w,Y.w^=Y.w>>>19^W^W>>>8},H===(0|H)?Y.x=H:J+=H;for(var q=0;q<J.length+64;q++)Y.x^=0|J.charCodeAt(q),Y.next()}function V(H,Y){return Y.x=H.x,Y.y=H.y,Y.z=H.z,Y.w=H.w,Y}function F(H,Y){var J=new K(H),q=Y&&Y.state,W=function(){return(J.next()>>>0)/4294967296};return W.double=function(){do var Q=J.next()>>>11,$=(J.next()>>>0)/4294967296,ee=(Q+$)/2097152;while(0===ee);return ee},W.int32=J.next,W.quick=W,q&&('object'==typeof q&&V(q,J),W.state=function(){return V(J,{})}),W}P&&P.exports?P.exports=F:U(5)&&U(16)?(N=function(){return F}.call(O,U,O,P),!(void 0!==N&&(P.exports=N))):this.xor128=F})(this,'object'==typeof E&&E,U(5))}).call(O,U(17)(T))},function(T,O,U){(function(E){var N;(function(I,P){function K(H){var J=this;J.next=function(){var q=J.w,W=J.X,Q=J.i,$,ee;return J.w=q=0|q+1640531527,ee=W[127&Q+34],$=W[Q=127&Q+1],ee^=ee<<13,$^=$<<17,ee^=ee>>>15,$^=$>>>12,ee=W[Q]=ee^$,J.i=Q,0|ee+(q^q>>>16)},function(q,W){var ue=[],se=128,Q,$,ee,te,ae;for(W===(0|W)?($=W,W=null):(W+='\0',$=0,se=_Mathmax(se,W.length)),ee=0,te=-32;te<se;++te)W&&($^=W.charCodeAt((te+32)%W.length)),0===te&&(ae=$),$^=$<<10,$^=$>>>15,$^=$<<4,$^=$>>>13,0<=te&&(ae=0|ae+1640531527,Q=ue[127&te]^=$+ae,ee=0==Q?ee+1:0);for(128<=ee&&(ue[127&(W&&W.length||0)]=-1),ee=127,te=512;0<te;--te)$=ue[127&ee+34],Q=ue[ee=127&ee+1],$^=$<<13,Q^=Q<<17,$^=$>>>15,Q^=Q>>>12,ue[ee]=$^Q;q.w=ae,q.X=ue,q.i=ee}(J,H)}function V(H,Y){return Y.i=H.i,Y.w=H.w,Y.X=H.X.slice(),Y}function F(H,Y){null==H&&(H=+new Date);var J=new K(H),q=Y&&Y.state,W=function(){return(J.next()>>>0)/4294967296};return W.double=function(){do var Q=J.next()>>>11,$=(J.next()>>>0)/4294967296,ee=(Q+$)/2097152;while(0===ee);return ee},W.int32=J.next,W.quick=W,q&&(q.X&&V(q,J),W.state=function(){return V(J,{})}),W}P&&P.exports?P.exports=F:U(5)&&U(16)?(N=function(){return F}.call(O,U,O,P),!(void 0!==N&&(P.exports=N))):this.xor4096=F})(this,'object'==typeof E&&E,U(5))}).call(O,U(17)(T))},function(T,O,U){(function(E){var N;(function(I,P){function K(H){var J=this;J.next=function(){var q=J.x,W=J.i,Q,$;return Q=q[W],Q^=Q>>>7,$=Q^Q<<24,Q=q[7&W+1],$^=Q^Q>>>10,Q=q[7&W+3],$^=Q^Q>>>3,Q=q[7&W+4],$^=Q^Q<<7,Q=q[7&W+7],Q^=Q<<13,$^=Q^Q<<9,q[W]=$,J.i=7&W+1,$},function(q,W){var ee=[],Q,$;if(W===(0|W))$=ee[0]=W;else for(W=''+W,Q=0;Q<W.length;++Q)ee[7&Q]=ee[7&Q]<<15^W.charCodeAt(Q)+ee[7&Q+1]<<13;for(;8>ee.length;)ee.push(0);for(Q=0;8>Q&&0===ee[Q];++Q);for($=8==Q?ee[7]=-1:ee[Q],q.x=ee,q.i=0,Q=256;0<Q;--Q)q.next()}(J,H)}function V(H,Y){return Y.x=H.x.slice(),Y.i=H.i,Y}function F(H,Y){null==H&&(H=+new Date);var J=new K(H),q=Y&&Y.state,W=function(){return(J.next()>>>0)/4294967296};return W.double=function(){do var Q=J.next()>>>11,$=(J.next()>>>0)/4294967296,ee=(Q+$)/2097152;while(0===ee);return ee},W.int32=J.next,W.quick=W,q&&(q.x&&V(q,J),W.state=function(){return V(J,{})}),W}P&&P.exports?P.exports=F:U(5)&&U(16)?(N=function(){return F}.call(O,U,O,P),!(void 0!==N&&(P.exports=N))):this.xorshift7=F})(this,'object'==typeof E&&E,U(5))}).call(O,U(17)(T))},function(T,O,U){(function(E){var N;(function(I,P){function K(H){var Y=this,J='';Y.next=function(){var W=Y.x^Y.x>>>2;return Y.x=Y.y,Y.y=Y.z,Y.z=Y.w,Y.w=Y.v,0|(Y.d=0|Y.d+362437)+(Y.v=Y.v^Y.v<<4^(W^W<<1))},Y.x=0,Y.y=0,Y.z=0,Y.w=0,Y.v=0,H===(0|H)?Y.x=H:J+=H;for(var q=0;q<J.length+64;q++)Y.x^=0|J.charCodeAt(q),q==J.length&&(Y.d=Y.x<<10^Y.x>>>4),Y.next()}function V(H,Y){return Y.x=H.x,Y.y=H.y,Y.z=H.z,Y.w=H.w,Y.v=H.v,Y.d=H.d,Y}function F(H,Y){var J=new K(H),q=Y&&Y.state,W=function(){return(J.next()>>>0)/4294967296};return W.double=function(){do var Q=J.next()>>>11,$=(J.next()>>>0)/4294967296,ee=(Q+$)/2097152;while(0===ee);return ee},W.int32=J.next,W.quick=W,q&&('object'==typeof q&&V(q,J),W.state=function(){return V(J,{})}),W}P&&P.exports?P.exports=F:U(5)&&U(16)?(N=function(){return F}.call(O,U,O,P),!(void 0!==N&&(P.exports=N))):this.xorwow=F})(this,'object'==typeof E&&E,U(5))}).call(O,U(17)(T))},function(T,O,U){var E;(function(N,I){function P(ne,oe,_e){var pe=[];oe=!0==oe?{entropy:!0}:oe||{};var ce=F(V(oe.entropy?[ne,Y(N)]:null==ne?H():ne,3),pe),de=new M(pe),Le=function(){for(var ge=de.g(W),Ae=ee,Te=0;ge<te;)ge=(ge+Te)*q,Ae*=q,Te=de.g(1);for(;ge>=ae;)ge/=2,Ae/=2,Te>>>=1;return(ge+Te)/Ae};return Le.int32=function(){return 0|de.g(4)},Le.quick=function(){return de.g(4)/4294967296},Le.double=Le,F(Y(de.S),N),(oe.pass||_e||function(ge,Ae,Te,he){return he&&(he.S&&K(he,de),ge.state=function(){return K(de,{})}),Te?(I[$]=ge,Ae):ge})(Le,ce,'global'in oe?oe.global:this==I,oe.state)}function M(ne){var _e=ne.length,pe=this,ce=0,de=pe.i=pe.j=0,Le=pe.S=[],oe;for(_e||(ne=[_e++]);ce<q;)Le[ce]=ce++;for(ce=0;ce<q;ce++)Le[ce]=Le[de=ue&de+ne[ce%_e]+(oe=Le[ce])],Le[de]=oe;(pe.g=function(ge){for(var Te=0,he=pe.i,xe=pe.j,Oe=pe.S,Ae;ge--;)Ae=Oe[he=ue&he+1],Te=Te*q+Oe[ue&(Oe[he]=Oe[xe=ue&xe+Ae])+(Oe[xe]=Ae)];return pe.i=he,pe.j=xe,Te})(q)}function K(ne,oe){return oe.i=ne.i,oe.j=ne.j,oe.S=ne.S.slice(),oe}function V(ne,oe){var _e=[],pe=typeof ne,ce;if(oe&&'object'==pe)for(ce in ne)try{_e.push(V(ne[ce],oe-1))}catch(de){}return _e.length?_e:'string'==pe?ne:ne+'\0'}function F(ne,oe){for(var _e=ne+'',ce=0,pe;ce<_e.length;)oe[ue&ce]=ue&(pe^=19*oe[ue&ce])+_e.charCodeAt(ce++);return Y(oe)}function H(){try{var ne;return se&&(ne=se.randomBytes)?ne=ne(q):(ne=new Uint8Array(q),(J.crypto||J.msCrypto).getRandomValues(ne)),Y(ne)}catch(pe){var oe=J.navigator,_e=oe&&oe.plugins;return[+new Date,J,_e,J.screen,Y(N)]}}function Y(ne){return _StringfromCharCode.apply(0,ne)}var J=this,q=256,W=6,$='random',ee=I.pow(q,W),te=I.pow(2,52),ae=2*te,ue=q-1,se;if(I['seed'+$]=P,F(I.random(),N),'object'==typeof T&&T.exports){T.exports=P;try{se=U(57)}catch(ne){}}else E=function(){return P}.call(O,U,O,T),!(void 0!==E&&(T.exports=E))})([],Math)},function(T,O,U){var E;(function(N){'use strict';function I(){var H=arguments[0],Y=I.cache;return Y[H]&&Y.hasOwnProperty(H)||(Y[H]=I.parse(H)),I.format.call(null,Y[H],arguments)}function P(H){return'number'==typeof H?'number':'string'==typeof H?'string':Object.prototype.toString.call(H).slice(8,-1).toLowerCase()}function M(H,Y){return 0<=Y&&7>=Y&&F[H]?F[H][Y]:Array(Y+1).join(H)}var K={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};I.format=function(H,Y){var J=1,q=H.length,W='',$=[],oe=!0,_e='',Q,ee,te,ae,ue,se,ne;for(ee=0;ee<q;ee++)if(W=P(H[ee]),'string'===W)$[$.length]=H[ee];else if('array'===W){if(ae=H[ee],ae[2])for(Q=Y[J],te=0;te<ae[2].length;te++){if(!Q.hasOwnProperty(ae[2][te]))throw new Error(I('[sprintf] property "%s" does not exist',ae[2][te]));Q=Q[ae[2][te]]}else Q=ae[1]?Y[ae[1]]:Y[J++];if(K.not_type.test(ae[8])&&K.not_primitive.test(ae[8])&&'function'==P(Q)&&(Q=Q()),K.numeric_arg.test(ae[8])&&'number'!=P(Q)&&isNaN(Q))throw new TypeError(I('[sprintf] expecting number but found %s',P(Q)));switch(K.number.test(ae[8])&&(oe=0<=Q),ae[8]){case'b':Q=parseInt(Q,10).toString(2);break;case'c':Q=_StringfromCharCode(parseInt(Q,10));break;case'd':case'i':Q=parseInt(Q,10);break;case'j':Q=JSON.stringify(Q,null,ae[6]?parseInt(ae[6]):0);break;case'e':Q=ae[7]?parseFloat(Q).toExponential(ae[7]):parseFloat(Q).toExponential();break;case'f':Q=ae[7]?parseFloat(Q).toFixed(ae[7]):parseFloat(Q);break;case'g':Q=ae[7]?+Q.toPrecision(ae[7])+'':parseFloat(Q);break;case'o':Q=Q.toString(8);break;case's':Q+='',Q=ae[7]?Q.substring(0,ae[7]):Q;break;case't':Q=!!Q+'',Q=ae[7]?Q.substring(0,ae[7]):Q;break;case'T':Q=P(Q),Q=ae[7]?Q.substring(0,ae[7]):Q;break;case'u':Q=parseInt(Q,10)>>>0;break;case'v':Q=Q.valueOf(),Q=ae[7]?Q.substring(0,ae[7]):Q;break;case'x':Q=parseInt(Q,10).toString(16);break;case'X':Q=parseInt(Q,10).toString(16).toUpperCase();}K.json.test(ae[8])?$[$.length]=Q:(K.number.test(ae[8])&&(!oe||ae[3])?(_e=oe?'+':'-',Q=Q.toString().replace(K.sign,'')):_e='',se=ae[4]?'0'===ae[4]?'0':ae[4].charAt(1):' ',ne=ae[6]-(_e+Q).length,ue=ae[6]?0<ne?M(se,ne):'':'',$[$.length]=ae[5]?_e+Q+ue:'0'===se?_e+ue+Q:ue+_e+Q)}return $.join('')},I.cache={},I.parse=function(H){for(var Y=H,J=[],q=[],W=0;Y;){if(null!==(J=K.text.exec(Y)))q[q.length]=J[0];else if(null!==(J=K.modulo.exec(Y)))q[q.length]='%';else if(null!==(J=K.placeholder.exec(Y))){if(J[2]){W|=1;var Q=[],$=J[2],ee=[];if(null!==(ee=K.key.exec($))){for(Q[Q.length]=ee[1];''!==($=$.substring(ee[0].length));)if(null!==(ee=K.key_access.exec($)))Q[Q.length]=ee[1];else if(null!==(ee=K.index_access.exec($)))Q[Q.length]=ee[1];else throw new SyntaxError('[sprintf] failed to parse named argument key');}else throw new SyntaxError('[sprintf] failed to parse named argument key');J[2]=Q}else W|=2;if(3==W)throw new Error('[sprintf] mixing positional and named placeholders is not (yet) supported');q[q.length]=J}else throw new SyntaxError('[sprintf] unexpected placeholder');Y=Y.substring(J[0].length)}return q};var V=function(H,Y,J){return J=(Y||[]).slice(0),J.splice(0,0,H),I.apply(null,J)},F={0:['','0','00','000','0000','00000','000000','0000000'],' ':['',' ','  ','   ','    ','     ','      ','       '],_:['','_','__','___','____','_____','______','_______']};O.sprintf=I,O.vsprintf=V,'undefined'!=typeof N&&(N.sprintf=I,N.vsprintf=V,E=function(){return{sprintf:I,vsprintf:V}}.call(O,U,O,T),!(void 0!==E&&(T.exports=E)))})('undefined'==typeof window?this:window)},function(T){(function(){function U(W,Q,$){function te(pe,ce,de,Le){for(var ge='',Ae=null,Te=!1,he=pe.length,xe=!1,Oe=0,Ue;Oe<he;Oe++){if(Ue=pe.charCodeAt(Oe),!0==Te){if(45===Ue){Ae='';continue}else if(95===Ue){Ae=' ';continue}else if(48===Ue){Ae='0';continue}else if(58===Ue){xe&&V('[WARNING] detected use of unsupported %:: or %::: modifiers to strftime'),xe=!0;continue}switch(Ue){case 37:ge+='%';break;case 65:ge+=de.days[ce.getDay()];break;case 66:ge+=de.months[ce.getMonth()];break;case 67:ge+=E(_Mathfloor(ce.getFullYear()/100),Ae);break;case 68:ge+=te(de.formats.D,ce,de,Le);break;case 70:ge+=te(de.formats.F,ce,de,Le);break;case 72:ge+=E(ce.getHours(),Ae);break;case 73:ge+=E(I(ce.getHours()),Ae);break;case 76:ge+=N(_Mathfloor(Le%1e3));break;case 77:ge+=E(ce.getMinutes(),Ae);break;case 80:ge+=12>ce.getHours()?de.am:de.pm;break;case 82:ge+=te(de.formats.R,ce,de,Le);break;case 83:ge+=E(ce.getSeconds(),Ae);break;case 84:ge+=te(de.formats.T,ce,de,Le);break;case 85:ge+=E(P(ce,'sunday'),Ae);break;case 87:ge+=E(P(ce,'monday'),Ae);break;case 88:ge+=te(de.formats.X,ce,de,Le);break;case 89:ge+=ce.getFullYear();break;case 90:if(se&&0===ue)ge+='GMT';else{var Ee=ce.toString().match(/\(([\w\s]+)\)/);ge+=Ee&&Ee[1]||''}break;case 97:ge+=de.shortDays[ce.getDay()];break;case 98:ge+=de.shortMonths[ce.getMonth()];break;case 99:ge+=te(de.formats.c,ce,de,Le);break;case 100:ge+=E(ce.getDate(),Ae);break;case 101:ge+=E(ce.getDate(),null==Ae?' ':Ae);break;case 104:ge+=de.shortMonths[ce.getMonth()];break;case 106:var ke=new Date(ce.getFullYear(),0,1),ve=_Mathceil((ce.getTime()-ke.getTime())/86400000);ge+=N(ve);break;case 107:ge+=E(ce.getHours(),null==Ae?' ':Ae);break;case 108:ge+=E(I(ce.getHours()),null==Ae?' ':Ae);break;case 109:ge+=E(ce.getMonth()+1,Ae);break;case 110:ge+='\n';break;case 111:var ve=ce.getDate();ge+=de.ordinalSuffixes?ve+''+(de.ordinalSuffixes[ve-1]||M(ve)):ve+''+M(ve);break;case 112:ge+=12>ce.getHours()?de.AM:de.PM;break;case 114:ge+=te(de.formats.r,ce,de,Le);break;case 115:ge+=_Mathfloor(Le/1e3);break;case 116:ge+='\t';break;case 117:var ve=ce.getDay();ge+=0===ve?7:ve;break;case 118:ge+=te(de.formats.v,ce,de,Le);break;case 119:ge+=ce.getDay();break;case 120:ge+=te(de.formats.x,ce,de,Le);break;case 121:ge+=(''+ce.getFullYear()).slice(2);break;case 122:if(se&&0===ue)ge+=xe?'+00:00':'+0000';else{var Re=0===ue?-ce.getTimezoneOffset():ue/60000,be=0>Re?'-':'+',Se=xe?':':'',Ne=_Mathfloor(_Mathabs(Re/60)),Ie=_Mathabs(Re%60);ge+=be+E(Ne)+Se+E(Ie)}break;default:Te&&(ge+='%'),ge+=pe[Oe];}Ae=null,Te=!1;continue}if(37===Ue){Te=!0;continue}ge+=pe[Oe]}return ge}var ae=W||H,ue=Q||0,se=$||!1,ne=0,_e=function(pe,ce){var de;if(!ce){var Le=Date.now();Le>ne?(ne=Le,oe=new Date(ne),de=ne,se&&(oe=new Date(ne+K(oe)+ue))):de=ne,ce=oe}else if(de=ce.getTime(),se){var ge=K(ce);if(ce=new Date(de+ge+ue),K(ce)!==ge){var Ae=K(ce);ce=new Date(de+Ae+ue)}}return te(pe,ce,ae,de)},oe;return _e.localize=function(pe){return new U(pe||ae,ue,se)},_e.localizeByIdentifier=function(pe){var ce=F[pe];return ce?_e.localize(ce):(V('[WARNING] No locale found with identifier "'+pe+'".'),_e)},_e.timezone=function(pe){var ce=ue,de=se,Le=typeof pe;if('number'==Le||'string'==Le)if(de=!0,'string'==Le){var ge='-'===pe[0]?-1:1,Ae=parseInt(pe.slice(1,3),10),Te=parseInt(pe.slice(3,5),10);ce=1e3*(60*(ge*(60*Ae+Te)))}else'number'==Le&&(ce=1e3*(60*pe));return new U(ae,ce,de)},_e.utc=function(){return new U(ae,ue,!0)},_e}function E(W,Q){return''===Q||9<W?W:(null==Q&&(Q='0'),Q+W)}function N(W){return 99<W?W:9<W?'0'+W:'00'+W}function I(W){return 0===W?12:12<W?W-12:W}function P(W,Q){Q=Q||'sunday';var $=W.getDay();'monday'===Q&&(0===$?$=6:$--);var ee=Date.UTC(W.getFullYear(),0,1),te=Date.UTC(W.getFullYear(),W.getMonth(),W.getDate()),ae=_Mathfloor((te-ee)/8.64e7),ue=(ae+7-$)/7;return _Mathfloor(ue)}function M(W){var Q=W%10,$=W%100;return 11<=$&&13>=$||0==Q||4<=Q?'th':1==Q?'st':2==Q?'nd':3==Q?'rd':void 0}function K(W){return 6e4*(W.getTimezoneOffset()||0)}function V(W){'undefined'!=typeof console&&'function'==typeof console.warn&&console.warn(W)}var F={de_DE:{days:['Sonntag','Montag','Dienstag','Mittwoch','Donnerstag','Freitag','Samstag'],shortDays:['So','Mo','Di','Mi','Do','Fr','Sa'],months:['Januar','Februar','M\xE4rz','April','Mai','Juni','Juli','August','September','Oktober','November','Dezember'],shortMonths:['Jan','Feb','M\xE4r','Apr','Mai','Jun','Jul','Aug','Sep','Okt','Nov','Dez'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d.%m.%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},en_CA:{days:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],shortDays:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],months:['January','February','March','April','May','June','July','August','September','October','November','December'],shortMonths:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],ordinalSuffixes:['st','nd','rd','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','st','nd','rd','th','th','th','th','th','th','th','st'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d/%m/%y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%r',x:'%D'}},en_US:{days:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],shortDays:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],months:['January','February','March','April','May','June','July','August','September','October','November','December'],shortMonths:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],ordinalSuffixes:['st','nd','rd','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','st','nd','rd','th','th','th','th','th','th','th','st'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%m/%d/%y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%r',x:'%D'}},es_MX:{days:['domingo','lunes','martes','mi\xE9rcoles','jueves','viernes','s\xE1bado'],shortDays:['dom','lun','mar','mi\xE9','jue','vie','s\xE1b'],months:['enero','febrero','marzo','abril','mayo','junio','julio','agosto','septiembre','octubre','noviembre',' diciembre'],shortMonths:['ene','feb','mar','abr','may','jun','jul','ago','sep','oct','nov','dic'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d/%m/%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},fr_FR:{days:['dimanche','lundi','mardi','mercredi','jeudi','vendredi','samedi'],shortDays:['dim.','lun.','mar.','mer.','jeu.','ven.','sam.'],months:['janvier','f\xE9vrier','mars','avril','mai','juin','juillet','ao\xFBt','septembre','octobre','novembre','d\xE9cembre'],shortMonths:['janv.','f\xE9vr.','mars','avril','mai','juin','juil.','ao\xFBt','sept.','oct.','nov.','d\xE9c.'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d/%m/%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},it_IT:{days:['domenica','luned\xEC','marted\xEC','mercoled\xEC','gioved\xEC','venerd\xEC','sabato'],shortDays:['dom','lun','mar','mer','gio','ven','sab'],months:['gennaio','febbraio','marzo','aprile','maggio','giugno','luglio','agosto','settembre','ottobre','novembre','dicembre'],shortMonths:['pr','mag','giu','lug','ago','set','ott','nov','dic'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d/%m/%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},nl_NL:{days:['zondag','maandag','dinsdag','woensdag','donderdag','vrijdag','zaterdag'],shortDays:['zo','ma','di','wo','do','vr','za'],months:['januari','februari','maart','april','mei','juni','juli','augustus','september','oktober','november','december'],shortMonths:['jan','feb','mrt','apr','mei','jun','jul','aug','sep','okt','nov','dec'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d-%m-%y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},pt_BR:{days:['domingo','segunda','ter\xE7a','quarta','quinta','sexta','s\xE1bado'],shortDays:['Dom','Seg','Ter','Qua','Qui','Sex','S\xE1b'],months:['janeiro','fevereiro','mar\xE7o','abril','maio','junho','julho','agosto','setembro','outubro','novembro','dezembro'],shortMonths:['Jan','Fev','Mar','Abr','Mai','Jun','Jul','Ago','Set','Out','Nov','Dez'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d-%m-%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},ru_RU:{days:['\u0412\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435','\u041F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A','\u0412\u0442\u043E\u0440\u043D\u0438\u043A','\u0421\u0440\u0435\u0434\u0430','\u0427\u0435\u0442\u0432\u0435\u0440\u0433','\u041F\u044F\u0442\u043D\u0438\u0446\u0430','\u0421\u0443\u0431\u0431\u043E\u0442\u0430'],shortDays:['\u0412\u0441','\u041F\u043D','\u0412\u0442','\u0421\u0440','\u0427\u0442','\u041F\u0442','\u0421\u0431'],months:['\u042F\u043D\u0432\u0430\u0440\u044C','\u0424\u0435\u0432\u0440\u0430\u043B\u044C','\u041C\u0430\u0440\u0442','\u0410\u043F\u0440\u0435\u043B\u044C','\u041C\u0430\u0439','\u0418\u044E\u043D\u044C','\u0418\u044E\u043B\u044C','\u0410\u0432\u0433\u0443\u0441\u0442','\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C','\u041E\u043A\u0442\u044F\u0431\u0440\u044C','\u041D\u043E\u044F\u0431\u0440\u044C','\u0414\u0435\u043A\u0430\u0431\u0440\u044C'],shortMonths:['\u044F\u043D\u0432','\u0444\u0435\u0432','\u043C\u0430\u0440','\u0430\u043F\u0440','\u043C\u0430\u0439','\u0438\u044E\u043D','\u0438\u044E\u043B','\u0430\u0432\u0433','\u0441\u0435\u043D','\u043E\u043A\u0442','\u043D\u043E\u044F','\u0434\u0435\u043A'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X',D:'%d.%m.%y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},tr_TR:{days:['Pazar','Pazartesi','Sal\u0131','\xC7ar\u015Famba','Per\u015Fembe','Cuma','Cumartesi'],shortDays:['Paz','Pzt','Sal','\xC7r\u015F','Pr\u015F','Cum','Cts'],months:['Ocak','\u015Eubat','Mart','Nisan','May\u0131s','Haziran','Temmuz','A\u011Fustos','Eyl\xFCl','Ekim','Kas\u0131m','Aral\u0131k'],shortMonths:['Oca','\u015Eub','Mar','Nis','May','Haz','Tem','A\u011Fu','Eyl','Eki','Kas','Ara'],AM:'\xD6\xD6',PM:'\xD6S',am:'\xD6\xD6',pm:'\xD6S',formats:{c:'%a %d %b %Y %X %Z',D:'%d-%m-%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},zh_CN:{days:['\u661F\u671F\u65E5','\u661F\u671F\u4E00','\u661F\u671F\u4E8C','\u661F\u671F\u4E09','\u661F\u671F\u56DB','\u661F\u671F\u4E94','\u661F\u671F\u516D'],shortDays:['\u65E5','\u4E00','\u4E8C','\u4E09','\u56DB','\u4E94','\u516D'],months:['\u4E00\u6708\u4EFD','\u4E8C\u6708\u4EFD','\u4E09\u6708\u4EFD','\u56DB\u6708\u4EFD','\u4E94\u6708\u4EFD','\u516D\u6708\u4EFD','\u4E03\u6708\u4EFD','\u516B\u6708\u4EFD','\u4E5D\u6708\u4EFD','\u5341\u6708\u4EFD','\u5341\u4E00\u6708\u4EFD','\u5341\u4E8C\u6708\u4EFD'],shortMonths:['\u4E00\u6708','\u4E8C\u6708','\u4E09\u6708','\u56DB\u6708','\u4E94\u6708','\u516D\u6708','\u4E03\u6708','\u516B\u6708','\u4E5D\u6708','\u5341\u6708','\u5341\u4E00\u6708','\u5341\u4E8C\u6708'],AM:'\u4E0A\u5348',PM:'\u4E0B\u5348',am:'\u4E0A\u5348',pm:'\u4E0B\u5348',formats:{c:'%a %d %b %Y %X %Z',D:'%d/%m/%y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%r',x:'%D'}}},H=F.en_US,Y=new U(H,0,!1),q;'undefined'==typeof T?(q=function(){return this||(1,eval)('this')}(),q.strftime=Y):q=T.exports=Y,'function'!=typeof Date.now&&(Date.now=function(){return+new Date})})()},function(T){T.exports='function'==typeof Object.create?function(E,N){E.super_=N,E.prototype=Object.create(N.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}})}:function(E,N){E.super_=N;var I=function(){};I.prototype=N.prototype,E.prototype=new I,E.prototype.constructor=E}},function(T){T.exports=function(E){return E&&'object'==typeof E&&'function'==typeof E.copy&&'function'==typeof E.fill&&'function'==typeof E.readUInt8}},function(){}]);